import"./hoisted.CWHuPgaN.js";let h=[];document.addEventListener("scroll",()=>{for(let i of h)i.onscroll()});class n{element;_oldTime=0;_rect;_isShow=!1;constructor(e){this.element=e,h.push(this),this.onscroll()}set isShow(e){this._isShow!==e&&(this._isShow=e,e?(this.element.classList.add("display"),h.indexOf(this)===2&&console.log("show",this._rect,window.scrollY,window.innerHeight)):(this.element.classList.remove("display"),console.log(`${h.indexOf(this)} : fadeOut`),h.indexOf(this)===2&&console.log("miss",this._rect,window.scrollY,window.innerHeight)))}get isShow(){return this._isShow}onscroll(){this._testUpdate();let e=window.scrollY,s=e+window.innerHeight,t=this._rect.top,o=this._rect.bottom;this.isShow=!(o<e||t>s)}_testUpdate(){let e=Date.now();if(e-this._oldTime>5e3){let s=this.element.getBoundingClientRect();this._rect={top:s.top+window.scrollY,bottom:s.bottom+window.scrollY},this._oldTime=e}}}let c=document.querySelectorAll(".fade-in-item");for(let i of c)new n(i);class d{element;pics;icons;details;constructor(e){this.element=e,this.pics=[];for(let t of e.querySelectorAll(".summary-picture"))this.pics.push(t);this.icons=[];let s=e.querySelectorAll(".cells > button");for(let t=0,o=s.length;t<o;++t){let l=s[t];this.icons.push(l),l.addEventListener("click",()=>{this.selected=t})}this.details=[];for(let t of e.querySelectorAll(".summary-details"))this.details.push(t);this.selected=0}_selected;set selected(e){this._selected!==e&&(typeof this._selected=="number"&&(this.pics[this._selected].classList.remove("selected"),this.icons[this._selected].classList.remove("selected"),this.details[this._selected].classList.remove("selected")),this._selected=e,this.pics[e].classList.add("selected"),this.icons[e].classList.add("selected"),this.details[e].classList.add("selected"),this.setTimeout())}get selected(){return this._selected}_timeout;setTimeout(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this.selected=(this.selected+1)%this.icons.length},5e3)}}for(let i of document.querySelectorAll(".summary"))new d(i);class r{element;milestones;constructor(e){this.element=e,e.addEventListener("mousedown",this.touchstart.bind(this)),e.addEventListener("touchstart",this.touchstart.bind(this)),e.addEventListener("mousemove",this.touchmove.bind(this)),e.addEventListener("touchmove",this.touchmove.bind(this)),window.addEventListener("mouseup",this.touchend.bind(this)),e.addEventListener("touchend",this.touchend.bind(this)),e.addEventListener("touchcancel",this.touchend.bind(this)),this.milestones=[];let s=!0,t=0;for(let o of this.element.querySelectorAll(".milestone")){let l=o;this.milestones.push(l),s&&l.classList.add("done"),l.classList.contains("selected")&&(s=!1,t=l.offsetLeft+l.clientWidth/2-this.element.clientWidth/2,this.element.scrollTo({left:t}))}}_dragging=!1;_pointer={x:0,y:0};_oldX;makePointer(e){e instanceof MouseEvent?this._pointer={x:e.screenX,y:e.screenY}:e instanceof TouchEvent&&(this._pointer={x:e.touches[0].screenX,y:e.touches[0].screenY})}touchstart(e){this._dragging||(this._dragging=!0,this.makePointer(e),this._oldX=this.element.scrollLeft)}touchmove(e){if(this._dragging){let s=this._pointer.x;this.makePointer(e);let t=s-this._pointer.x;if(t>0){let o=this.element.scrollWidth-this.element.clientWidth;this._oldX<o&&(this._oldX+=t),this._oldX>o&&(this._oldX=o),console.log(this._oldX),this.element.scrollTo({left:this._oldX})}else t<0&&(this._oldX>0&&(this._oldX+=t),this._oldX<0&&(this._oldX=0),this.element.scrollTo({left:this._oldX}))}}touchend(e){this._dragging&&(this._dragging=!1)}}for(let i of document.querySelectorAll(".road-map > .map"))new r(i);
