/* empty css                                   */import{d as B,g as _,o as m,i as y,w as f,a as s,c as x,F as w,j as V,m as h,b as c,t as d,u as E,r as F,f as k}from"./solana-wallets-vue.D4BdGiPg.js";import{x as T,w as D,g as O,b as P,C as R,c as j,B as A}from"./index.xFIcG6ML.js";import{u as N,$ as K,c as M}from"./stream.BR9XmlpZ.js";import{_ as C}from"./_plugin-vue_export-helper.CDg0sgxn.js";import{b as L}from"./buy_cc_token.DeHj-t1Q.js";import{u as U}from"./use-toast.BmEL3RxB.js";import"./index.pj2VwCcK.js";import"./associatedTokenAccount.CKiQC0Db.js";const W=B({__name:"Slider",props:{name:{},defaultValue:{},modelValue:{},disabled:{type:Boolean},orientation:{},dir:{},inverted:{type:Boolean},min:{},max:{},step:{},minStepsBetweenThumbs:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","valueCommit"],setup(i,{expose:t,emit:u}){t();const e=i,o=u,n=_(()=>{const{class:p,...b}=e;return b}),l=T(n,o),r={props:e,emits:o,delegatedProps:n,forwarded:l,get SliderRange(){return D},get SliderRoot(){return O},get SliderThumb(){return P},get SliderTrack(){return R},get cn(){return j}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function q(i,t,u,e,o,n){return m(),y(e.SliderRoot,h({class:e.cn("relative flex w-full touch-none select-none items-center",e.props.class)},e.forwarded),{default:f(()=>[s(e.SliderTrack,{class:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary"},{default:f(()=>[s(e.SliderRange,{class:"absolute h-full bg-primary"})]),_:1}),(m(!0),x(w,null,V(u.modelValue,(l,r)=>(m(),y(e.SliderThumb,{key:r,class:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}))),128))]),_:1},16,["class"])}const z=C(W,[["render",q]]),G=B({__name:"BuyToken",setup(i,{expose:t}){t();const{toast:u}=U(),e=E(),o=N(K),n=_(()=>{if(o.value){const a=o.value.seller,g=a.target_value_in_sol,v=a.token_to_sell_amount-a.token_selled_amount;return g/v}else return 0}),l=F([1]),r=_(()=>{let a=l.value[0];return Math.max(.01,a)}),p=_(()=>n.value>0?r.value/n.value:0);async function b(){const a=e.publicKey.value;if(a||(await e.connect(),console.log("没有选择钱包")),a){const g=p.value*1e9*.95|0,v=await L(e.publicKey.value,r.value*1e9,g);await e.sendTransaction(v,M.value)}}const S={toast:u,wallet:e,state:o,price:n,inputSolSliderValue:l,inputSol:r,to_get_token_amount:p,buy_token:b,get Button(){return A},get Slider(){return z}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),H={class:"w-60"};function I(i,t,u,e,o,n){return m(),x(w,null,[c("div",null,d((1/e.price.valueOf()).toFixed(3))+" cc for 1 sol",1),c("div",H,[s(e.Slider,{"default-value":[1],max:1,step:.01,modelValue:e.inputSolSliderValue,"onUpdate:modelValue":t[0]||(t[0]=l=>e.inputSolSliderValue=l)},null,8,["modelValue"])]),c("div",null,"你将花费 "+d(e.inputSol)+" sol 以获取 "+d(e.to_get_token_amount.toFixed(3))+" token",1),c("div",null,"因为滑点导致的最少token不少于 "+d((e.to_get_token_amount.valueOf()*.95).toFixed(3)),1),s(e.Button,{onClick:e.buy_token},{default:f(()=>[k("购买")]),_:1}),s(e.Button,{variant:"outline",onClick:t[1]||(t[1]=()=>{e.toast({title:"Scheduled: Catch up",description:"Friday, February 10, 2023 at 5:57 PM"})})},{default:f(()=>[k(" Add to calendar ")]),_:1})],64)}const ne=C(G,[["render",I]]);export{ne as default};
