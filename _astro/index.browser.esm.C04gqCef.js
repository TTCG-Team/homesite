import{g as qr,a as ts,c as De}from"./_commonjsHelpers.BosuxZz1.js";var Eo={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(d,w,S){this.fn=d,this.context=w,this.once=S||!1}function i(d,w,S,B,F){if(typeof S!="function")throw new TypeError("The listener must be a function");var L=new s(S,B||d,F),M=e?e+w:w;return d._events[M]?d._events[M].fn?d._events[M]=[d._events[M],L]:d._events[M].push(L):(d._events[M]=L,d._eventsCount++),d}function o(d,w){--d._eventsCount===0?d._events=new r:delete d._events[w]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var w=[],S,B;if(this._eventsCount===0)return w;for(B in S=this._events)t.call(S,B)&&w.push(e?B.slice(1):B);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(S)):w},c.prototype.listeners=function(w){var S=e?e+w:w,B=this._events[S];if(!B)return[];if(B.fn)return[B.fn];for(var F=0,L=B.length,M=new Array(L);F<L;F++)M[F]=B[F].fn;return M},c.prototype.listenerCount=function(w){var S=e?e+w:w,B=this._events[S];return B?B.fn?1:B.length:0},c.prototype.emit=function(w,S,B,F,L,M){var I=e?e+w:w;if(!this._events[I])return!1;var k=this._events[I],O=arguments.length,z,P;if(k.fn){switch(k.once&&this.removeListener(w,k.fn,void 0,!0),O){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,B),!0;case 4:return k.fn.call(k.context,S,B,F),!0;case 5:return k.fn.call(k.context,S,B,F,L),!0;case 6:return k.fn.call(k.context,S,B,F,L,M),!0}for(P=1,z=new Array(O-1);P<O;P++)z[P-1]=arguments[P];k.fn.apply(k.context,z)}else{var Y=k.length,D;for(P=0;P<Y;P++)switch(k[P].once&&this.removeListener(w,k[P].fn,void 0,!0),O){case 1:k[P].fn.call(k[P].context);break;case 2:k[P].fn.call(k[P].context,S);break;case 3:k[P].fn.call(k[P].context,S,B);break;case 4:k[P].fn.call(k[P].context,S,B,F);break;default:if(!z)for(D=1,z=new Array(O-1);D<O;D++)z[D-1]=arguments[D];k[P].fn.apply(k[P].context,z)}}return!0},c.prototype.on=function(w,S,B){return i(this,w,S,B,!1)},c.prototype.once=function(w,S,B){return i(this,w,S,B,!0)},c.prototype.removeListener=function(w,S,B,F){var L=e?e+w:w;if(!this._events[L])return this;if(!S)return o(this,L),this;var M=this._events[L];if(M.fn)M.fn===S&&(!F||M.once)&&(!B||M.context===B)&&o(this,L);else{for(var I=0,k=[],O=M.length;I<O;I++)(M[I].fn!==S||F&&!M[I].once||B&&M[I].context!==B)&&k.push(M[I]);k.length?this._events[L]=k.length===1?k[0]:k:o(this,L)}return this},c.prototype.removeAllListeners=function(w){var S;return w?(S=e?e+w:w,this._events[S]&&o(this,S)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(Eo);var es=Eo.exports;const e0=qr(es);/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ns(n,t){const e=new Set(n.split(","));return r=>e.has(r)}const n0={},r0=[],vc=()=>{},i0=()=>!1,s0=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),o0=n=>n.startsWith("onUpdate:"),a0=Object.assign,c0=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},xc=Object.prototype.hasOwnProperty,kr=(n,t)=>xc.call(n,t),Fe=Array.isArray,er=n=>Dr(n)==="[object Map]",_c=n=>Dr(n)==="[object Set]",nr=n=>typeof n=="function",Bn=n=>typeof n=="string",Rn=n=>typeof n=="symbol",en=n=>n!==null&&typeof n=="object",u0=n=>(en(n)||nr(n))&&nr(n.then)&&nr(n.catch),Bo=Object.prototype.toString,Dr=n=>Bo.call(n),Sc=n=>Dr(n).slice(8,-1),Ec=n=>Dr(n)==="[object Object]",rs=n=>Bn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,f0=ns(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zr=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},Bc=/-(\w)/g,l0=zr(n=>n.replace(Bc,(t,e)=>e?e.toUpperCase():"")),Ac=/\B([A-Z])/g,h0=zr(n=>n.replace(Ac,"-$1").toLowerCase()),Ic=zr(n=>n.charAt(0).toUpperCase()+n.slice(1)),d0=zr(n=>n?`on${Ic(n)}`:""),Vn=(n,t)=>!Object.is(n,t),p0=(n,t)=>{for(let e=0;e<n.length;e++)n[e](t)},kc=(n,t,e,r=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:r,value:e})},g0=n=>{const t=parseFloat(n);return isNaN(t)?n:t},m0=n=>{const t=Bn(n)?Number(n):NaN;return isNaN(t)?n:t};let Hs;const y0=()=>Hs||(Hs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ao(n){if(Fe(n)){const t={};for(let e=0;e<n.length;e++){const r=n[e],s=Bn(r)?Tc(r):Ao(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Bn(n)||en(n))return n}const Rc=/;(?![^(]*\))/g,Mc=/:([^]+)/,Lc=/\/\*[^]*?\*\//g;function Tc(n){const t={};return n.replace(Lc,"").split(Rc).forEach(e=>{if(e){const r=e.split(Mc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Io(n){let t="";if(Bn(n))t=n;else if(Fe(n))for(let e=0;e<n.length;e++){const r=Io(n[e]);r&&(t+=r+" ")}else if(en(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function w0(n){if(!n)return null;let{class:t,style:e}=n;return t&&!Bn(t)&&(n.class=Io(t)),e&&(n.style=Ao(e)),n}const Cc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",b0=ns(Cc);function v0(n){return!!n||n===""}const x0=n=>Bn(n)?n:n==null?"":Fe(n)||en(n)&&(n.toString===Bo||!nr(n.toString))?JSON.stringify(n,ko,2):String(n),ko=(n,t)=>t&&t.__v_isRef?ko(n,t.value):er(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,s],i)=>(e[_i(r,i)+" =>"]=s,e),{})}:_c(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>_i(e))}:Rn(t)?_i(t):en(t)&&!Fe(t)&&!Ec(t)?String(t):t,_i=(n,t="")=>{var e;return Rn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ae;class Uc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ae,!t&&Ae&&(this.index=(Ae.scopes||(Ae.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Ae;try{return Ae=this,t()}finally{Ae=e}}}on(){Ae=this}off(){Ae=this.parent}stop(t){if(this._active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function _0(n){return new Uc(n)}function Fc(n,t=Ae){t&&t.active&&t.effects.push(n)}function S0(){return Ae}function E0(n){Ae&&Ae.cleanups.push(n)}let xn;class Nc{constructor(t,e,r,s){this.fn=t,this.trigger=e,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Fc(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Lo();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(Oc(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),To()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=hn,e=xn;try{return hn=!0,xn=this,this._runnings++,$s(this),this.fn()}finally{Ws(this),this._runnings--,xn=e,hn=t}}stop(){this.active&&($s(this),Ws(this),this.onStop&&this.onStop(),this.active=!1)}}function Oc(n){return n.value}function $s(n){n._trackId++,n._depsLength=0}function Ws(n){if(n.deps.length>n._depsLength){for(let t=n._depsLength;t<n.deps.length;t++)Ro(n.deps[t],n);n.deps.length=n._depsLength}}function Ro(n,t){const e=n.get(t);e!==void 0&&t._trackId!==e&&(n.delete(t),n.size===0&&n.cleanup())}let hn=!0,Pi=0;const Mo=[];function Lo(){Mo.push(hn),hn=!1}function To(){const n=Mo.pop();hn=n===void 0?!0:n}function is(){Pi++}function ss(){for(Pi--;!Pi&&qi.length;)qi.shift()()}function Co(n,t,e){if(t.get(n)!==n._trackId){t.set(n,n._trackId);const r=n.deps[n._depsLength];r!==t?(r&&Ro(r,n),n.deps[n._depsLength++]=t):n._depsLength++}}const qi=[];function Uo(n,t,e){is();for(const r of n.keys()){let s;r._dirtyLevel<t&&(s??(s=n.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=n.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&qi.push(r.scheduler)))}ss()}const Fo=(n,t)=>{const e=new Map;return e.cleanup=n,e.computed=t,e},Rr=new WeakMap,_n=Symbol(""),Di=Symbol("");function Oe(n,t,e){if(hn&&xn){let r=Rr.get(n);r||Rr.set(n,r=new Map);let s=r.get(e);s||r.set(e,s=Fo(()=>r.delete(e))),Co(xn,s)}}function dn(n,t,e,r,s,i){const o=Rr.get(n);if(!o)return;let c=[];if(t==="clear")c=[...o.values()];else if(e==="length"&&Fe(n)){const d=Number(r);o.forEach((w,S)=>{(S==="length"||!Rn(S)&&S>=d)&&c.push(w)})}else switch(e!==void 0&&c.push(o.get(e)),t){case"add":Fe(n)?rs(e)&&c.push(o.get("length")):(c.push(o.get(_n)),er(n)&&c.push(o.get(Di)));break;case"delete":Fe(n)||(c.push(o.get(_n)),er(n)&&c.push(o.get(Di)));break;case"set":er(n)&&c.push(o.get(_n));break}is();for(const d of c)d&&Uo(d,4);ss()}function Pc(n,t){const e=Rr.get(n);return e&&e.get(t)}const qc=ns("__proto__,__v_isRef,__isVue"),No=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Rn)),js=Dc();function Dc(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){const r=Bt(this);for(let i=0,o=this.length;i<o;i++)Oe(r,"get",i+"");const s=r[t](...e);return s===-1||s===!1?r[t](...e.map(Bt)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){Lo(),is();const r=Bt(this)[t].apply(this,e);return ss(),To(),r}}),n}function zc(n){Rn(n)||(n=String(n));const t=Bt(this);return Oe(t,"has",n),t.hasOwnProperty(n)}class Oo{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){const s=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(s?i?Ho:Ko:i?zo:Do).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Fe(t);if(!s){if(o&&kr(js,e))return Reflect.get(js,e,r);if(e==="hasOwnProperty")return zc}const c=Reflect.get(t,e,r);return(Rn(e)?No.has(e):qc(e))||(s||Oe(t,"get",e),i)?c:mn(c)?o&&rs(e)?c:c.value:en(c)?s?Wo(c):$o(c):c}}class Po extends Oo{constructor(t=!1){super(!1,t)}set(t,e,r,s){let i=t[e];if(!this._isShallow){const d=rr(i);if(!Vo(r)&&!rr(r)&&(i=Bt(i),r=Bt(r)),!Fe(t)&&mn(i)&&!mn(r))return d?!1:(i.value=r,!0)}const o=Fe(t)&&rs(e)?Number(e)<t.length:kr(t,e),c=Reflect.set(t,e,r,s);return t===Bt(s)&&(o?Vn(r,i)&&dn(t,"set",e,r):dn(t,"add",e,r)),c}deleteProperty(t,e){const r=kr(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&r&&dn(t,"delete",e,void 0),s}has(t,e){const r=Reflect.has(t,e);return(!Rn(e)||!No.has(e))&&Oe(t,"has",e),r}ownKeys(t){return Oe(t,"iterate",Fe(t)?"length":_n),Reflect.ownKeys(t)}}class qo extends Oo{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Kc=new Po,Hc=new qo,$c=new Po(!0),Wc=new qo(!0),os=n=>n,Kr=n=>Reflect.getPrototypeOf(n);function gr(n,t,e=!1,r=!1){n=n.__v_raw;const s=Bt(n),i=Bt(t);e||(Vn(t,i)&&Oe(s,"get",t),Oe(s,"get",i));const{has:o}=Kr(s),c=r?os:e?as:ir;if(o.call(s,t))return c(n.get(t));if(o.call(s,i))return c(n.get(i));n!==s&&n.get(t)}function mr(n,t=!1){const e=this.__v_raw,r=Bt(e),s=Bt(n);return t||(Vn(n,s)&&Oe(r,"has",n),Oe(r,"has",s)),n===s?e.has(n):e.has(n)||e.has(s)}function yr(n,t=!1){return n=n.__v_raw,!t&&Oe(Bt(n),"iterate",_n),Reflect.get(n,"size",n)}function Vs(n){n=Bt(n);const t=Bt(this);return Kr(t).has.call(t,n)||(t.add(n),dn(t,"add",n,n)),this}function Gs(n,t){t=Bt(t);const e=Bt(this),{has:r,get:s}=Kr(e);let i=r.call(e,n);i||(n=Bt(n),i=r.call(e,n));const o=s.call(e,n);return e.set(n,t),i?Vn(t,o)&&dn(e,"set",n,t):dn(e,"add",n,t),this}function Zs(n){const t=Bt(this),{has:e,get:r}=Kr(t);let s=e.call(t,n);s||(n=Bt(n),s=e.call(t,n)),r&&r.call(t,n);const i=t.delete(n);return s&&dn(t,"delete",n,void 0),i}function Ys(){const n=Bt(this),t=n.size!==0,e=n.clear();return t&&dn(n,"clear",void 0,void 0),e}function wr(n,t){return function(r,s){const i=this,o=i.__v_raw,c=Bt(o),d=t?os:n?as:ir;return!n&&Oe(c,"iterate",_n),o.forEach((w,S)=>r.call(s,d(w),d(S),i))}}function br(n,t,e){return function(...r){const s=this.__v_raw,i=Bt(s),o=er(i),c=n==="entries"||n===Symbol.iterator&&o,d=n==="keys"&&o,w=s[n](...r),S=e?os:t?as:ir;return!t&&Oe(i,"iterate",d?Di:_n),{next(){const{value:B,done:F}=w.next();return F?{value:B,done:F}:{value:c?[S(B[0]),S(B[1])]:S(B),done:F}},[Symbol.iterator](){return this}}}}function nn(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function jc(){const n={get(i){return gr(this,i)},get size(){return yr(this)},has:mr,add:Vs,set:Gs,delete:Zs,clear:Ys,forEach:wr(!1,!1)},t={get(i){return gr(this,i,!1,!0)},get size(){return yr(this)},has:mr,add:Vs,set:Gs,delete:Zs,clear:Ys,forEach:wr(!1,!0)},e={get(i){return gr(this,i,!0)},get size(){return yr(this,!0)},has(i){return mr.call(this,i,!0)},add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear"),forEach:wr(!0,!1)},r={get(i){return gr(this,i,!0,!0)},get size(){return yr(this,!0)},has(i){return mr.call(this,i,!0)},add:nn("add"),set:nn("set"),delete:nn("delete"),clear:nn("clear"),forEach:wr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=br(i,!1,!1),e[i]=br(i,!0,!1),t[i]=br(i,!1,!0),r[i]=br(i,!0,!0)}),[n,e,t,r]}const[Vc,Gc,Zc,Yc]=jc();function Hr(n,t){const e=t?n?Yc:Zc:n?Gc:Vc;return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(kr(e,s)&&s in r?e:r,s,i)}const Jc={get:Hr(!1,!1)},Xc={get:Hr(!1,!0)},Qc={get:Hr(!0,!1)},tu={get:Hr(!0,!0)},Do=new WeakMap,zo=new WeakMap,Ko=new WeakMap,Ho=new WeakMap;function eu(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nu(n){return n.__v_skip||!Object.isExtensible(n)?0:eu(Sc(n))}function $o(n){return rr(n)?n:$r(n,!1,Kc,Jc,Do)}function B0(n){return $r(n,!1,$c,Xc,zo)}function Wo(n){return $r(n,!0,Hc,Qc,Ko)}function A0(n){return $r(n,!0,Wc,tu,Ho)}function $r(n,t,e,r,s){if(!en(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const i=s.get(n);if(i)return i;const o=nu(n);if(o===0)return n;const c=new Proxy(n,o===2?r:e);return s.set(n,c),c}function jo(n){return rr(n)?jo(n.__v_raw):!!(n&&n.__v_isReactive)}function rr(n){return!!(n&&n.__v_isReadonly)}function Vo(n){return!!(n&&n.__v_isShallow)}function I0(n){return n?!!n.__v_raw:!1}function Bt(n){const t=n&&n.__v_raw;return t?Bt(t):n}function k0(n){return Object.isExtensible(n)&&kc(n,"__v_skip",!0),n}const ir=n=>en(n)?$o(n):n,as=n=>en(n)?Wo(n):n;class Go{constructor(t,e,r,s){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Nc(()=>t(this._value),()=>Br(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Bt(this);return(!t._cacheable||t.effect.dirty)&&Vn(t._value,t._value=t.effect.run())&&Br(t,4),Zo(t),t.effect._dirtyLevel>=2&&Br(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function R0(n,t,e=!1){let r,s;const i=nr(n);return i?(r=n,s=vc):(r=n.get,s=n.set),new Go(r,s,i||!s,e)}function Zo(n){var t;hn&&xn&&(n=Bt(n),Co(xn,(t=n.dep)!=null?t:n.dep=Fo(()=>n.dep=void 0,n instanceof Go?n:void 0)))}function Br(n,t=4,e){n=Bt(n);const r=n.dep;r&&Uo(r,t)}function mn(n){return!!(n&&n.__v_isRef===!0)}function M0(n){return Yo(n,!1)}function L0(n){return Yo(n,!0)}function Yo(n,t){return mn(n)?n:new ru(n,t)}class ru{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Bt(t),this._value=e?t:ir(t)}get value(){return Zo(this),this._value}set value(t){const e=this.__v_isShallow||Vo(t)||rr(t);t=e?t:Bt(t),Vn(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:ir(t),Br(this,4))}}function iu(n){return mn(n)?n.value:n}const su={get:(n,t,e)=>iu(Reflect.get(n,t,e)),set:(n,t,e,r)=>{const s=n[t];return mn(s)&&!mn(e)?(s.value=e,!0):Reflect.set(n,t,e,r)}};function T0(n){return jo(n)?n:new Proxy(n,su)}function C0(n){const t=Fe(n)?new Array(n.length):{};for(const e in n)t[e]=au(n,e);return t}class ou{constructor(t,e,r){this._object=t,this._key=e,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Pc(Bt(this._object),this._key)}}function au(n,t,e){const r=n[t];return mn(r)?r:new ou(n,t,e)}var tt={},Wr={};Wr.byteLength=fu;Wr.toByteArray=hu;Wr.fromByteArray=gu;var $e=[],Te=[],cu=typeof Uint8Array<"u"?Uint8Array:Array,Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Fn=0,uu=Si.length;Fn<uu;++Fn)$e[Fn]=Si[Fn],Te[Si.charCodeAt(Fn)]=Fn;Te[45]=62;Te[95]=63;function Jo(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function fu(n){var t=Jo(n),e=t[0],r=t[1];return(e+r)*3/4-r}function lu(n,t,e){return(t+e)*3/4-e}function hu(n){var t,e=Jo(n),r=e[0],s=e[1],i=new cu(lu(n,r,s)),o=0,c=s>0?r-4:r,d;for(d=0;d<c;d+=4)t=Te[n.charCodeAt(d)]<<18|Te[n.charCodeAt(d+1)]<<12|Te[n.charCodeAt(d+2)]<<6|Te[n.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Te[n.charCodeAt(d)]<<2|Te[n.charCodeAt(d+1)]>>4,i[o++]=t&255),s===1&&(t=Te[n.charCodeAt(d)]<<10|Te[n.charCodeAt(d+1)]<<4|Te[n.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function du(n){return $e[n>>18&63]+$e[n>>12&63]+$e[n>>6&63]+$e[n&63]}function pu(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(du(r));return s.join("")}function gu(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,c=e-r;o<c;o+=i)s.push(pu(n,o,o+i>c?c:o+i));return r===1?(t=n[e-1],s.push($e[t>>2]+$e[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push($e[t>>10]+$e[t>>4&63]+$e[t<<2&63]+"=")),s.join("")}var cs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cs.read=function(n,t,e,r,s){var i,o,c=s*8-r-1,d=(1<<c)-1,w=d>>1,S=-7,B=e?s-1:0,F=e?-1:1,L=n[t+B];for(B+=F,i=L&(1<<-S)-1,L>>=-S,S+=c;S>0;i=i*256+n[t+B],B+=F,S-=8);for(o=i&(1<<-S)-1,i>>=-S,S+=r;S>0;o=o*256+n[t+B],B+=F,S-=8);if(i===0)i=1-w;else{if(i===d)return o?NaN:(L?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-w}return(L?-1:1)*o*Math.pow(2,i-r)};cs.write=function(n,t,e,r,s,i){var o,c,d,w=i*8-s-1,S=(1<<w)-1,B=S>>1,F=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=r?0:i-1,M=r?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=S):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+B>=1?t+=F/d:t+=F*Math.pow(2,1-B),t*d>=2&&(o++,d/=2),o+B>=S?(c=0,o=S):o+B>=1?(c=(t*d-1)*Math.pow(2,s),o=o+B):(c=t*Math.pow(2,B-1)*Math.pow(2,s),o=0));s>=8;n[e+L]=c&255,L+=M,c/=256,s-=8);for(o=o<<s|c,w+=s;w>0;n[e+L]=o&255,L+=M,o/=256,w-=8);n[e+L-M]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=Wr,e=cs,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=z,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const p=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(p,u),p.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(p){if(p>s)throw new RangeError('The value "'+p+'" is invalid for option "size"');const u=new Uint8Array(p);return Object.setPrototypeOf(u,c.prototype),u}function c(p,u,l){if(typeof p=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(p)}return d(p,u,l)}c.poolSize=8192;function d(p,u,l){if(typeof p=="string")return F(p,u);if(ArrayBuffer.isView(p))return M(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(ge(p,ArrayBuffer)||p&&ge(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(p,SharedArrayBuffer)||p&&ge(p.buffer,SharedArrayBuffer)))return I(p,u,l);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=p.valueOf&&p.valueOf();if(b!=null&&b!==p)return c.from(b,u,l);const R=k(p);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return c.from(p[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}c.from=function(p,u,l){return d(p,u,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function w(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function S(p,u,l){return w(p),p<=0?o(p):u!==void 0?typeof l=="string"?o(p).fill(u,l):o(p).fill(u):o(p)}c.alloc=function(p,u,l){return S(p,u,l)};function B(p){return w(p),o(p<0?0:O(p)|0)}c.allocUnsafe=function(p){return B(p)},c.allocUnsafeSlow=function(p){return B(p)};function F(p,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=P(p,u)|0;let b=o(l);const R=b.write(p,u);return R!==l&&(b=b.slice(0,R)),b}function L(p){const u=p.length<0?0:O(p.length)|0,l=o(u);for(let b=0;b<u;b+=1)l[b]=p[b]&255;return l}function M(p){if(ge(p,Uint8Array)){const u=new Uint8Array(p);return I(u.buffer,u.byteOffset,u.byteLength)}return L(p)}function I(p,u,l){if(u<0||p.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let b;return u===void 0&&l===void 0?b=new Uint8Array(p):l===void 0?b=new Uint8Array(p,u):b=new Uint8Array(p,u,l),Object.setPrototypeOf(b,c.prototype),b}function k(p){if(c.isBuffer(p)){const u=O(p.length)|0,l=o(u);return l.length===0||p.copy(l,0,0,u),l}if(p.length!==void 0)return typeof p.length!="number"||Rt(p.length)?o(0):L(p);if(p.type==="Buffer"&&Array.isArray(p.data))return L(p.data)}function O(p){if(p>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return p|0}function z(p){return+p!=p&&(p=0),c.alloc(+p)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,l){if(ge(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),ge(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(u)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let b=u.length,R=l.length;for(let T=0,N=Math.min(b,R);T<N;++T)if(u[T]!==l[T]){b=u[T],R=l[T];break}return b<R?-1:R<b?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let b;if(l===void 0)for(l=0,b=0;b<u.length;++b)l+=u[b].length;const R=c.allocUnsafe(l);let T=0;for(b=0;b<u.length;++b){let N=u[b];if(ge(N,Uint8Array))T+N.length>R.length?(c.isBuffer(N)||(N=c.from(N)),N.copy(R,T)):Uint8Array.prototype.set.call(R,N,T);else if(c.isBuffer(N))N.copy(R,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=N.length}return R};function P(p,u){if(c.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||ge(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const l=p.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&l===0)return 0;let R=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return It(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Tt(p).length;default:if(R)return b?-1:It(p).length;u=(""+u).toLowerCase(),R=!0}}c.byteLength=P;function Y(p,u,l){let b=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(p||(p="utf8");;)switch(p){case"hex":return v(this,u,l);case"utf8":case"utf-8":return a(this,u,l);case"ascii":return x(this,u,l);case"latin1":case"binary":return y(this,u,l);case"base64":return E(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,u,l);default:if(b)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),b=!0}}c.prototype._isBuffer=!0;function D(p,u,l){const b=p[u];p[u]=p[l],p[l]=b}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)D(this,l,l+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)D(this,l,l+3),D(this,l+1,l+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)D(this,l,l+7),D(this,l+1,l+6),D(this,l+2,l+5),D(this,l+3,l+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?a(this,0,u):Y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const l=n.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(u,l,b,R,T){if(ge(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),b===void 0&&(b=u?u.length:0),R===void 0&&(R=0),T===void 0&&(T=this.length),l<0||b>u.length||R<0||T>this.length)throw new RangeError("out of range index");if(R>=T&&l>=b)return 0;if(R>=T)return-1;if(l>=b)return 1;if(l>>>=0,b>>>=0,R>>>=0,T>>>=0,this===u)return 0;let N=T-R,pt=b-l;const ht=Math.min(N,pt),ft=this.slice(R,T),Ut=u.slice(l,b);for(let ut=0;ut<ht;++ut)if(ft[ut]!==Ut[ut]){N=ft[ut],pt=Ut[ut];break}return N<pt?-1:pt<N?1:0};function K(p,u,l,b,R){if(p.length===0)return-1;if(typeof l=="string"?(b=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Rt(l)&&(l=R?0:p.length-1),l<0&&(l=p.length+l),l>=p.length){if(R)return-1;l=p.length-1}else if(l<0)if(R)l=0;else return-1;if(typeof u=="string"&&(u=c.from(u,b)),c.isBuffer(u))return u.length===0?-1:J(p,u,l,b,R);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(p,u,l):Uint8Array.prototype.lastIndexOf.call(p,u,l):J(p,[u],l,b,R);throw new TypeError("val must be string, number or Buffer")}function J(p,u,l,b,R){let T=1,N=p.length,pt=u.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(p.length<2||u.length<2)return-1;T=2,N/=2,pt/=2,l/=2}function ht(Ut,ut){return T===1?Ut[ut]:Ut.readUInt16BE(ut*T)}let ft;if(R){let Ut=-1;for(ft=l;ft<N;ft++)if(ht(p,ft)===ht(u,Ut===-1?0:ft-Ut)){if(Ut===-1&&(Ut=ft),ft-Ut+1===pt)return Ut*T}else Ut!==-1&&(ft-=ft-Ut),Ut=-1}else for(l+pt>N&&(l=N-pt),ft=l;ft>=0;ft--){let Ut=!0;for(let ut=0;ut<pt;ut++)if(ht(p,ft+ut)!==ht(u,ut)){Ut=!1;break}if(Ut)return ft}return-1}c.prototype.includes=function(u,l,b){return this.indexOf(u,l,b)!==-1},c.prototype.indexOf=function(u,l,b){return K(this,u,l,b,!0)},c.prototype.lastIndexOf=function(u,l,b){return K(this,u,l,b,!1)};function et(p,u,l,b){l=Number(l)||0;const R=p.length-l;b?(b=Number(b),b>R&&(b=R)):b=R;const T=u.length;b>T/2&&(b=T/2);let N;for(N=0;N<b;++N){const pt=parseInt(u.substr(N*2,2),16);if(Rt(pt))return N;p[l+N]=pt}return N}function _t(p,u,l,b){return kt(It(u,p.length-l),p,l,b)}function yt(p,u,l,b){return kt(Nt(u),p,l,b)}function X(p,u,l,b){return kt(Tt(u),p,l,b)}function St(p,u,l,b){return kt(Un(u,p.length-l),p,l,b)}c.prototype.write=function(u,l,b,R){if(l===void 0)R="utf8",b=this.length,l=0;else if(b===void 0&&typeof l=="string")R=l,b=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(b)?(b=b>>>0,R===void 0&&(R="utf8")):(R=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-l;if((b===void 0||b>T)&&(b=T),u.length>0&&(b<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let N=!1;for(;;)switch(R){case"hex":return et(this,u,l,b);case"utf8":case"utf-8":return _t(this,u,l,b);case"ascii":case"latin1":case"binary":return yt(this,u,l,b);case"base64":return X(this,u,l,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return St(this,u,l,b);default:if(N)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),N=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(p,u,l){return u===0&&l===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(u,l))}function a(p,u,l){l=Math.min(p.length,l);const b=[];let R=u;for(;R<l;){const T=p[R];let N=null,pt=T>239?4:T>223?3:T>191?2:1;if(R+pt<=l){let ht,ft,Ut,ut;switch(pt){case 1:T<128&&(N=T);break;case 2:ht=p[R+1],(ht&192)===128&&(ut=(T&31)<<6|ht&63,ut>127&&(N=ut));break;case 3:ht=p[R+1],ft=p[R+2],(ht&192)===128&&(ft&192)===128&&(ut=(T&15)<<12|(ht&63)<<6|ft&63,ut>2047&&(ut<55296||ut>57343)&&(N=ut));break;case 4:ht=p[R+1],ft=p[R+2],Ut=p[R+3],(ht&192)===128&&(ft&192)===128&&(Ut&192)===128&&(ut=(T&15)<<18|(ht&63)<<12|(ft&63)<<6|Ut&63,ut>65535&&ut<1114112&&(N=ut))}}N===null?(N=65533,pt=1):N>65535&&(N-=65536,b.push(N>>>10&1023|55296),N=56320|N&1023),b.push(N),R+=pt}return g(b)}const h=4096;function g(p){const u=p.length;if(u<=h)return String.fromCharCode.apply(String,p);let l="",b=0;for(;b<u;)l+=String.fromCharCode.apply(String,p.slice(b,b+=h));return l}function x(p,u,l){let b="";l=Math.min(p.length,l);for(let R=u;R<l;++R)b+=String.fromCharCode(p[R]&127);return b}function y(p,u,l){let b="";l=Math.min(p.length,l);for(let R=u;R<l;++R)b+=String.fromCharCode(p[R]);return b}function v(p,u,l){const b=p.length;(!u||u<0)&&(u=0),(!l||l<0||l>b)&&(l=b);let R="";for(let T=u;T<l;++T)R+=Lt[p[T]];return R}function A(p,u,l){const b=p.slice(u,l);let R="";for(let T=0;T<b.length-1;T+=2)R+=String.fromCharCode(b[T]+b[T+1]*256);return R}c.prototype.slice=function(u,l){const b=this.length;u=~~u,l=l===void 0?b:~~l,u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),l<u&&(l=u);const R=this.subarray(u,l);return Object.setPrototypeOf(R,c.prototype),R};function m(p,u,l){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+u>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let R=this[u],T=1,N=0;for(;++N<l&&(T*=256);)R+=this[u+N]*T;return R},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let R=this[u+--l],T=1;for(;l>0&&(T*=256);)R+=this[u+--l]*T;return R},c.prototype.readUint8=c.prototype.readUInt8=function(u,l){return u=u>>>0,l||m(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||m(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||m(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||m(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=_e(function(u){u=u>>>0,Mt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&bt(u,this.length-8);const R=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,T=this[++u]+this[++u]*2**8+this[++u]*2**16+b*2**24;return BigInt(R)+(BigInt(T)<<BigInt(32))}),c.prototype.readBigUInt64BE=_e(function(u){u=u>>>0,Mt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&bt(u,this.length-8);const R=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],T=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b;return(BigInt(R)<<BigInt(32))+BigInt(T)}),c.prototype.readIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let R=this[u],T=1,N=0;for(;++N<l&&(T*=256);)R+=this[u+N]*T;return T*=128,R>=T&&(R-=Math.pow(2,8*l)),R},c.prototype.readIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||m(u,l,this.length);let R=l,T=1,N=this[u+--R];for(;R>0&&(T*=256);)N+=this[u+--R]*T;return T*=128,N>=T&&(N-=Math.pow(2,8*l)),N},c.prototype.readInt8=function(u,l){return u=u>>>0,l||m(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,l){u=u>>>0,l||m(u,2,this.length);const b=this[u]|this[u+1]<<8;return b&32768?b|4294901760:b},c.prototype.readInt16BE=function(u,l){u=u>>>0,l||m(u,2,this.length);const b=this[u+1]|this[u]<<8;return b&32768?b|4294901760:b},c.prototype.readInt32LE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=_e(function(u){u=u>>>0,Mt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&bt(u,this.length-8);const R=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(b<<24);return(BigInt(R)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=_e(function(u){u=u>>>0,Mt(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&bt(u,this.length-8);const R=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(R)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b)}),c.prototype.readFloatLE=function(u,l){return u=u>>>0,l||m(u,4,this.length),e.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,l){return u=u>>>0,l||m(u,4,this.length),e.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||m(u,8,this.length),e.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||m(u,8,this.length),e.read(this,u,!1,52,8)};function f(p,u,l,b,R,T){if(!c.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>R||u<T)throw new RangeError('"value" argument is out of bounds');if(l+b>p.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,l,b,R){if(u=+u,l=l>>>0,b=b>>>0,!R){const pt=Math.pow(2,8*b)-1;f(this,u,l,b,pt,0)}let T=1,N=0;for(this[l]=u&255;++N<b&&(T*=256);)this[l+N]=u/T&255;return l+b},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,l,b,R){if(u=+u,l=l>>>0,b=b>>>0,!R){const pt=Math.pow(2,8*b)-1;f(this,u,l,b,pt,0)}let T=b-1,N=1;for(this[l+T]=u&255;--T>=0&&(N*=256);)this[l+T]=u/N&255;return l+b},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,1,255,0),this[l]=u&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function _(p,u,l,b,R){lt(u,b,R,p,l,7);let T=Number(u&BigInt(4294967295));p[l++]=T,T=T>>8,p[l++]=T,T=T>>8,p[l++]=T,T=T>>8,p[l++]=T;let N=Number(u>>BigInt(32)&BigInt(4294967295));return p[l++]=N,N=N>>8,p[l++]=N,N=N>>8,p[l++]=N,N=N>>8,p[l++]=N,l}function H(p,u,l,b,R){lt(u,b,R,p,l,7);let T=Number(u&BigInt(4294967295));p[l+7]=T,T=T>>8,p[l+6]=T,T=T>>8,p[l+5]=T,T=T>>8,p[l+4]=T;let N=Number(u>>BigInt(32)&BigInt(4294967295));return p[l+3]=N,N=N>>8,p[l+2]=N,N=N>>8,p[l+1]=N,N=N>>8,p[l]=N,l+8}c.prototype.writeBigUInt64LE=_e(function(u,l=0){return _(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=_e(function(u,l=0){return H(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,l,b,R){if(u=+u,l=l>>>0,!R){const ht=Math.pow(2,8*b-1);f(this,u,l,b,ht-1,-ht)}let T=0,N=1,pt=0;for(this[l]=u&255;++T<b&&(N*=256);)u<0&&pt===0&&this[l+T-1]!==0&&(pt=1),this[l+T]=(u/N>>0)-pt&255;return l+b},c.prototype.writeIntBE=function(u,l,b,R){if(u=+u,l=l>>>0,!R){const ht=Math.pow(2,8*b-1);f(this,u,l,b,ht-1,-ht)}let T=b-1,N=1,pt=0;for(this[l+T]=u&255;--T>=0&&(N*=256);)u<0&&pt===0&&this[l+T+1]!==0&&(pt=1),this[l+T]=(u/N>>0)-pt&255;return l+b},c.prototype.writeInt8=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},c.prototype.writeInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},c.prototype.writeInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||f(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},c.prototype.writeBigInt64LE=_e(function(u,l=0){return _(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=_e(function(u,l=0){return H(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $(p,u,l,b,R,T){if(l+b>p.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function W(p,u,l,b,R){return u=+u,l=l>>>0,R||$(p,u,l,4),e.write(p,u,l,b,23,4),l+4}c.prototype.writeFloatLE=function(u,l,b){return W(this,u,l,!0,b)},c.prototype.writeFloatBE=function(u,l,b){return W(this,u,l,!1,b)};function st(p,u,l,b,R){return u=+u,l=l>>>0,R||$(p,u,l,8),e.write(p,u,l,b,52,8),l+8}c.prototype.writeDoubleLE=function(u,l,b){return st(this,u,l,!0,b)},c.prototype.writeDoubleBE=function(u,l,b){return st(this,u,l,!1,b)},c.prototype.copy=function(u,l,b,R){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(b||(b=0),!R&&R!==0&&(R=this.length),l>=u.length&&(l=u.length),l||(l=0),R>0&&R<b&&(R=b),R===b||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),u.length-l<R-b&&(R=u.length-l+b);const T=R-b;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,b,R):Uint8Array.prototype.set.call(u,this.subarray(b,R),l),T},c.prototype.fill=function(u,l,b,R){if(typeof u=="string"){if(typeof l=="string"?(R=l,l=0,b=this.length):typeof b=="string"&&(R=b,b=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!c.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(u.length===1){const N=u.charCodeAt(0);(R==="utf8"&&N<128||R==="latin1")&&(u=N)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<b)throw new RangeError("Out of range index");if(b<=l)return this;l=l>>>0,b=b===void 0?this.length:b>>>0,u||(u=0);let T;if(typeof u=="number")for(T=l;T<b;++T)this[T]=u;else{const N=c.isBuffer(u)?u:c.from(u,R),pt=N.length;if(pt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(T=0;T<b-l;++T)this[T+l]=N[T%pt]}return this};const rt={};function ot(p,u,l){rt[p]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}ot("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ot("ERR_INVALID_ARG_TYPE",function(p,u){return`The "${p}" argument must be of type number. Received type ${typeof u}`},TypeError),ot("ERR_OUT_OF_RANGE",function(p,u,l){let b=`The value of "${p}" is out of range.`,R=l;return Number.isInteger(l)&&Math.abs(l)>2**32?R=Dt(String(l)):typeof l=="bigint"&&(R=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(R=Dt(R)),R+="n"),b+=` It must be ${u}. Received ${R}`,b},RangeError);function Dt(p){let u="",l=p.length;const b=p[0]==="-"?1:0;for(;l>=b+4;l-=3)u=`_${p.slice(l-3,l)}${u}`;return`${p.slice(0,l)}${u}`}function dt(p,u,l){Mt(u,"offset"),(p[u]===void 0||p[u+l]===void 0)&&bt(u,p.length-(l+1))}function lt(p,u,l,b,R,T){if(p>l||p<u){const N=typeof u=="bigint"?"n":"";let pt;throw u===0||u===BigInt(0)?pt=`>= 0${N} and < 2${N} ** ${(T+1)*8}${N}`:pt=`>= -(2${N} ** ${(T+1)*8-1}${N}) and < 2 ** ${(T+1)*8-1}${N}`,new rt.ERR_OUT_OF_RANGE("value",pt,p)}dt(b,R,T)}function Mt(p,u){if(typeof p!="number")throw new rt.ERR_INVALID_ARG_TYPE(u,"number",p)}function bt(p,u,l){throw Math.floor(p)!==p?(Mt(p,l),new rt.ERR_OUT_OF_RANGE("offset","an integer",p)):u<0?new rt.ERR_BUFFER_OUT_OF_BOUNDS:new rt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,p)}const Et=/[^+/0-9A-Za-z-_]/g;function Ke(p){if(p=p.split("=")[0],p=p.trim().replace(Et,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function It(p,u){u=u||1/0;let l;const b=p.length;let R=null;const T=[];for(let N=0;N<b;++N){if(l=p.charCodeAt(N),l>55295&&l<57344){if(!R){if(l>56319){(u-=3)>-1&&T.push(239,191,189);continue}else if(N+1===b){(u-=3)>-1&&T.push(239,191,189);continue}R=l;continue}if(l<56320){(u-=3)>-1&&T.push(239,191,189),R=l;continue}l=(R-55296<<10|l-56320)+65536}else R&&(u-=3)>-1&&T.push(239,191,189);if(R=null,l<128){if((u-=1)<0)break;T.push(l)}else if(l<2048){if((u-=2)<0)break;T.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;T.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;T.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return T}function Nt(p){const u=[];for(let l=0;l<p.length;++l)u.push(p.charCodeAt(l)&255);return u}function Un(p,u){let l,b,R;const T=[];for(let N=0;N<p.length&&!((u-=2)<0);++N)l=p.charCodeAt(N),b=l>>8,R=l%256,T.push(R),T.push(b);return T}function Tt(p){return t.toByteArray(Ke(p))}function kt(p,u,l,b){let R;for(R=0;R<b&&!(R+l>=u.length||R>=p.length);++R)u[R+l]=p[R];return R}function ge(p,u){return p instanceof u||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===u.name}function Rt(p){return p!==p}const Lt=function(){const p="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const b=l*16;for(let R=0;R<16;++R)u[b+R]=p[l]+p[R]}return u}();function _e(p){return typeof BigInt>"u"?Ct:p}function Ct(){throw new Error("BigInt not supported")}})(tt);function Js(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function mu(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function jr(n,...t){if(!mu(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function yu(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Js(n.outputLen),Js(n.blockLen)}function Mr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function wu(n,t){jr(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Ei=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bi=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),He=(n,t)=>n<<32-t|n>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Xo(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function us(n){return typeof n=="string"&&(n=Xo(n)),jr(n),n}function Qo(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];jr(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class ta{clone(){return this._cloneInto()}}function ea(n){const t=r=>n().update(us(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function na(n=32){if(Ei&&typeof Ei.getRandomValues=="function")return Ei.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function bu(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),d=r?4:0,w=r?0:4;n.setUint32(t+d,o,r),n.setUint32(t+w,c,r)}const vu=(n,t,e)=>n&t^~n&e,xu=(n,t,e)=>n&t^n&e^t&e;class ra extends ta{constructor(t,e,r,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Bi(this.buffer)}update(t){Mr(this);const{view:e,buffer:r,blockLen:s}=this;t=us(t);const i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const d=Bi(t);for(;s<=i-o;o+=s)this.process(d,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mr(this),wu(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let B=o;B<s;B++)e[B]=0;bu(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=Bi(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=d/4,S=this.get();if(w>S.length)throw new Error("_sha2: outputLen bigger than state");for(let B=0;B<w;B++)c.setUint32(4*B,S[B],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.length=s,t.pos=c,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(r),t}}const vr=BigInt(2**32-1),zi=BigInt(32);function ia(n,t=!1){return t?{h:Number(n&vr),l:Number(n>>zi&vr)}:{h:Number(n>>zi&vr)|0,l:Number(n&vr)|0}}function _u(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=ia(n[s],t);[e[s],r[s]]=[i,o]}return[e,r]}const Su=(n,t)=>BigInt(n>>>0)<<zi|BigInt(t>>>0),Eu=(n,t,e)=>n>>>e,Bu=(n,t,e)=>n<<32-e|t>>>e,Au=(n,t,e)=>n>>>e|t<<32-e,Iu=(n,t,e)=>n<<32-e|t>>>e,ku=(n,t,e)=>n<<64-e|t>>>e-32,Ru=(n,t,e)=>n>>>e-32|t<<64-e,Mu=(n,t)=>t,Lu=(n,t)=>n,Tu=(n,t,e)=>n<<e|t>>>32-e,Cu=(n,t,e)=>t<<e|n>>>32-e,Uu=(n,t,e)=>t<<e-32|n>>>64-e,Fu=(n,t,e)=>n<<e-32|t>>>64-e;function Nu(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Ou=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Pu=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,qu=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Du=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,zu=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Ku=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,gt={fromBig:ia,split:_u,toBig:Su,shrSH:Eu,shrSL:Bu,rotrSH:Au,rotrSL:Iu,rotrBH:ku,rotrBL:Ru,rotr32H:Mu,rotr32L:Lu,rotlSH:Tu,rotlSL:Cu,rotlBH:Uu,rotlBL:Fu,add:Nu,add3L:Ou,add3H:Pu,add4L:qu,add4H:Du,add5H:Ku,add5L:zu},[Hu,$u]=gt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),rn=new Uint32Array(80),sn=new Uint32Array(80);class Wu extends ra{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:d,Eh:w,El:S,Fh:B,Fl:F,Gh:L,Gl:M,Hh:I,Hl:k}=this;return[t,e,r,s,i,o,c,d,w,S,B,F,L,M,I,k]}set(t,e,r,s,i,o,c,d,w,S,B,F,L,M,I,k){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=d|0,this.Eh=w|0,this.El=S|0,this.Fh=B|0,this.Fl=F|0,this.Gh=L|0,this.Gl=M|0,this.Hh=I|0,this.Hl=k|0}process(t,e){for(let P=0;P<16;P++,e+=4)rn[P]=t.getUint32(e),sn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const Y=rn[P-15]|0,D=sn[P-15]|0,K=gt.rotrSH(Y,D,1)^gt.rotrSH(Y,D,8)^gt.shrSH(Y,D,7),J=gt.rotrSL(Y,D,1)^gt.rotrSL(Y,D,8)^gt.shrSL(Y,D,7),et=rn[P-2]|0,_t=sn[P-2]|0,yt=gt.rotrSH(et,_t,19)^gt.rotrBH(et,_t,61)^gt.shrSH(et,_t,6),X=gt.rotrSL(et,_t,19)^gt.rotrBL(et,_t,61)^gt.shrSL(et,_t,6),St=gt.add4L(J,X,sn[P-7],sn[P-16]),E=gt.add4H(St,K,yt,rn[P-7],rn[P-16]);rn[P]=E|0,sn[P]=St|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:d,Dh:w,Dl:S,Eh:B,El:F,Fh:L,Fl:M,Gh:I,Gl:k,Hh:O,Hl:z}=this;for(let P=0;P<80;P++){const Y=gt.rotrSH(B,F,14)^gt.rotrSH(B,F,18)^gt.rotrBH(B,F,41),D=gt.rotrSL(B,F,14)^gt.rotrSL(B,F,18)^gt.rotrBL(B,F,41),K=B&L^~B&I,J=F&M^~F&k,et=gt.add5L(z,D,J,$u[P],sn[P]),_t=gt.add5H(et,O,Y,K,Hu[P],rn[P]),yt=et|0,X=gt.rotrSH(r,s,28)^gt.rotrBH(r,s,34)^gt.rotrBH(r,s,39),St=gt.rotrSL(r,s,28)^gt.rotrBL(r,s,34)^gt.rotrBL(r,s,39),E=r&i^r&c^i&c,a=s&o^s&d^o&d;O=I|0,z=k|0,I=L|0,k=M|0,L=B|0,M=F|0,{h:B,l:F}=gt.add(w|0,S|0,_t|0,yt|0),w=c|0,S=d|0,c=i|0,d=o|0,i=r|0,o=s|0;const h=gt.add3L(yt,St,a);r=gt.add3H(h,_t,X,E),s=h|0}({h:r,l:s}=gt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=gt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:d}=gt.add(this.Ch|0,this.Cl|0,c|0,d|0),{h:w,l:S}=gt.add(this.Dh|0,this.Dl|0,w|0,S|0),{h:B,l:F}=gt.add(this.Eh|0,this.El|0,B|0,F|0),{h:L,l:M}=gt.add(this.Fh|0,this.Fl|0,L|0,M|0),{h:I,l:k}=gt.add(this.Gh|0,this.Gl|0,I|0,k|0),{h:O,l:z}=gt.add(this.Hh|0,this.Hl|0,O|0,z|0),this.set(r,s,i,o,c,d,w,S,B,F,L,M,I,k,O,z)}roundClean(){rn.fill(0),sn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sa=ea(()=>new Wu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oa=BigInt(0),Vr=BigInt(1),ju=BigInt(2);function An(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function ur(n){if(!An(n))throw new Error("Uint8Array expected")}const Vu=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function In(n){ur(n);let t="";for(let e=0;e<n.length;e++)t+=Vu[n[e]];return t}function aa(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function fs(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const Ze={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Xs(n){if(n>=Ze._0&&n<=Ze._9)return n-Ze._0;if(n>=Ze._A&&n<=Ze._F)return n-(Ze._A-10);if(n>=Ze._a&&n<=Ze._f)return n-(Ze._a-10)}function zn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Xs(n.charCodeAt(i)),c=Xs(n.charCodeAt(i+1));if(o===void 0||c===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=o*16+c}return r}function Sn(n){return fs(In(n))}function qn(n){return ur(n),fs(In(Uint8Array.from(n).reverse()))}function Kn(n,t){return zn(n.toString(16).padStart(t*2,"0"))}function sr(n,t){return Kn(n,t).reverse()}function Gu(n){return zn(aa(n))}function ue(n,t,e){let r;if(typeof t=="string")try{r=zn(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(An(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(`${n} expected ${e} bytes, got ${s}`);return r}function kn(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];ur(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}function Zu(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function Yu(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Ju(n){let t;for(t=0;n>oa;n>>=Vr,t+=1);return t}function Xu(n,t){return n>>BigInt(t)&Vr}function Qu(n,t,e){return n|(e?Vr:oa)<<BigInt(t)}const ls=n=>(ju<<BigInt(n-1))-Vr,Ai=n=>new Uint8Array(n),Qs=n=>Uint8Array.from(n);function ca(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Ai(n),s=Ai(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},c=(...B)=>e(s,r,...B),d=(B=Ai())=>{s=c(Qs([0]),B),r=c(),B.length!==0&&(s=c(Qs([1]),B),r=c())},w=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let B=0;const F=[];for(;B<t;){r=c();const L=r.slice();F.push(L),B+=r.length}return kn(...F)};return(B,F)=>{o(),d(B);let L;for(;!(L=F(w()));)d();return o(),L}}const tf={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||An(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Gn(n,t,e={}){const r=(s,i,o)=>{const c=tf[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const d=n[s];if(!(o&&d===void 0)&&!c(d,n))throw new Error(`Invalid param ${String(s)}=${d} (${typeof d}), expected ${i}`)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}const ef=Object.freeze(Object.defineProperty({__proto__:null,abytes:ur,bitGet:Xu,bitLen:Ju,bitMask:ls,bitSet:Qu,bytesToHex:In,bytesToNumberBE:Sn,bytesToNumberLE:qn,concatBytes:kn,createHmacDrbg:ca,ensureBytes:ue,equalBytes:Zu,hexToBytes:zn,hexToNumber:fs,isBytes:An,numberToBytesBE:Kn,numberToBytesLE:sr,numberToHexUnpadded:aa,numberToVarBytesBE:Gu,utf8ToBytes:Yu,validateObject:Gn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fe=BigInt(0),Kt=BigInt(1),yn=BigInt(2),nf=BigInt(3),Ki=BigInt(4),to=BigInt(5),eo=BigInt(8);BigInt(9);BigInt(16);function qt(n,t){const e=n%t;return e>=fe?e:t+e}function rf(n,t,e){if(e<=fe||t<fe)throw new Error("Expected power/modulo > 0");if(e===Kt)return fe;let r=Kt;for(;t>fe;)t&Kt&&(r=r*n%e),n=n*n%e,t>>=Kt;return r}function Ht(n,t,e){let r=n;for(;t-- >fe;)r*=r,r%=e;return r}function Hi(n,t){if(n===fe||t<=fe)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=qt(n,t),r=t,s=fe,i=Kt;for(;e!==fe;){const c=r/e,d=r%e,w=s-i*c;r=e,e=d,s=i,i=w}if(r!==Kt)throw new Error("invert: does not exist");return qt(s,t)}function sf(n){const t=(n-Kt)/yn;let e,r,s;for(e=n-Kt,r=0;e%yn===fe;e/=yn,r++);for(s=yn;s<n&&rf(s,t,n)!==n-Kt;s++);if(r===1){const o=(n+Kt)/Ki;return function(d,w){const S=d.pow(w,o);if(!d.eql(d.sqr(S),w))throw new Error("Cannot find square root");return S}}const i=(e+Kt)/yn;return function(c,d){if(c.pow(d,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let w=r,S=c.pow(c.mul(c.ONE,s),e),B=c.pow(d,i),F=c.pow(d,e);for(;!c.eql(F,c.ONE);){if(c.eql(F,c.ZERO))return c.ZERO;let L=1;for(let I=c.sqr(F);L<w&&!c.eql(I,c.ONE);L++)I=c.sqr(I);const M=c.pow(S,Kt<<BigInt(w-L-1));S=c.sqr(M),B=c.mul(B,M),F=c.mul(F,S),w=L}return B}}function of(n){if(n%Ki===nf){const t=(n+Kt)/Ki;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%eo===to){const t=(n-to)/eo;return function(r,s){const i=r.mul(s,yn),o=r.pow(i,t),c=r.mul(s,o),d=r.mul(r.mul(c,yn),o),w=r.mul(c,r.sub(d,r.ONE));if(!r.eql(r.sqr(w),s))throw new Error("Cannot find square root");return w}}return sf(n)}const af=(n,t)=>(qt(n,t)&Kt)===Kt,cf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uf(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=cf.reduce((r,s)=>(r[s]="function",r),t);return Gn(n,e)}function ff(n,t,e){if(e<fe)throw new Error("Expected power > 0");if(e===fe)return n.ONE;if(e===Kt)return t;let r=n.ONE,s=t;for(;e>fe;)e&Kt&&(r=n.mul(r,s)),s=n.sqr(s),e>>=Kt;return r}function lf(n,t){const e=new Array(t.length),r=t.reduce((i,o,c)=>n.is0(o)?i:(e[c]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return t.reduceRight((i,o,c)=>n.is0(o)?i:(e[c]=n.mul(i,e[c]),n.mul(i,o)),s),e}function ua(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function fa(n,t,e=!1,r={}){if(n<=fe)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:i}=ua(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=of(n),c=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:ls(s),ZERO:fe,ONE:Kt,create:d=>qt(d,n),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return fe<=d&&d<n},is0:d=>d===fe,isOdd:d=>(d&Kt)===Kt,neg:d=>qt(-d,n),eql:(d,w)=>d===w,sqr:d=>qt(d*d,n),add:(d,w)=>qt(d+w,n),sub:(d,w)=>qt(d-w,n),mul:(d,w)=>qt(d*w,n),pow:(d,w)=>ff(c,d,w),div:(d,w)=>qt(d*Hi(w,n),n),sqrN:d=>d*d,addN:(d,w)=>d+w,subN:(d,w)=>d-w,mulN:(d,w)=>d*w,inv:d=>Hi(d,n),sqrt:r.sqrt||(d=>o(c,d)),invertBatch:d=>lf(c,d),cmov:(d,w,S)=>S?w:d,toBytes:d=>e?sr(d,i):Kn(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return e?qn(d):Sn(d)}});return Object.freeze(c)}function hf(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const e=n.sqrt(t);return n.isOdd(e)?n.neg(e):e}function la(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function ha(n){const t=la(n);return t+Math.ceil(t/2)}function df(n,t,e=!1){const r=n.length,s=la(t),i=ha(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=e?Sn(n):qn(n),c=qt(o,t-Kt)+Kt;return e?sr(c,s):Kn(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pf=BigInt(0),Ii=BigInt(1);function da(n,t){const e=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=n.ZERO,c=s;for(;i>pf;)i&Ii&&(o=o.add(c)),c=c.double(),i>>=Ii;return o},precomputeWindow(s,i){const{windows:o,windowSize:c}=r(i),d=[];let w=s,S=w;for(let B=0;B<o;B++){S=w,d.push(S);for(let F=1;F<c;F++)S=S.add(w),d.push(S);w=S.double()}return d},wNAF(s,i,o){const{windows:c,windowSize:d}=r(s);let w=n.ZERO,S=n.BASE;const B=BigInt(2**s-1),F=2**s,L=BigInt(s);for(let M=0;M<c;M++){const I=M*d;let k=Number(o&B);o>>=L,k>d&&(k-=F,o+=Ii);const O=I,z=I+Math.abs(k)-1,P=M%2!==0,Y=k<0;k===0?S=S.add(e(P,i[O])):w=w.add(e(Y,i[z]))}return{p:w,f:S}},wNAFCached(s,i,o,c){const d=s._WINDOW_SIZE||1;let w=i.get(s);return w||(w=this.precomputeWindow(s,d),d!==1&&i.set(s,c(w))),this.wNAF(d,w,o)}}}function hs(n){return uf(n.Fp),Gn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ua(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pe=BigInt(0),Be=BigInt(1),xr=BigInt(2),gf=BigInt(8),mf={zip215:!0};function yf(n){const t=hs(n);return Gn(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function ds(n){const t=yf(n),{Fp:e,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:c,h:d}=t,w=xr<<BigInt(c*8)-Be,S=e.create,B=t.uvRatio||((y,v)=>{try{return{isValid:!0,value:e.sqrt(y*e.inv(v))}}catch{return{isValid:!1,value:Pe}}}),F=t.adjustScalarBytes||(y=>y),L=t.domain||((y,v,A)=>{if(v.length||A)throw new Error("Contexts/pre-hash are not supported");return y}),M=y=>typeof y=="bigint"&&Pe<y,I=(y,v)=>M(y)&&M(v)&&y<v,k=y=>y===Pe||I(y,w);function O(y,v){if(I(y,v))return y;throw new Error(`Expected valid scalar < ${v}, got ${typeof y} ${y}`)}function z(y){return y===Pe?y:O(y,r)}const P=new Map;function Y(y){if(!(y instanceof D))throw new Error("ExtendedPoint expected")}class D{constructor(v,A,m,f){if(this.ex=v,this.ey=A,this.ez=m,this.et=f,!k(v))throw new Error("x required");if(!k(A))throw new Error("y required");if(!k(m))throw new Error("z required");if(!k(f))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof D)throw new Error("extended point not allowed");const{x:A,y:m}=v||{};if(!k(A)||!k(m))throw new Error("invalid affine point");return new D(A,m,Be,S(A*m))}static normalizeZ(v){const A=e.invertBatch(v.map(m=>m.ez));return v.map((m,f)=>m.toAffine(A[f])).map(D.fromAffine)}_setWindowSize(v){this._WINDOW_SIZE=v,P.delete(this)}assertValidity(){const{a:v,d:A}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:m,ey:f,ez:_,et:H}=this,$=S(m*m),W=S(f*f),st=S(_*_),rt=S(st*st),ot=S($*v),Dt=S(st*S(ot+W)),dt=S(rt+S(A*S($*W)));if(Dt!==dt)throw new Error("bad point: equation left != right (1)");const lt=S(m*f),Mt=S(_*H);if(lt!==Mt)throw new Error("bad point: equation left != right (2)")}equals(v){Y(v);const{ex:A,ey:m,ez:f}=this,{ex:_,ey:H,ez:$}=v,W=S(A*$),st=S(_*f),rt=S(m*$),ot=S(H*f);return W===st&&rt===ot}is0(){return this.equals(D.ZERO)}negate(){return new D(S(-this.ex),this.ey,this.ez,S(-this.et))}double(){const{a:v}=t,{ex:A,ey:m,ez:f}=this,_=S(A*A),H=S(m*m),$=S(xr*S(f*f)),W=S(v*_),st=A+m,rt=S(S(st*st)-_-H),ot=W+H,Dt=ot-$,dt=W-H,lt=S(rt*Dt),Mt=S(ot*dt),bt=S(rt*dt),Et=S(Dt*ot);return new D(lt,Mt,Et,bt)}add(v){Y(v);const{a:A,d:m}=t,{ex:f,ey:_,ez:H,et:$}=this,{ex:W,ey:st,ez:rt,et:ot}=v;if(A===BigInt(-1)){const ge=S((_-f)*(st+W)),Rt=S((_+f)*(st-W)),Lt=S(Rt-ge);if(Lt===Pe)return this.double();const _e=S(H*xr*ot),Ct=S($*xr*rt),p=Ct+_e,u=Rt+ge,l=Ct-_e,b=S(p*Lt),R=S(u*l),T=S(p*l),N=S(Lt*u);return new D(b,R,N,T)}const Dt=S(f*W),dt=S(_*st),lt=S($*m*ot),Mt=S(H*rt),bt=S((f+_)*(W+st)-Dt-dt),Et=Mt-lt,Ke=Mt+lt,It=S(dt-A*Dt),Nt=S(bt*Et),Un=S(Ke*It),Tt=S(bt*It),kt=S(Et*Ke);return new D(Nt,Un,kt,Tt)}subtract(v){return this.add(v.negate())}wNAF(v){return et.wNAFCached(this,P,v,D.normalizeZ)}multiply(v){const{p:A,f:m}=this.wNAF(O(v,r));return D.normalizeZ([A,m])[0]}multiplyUnsafe(v){let A=z(v);return A===Pe?J:this.equals(J)||A===Be?this:this.equals(K)?this.wNAF(A).p:et.unsafeLadder(this,A)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return et.unsafeLadder(this,r).is0()}toAffine(v){const{ex:A,ey:m,ez:f}=this,_=this.is0();v==null&&(v=_?gf:e.inv(f));const H=S(A*v),$=S(m*v),W=S(f*v);if(_)return{x:Pe,y:Be};if(W!==Be)throw new Error("invZ was invalid");return{x:H,y:$}}clearCofactor(){const{h:v}=t;return v===Be?this:this.multiplyUnsafe(v)}static fromHex(v,A=!1){const{d:m,a:f}=t,_=e.BYTES;v=ue("pointHex",v,_);const H=v.slice(),$=v[_-1];H[_-1]=$&-129;const W=qn(H);W===Pe||(A?O(W,w):O(W,e.ORDER));const st=S(W*W),rt=S(st-Be),ot=S(m*st-f);let{isValid:Dt,value:dt}=B(rt,ot);if(!Dt)throw new Error("Point.fromHex: invalid y coordinate");const lt=(dt&Be)===Be,Mt=($&128)!==0;if(!A&&dt===Pe&&Mt)throw new Error("Point.fromHex: x=0 and x_0=1");return Mt!==lt&&(dt=S(-dt)),D.fromAffine({x:dt,y:W})}static fromPrivateKey(v){return X(v).point}toRawBytes(){const{x:v,y:A}=this.toAffine(),m=sr(A,e.BYTES);return m[m.length-1]|=v&Be?128:0,m}toHex(){return In(this.toRawBytes())}}D.BASE=new D(t.Gx,t.Gy,Be,S(t.Gx*t.Gy)),D.ZERO=new D(Pe,Be,Be,Pe);const{BASE:K,ZERO:J}=D,et=da(D,c*8);function _t(y){return qt(y,r)}function yt(y){return _t(qn(y))}function X(y){const v=c;y=ue("private key",y,v);const A=ue("hashed private key",i(y),2*v),m=F(A.slice(0,v)),f=A.slice(v,2*v),_=yt(m),H=K.multiply(_),$=H.toRawBytes();return{head:m,prefix:f,scalar:_,point:H,pointBytes:$}}function St(y){return X(y).pointBytes}function E(y=new Uint8Array,...v){const A=kn(...v);return yt(i(L(A,ue("context",y),!!s)))}function a(y,v,A={}){y=ue("message",y),s&&(y=s(y));const{prefix:m,scalar:f,pointBytes:_}=X(v),H=E(A.context,m,y),$=K.multiply(H).toRawBytes(),W=E(A.context,$,_,y),st=_t(H+W*f);z(st);const rt=kn($,sr(st,e.BYTES));return ue("result",rt,c*2)}const h=mf;function g(y,v,A,m=h){const{context:f,zip215:_}=m,H=e.BYTES;y=ue("signature",y,2*H),v=ue("message",v),s&&(v=s(v));const $=qn(y.slice(H,2*H));let W,st,rt;try{W=D.fromHex(A,_),st=D.fromHex(y.slice(0,H),_),rt=K.multiplyUnsafe($)}catch{return!1}if(!_&&W.isSmallOrder())return!1;const ot=E(f,st.toRawBytes(),W.toRawBytes(),v);return st.add(W.multiplyUnsafe(ot)).subtract(rt).clearCofactor().equals(D.ZERO)}return K._setWindowSize(8),{CURVE:t,getPublicKey:St,sign:a,verify:g,ExtendedPoint:D,utils:{getExtendedPublicKey:X,randomPrivateKey:()=>o(e.BYTES),precompute(y=8,v=D.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ps=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),no=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const wf=BigInt(1),$i=BigInt(2),bf=BigInt(5),ro=BigInt(10),vf=BigInt(20),xf=BigInt(40),io=BigInt(80);function _f(n){const t=ps,r=n*n%t*n%t,s=Ht(r,$i,t)*r%t,i=Ht(s,wf,t)*n%t,o=Ht(i,bf,t)*i%t,c=Ht(o,ro,t)*o%t,d=Ht(c,vf,t)*c%t,w=Ht(d,xf,t)*d%t,S=Ht(w,io,t)*w%t,B=Ht(S,io,t)*w%t,F=Ht(B,ro,t)*o%t;return{pow_p_5_8:Ht(F,$i,t)*n%t,b2:r}}function Sf(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Ef(n,t){const e=ps,r=qt(t*t*t,e),s=qt(r*r*t,e),i=_f(n*s).pow_p_5_8;let o=qt(n*r*i,e);const c=qt(t*o*o,e),d=o,w=qt(o*no,e),S=c===n,B=c===qt(-n,e),F=c===qt(-n*no,e);return S&&(o=d),(B||F)&&(o=w),af(o,e)&&(o=qt(-o,e)),{isValid:S||B,value:o}}const Qe=fa(ps,void 0,!0),gs={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Qe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sa,randomBytes:na,adjustScalarBytes:Sf,uvRatio:Ef},fr=ds(gs);function pa(n,t,e){if(t.length>255)throw new Error("Context is too big");return Qo(Xo("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,n)}({...gs});({...gs});const Bf=(Qe.ORDER+BigInt(3))/BigInt(8);Qe.pow($i,Bf);Qe.sqrt(Qe.neg(Qe.ONE));(Qe.ORDER-BigInt(5))/BigInt(8);BigInt(486662);hf(Qe,Qe.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ms={exports:{}};const Af={},If=Object.freeze(Object.defineProperty({__proto__:null,default:Af},Symbol.toStringTag,{value:"Module"})),kf=ts(If);ms.exports;(function(n){(function(t,e){function r(E,a){if(!E)throw new Error(a||"Assertion failed")}function s(E,a){E.super_=a;var h=function(){};h.prototype=a.prototype,E.prototype=new h,E.prototype.constructor=E}function i(E,a,h){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(E||0,a||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=kf.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,h){return a.cmp(h)>0?a:h},i.min=function(a,h){return a.cmp(h)<0?a:h},i.prototype._init=function(a,h,g){if(typeof a=="number")return this._initNumber(a,h,g);if(typeof a=="object")return this._initArray(a,h,g);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var x=0;a[0]==="-"&&(x++,this.negative=1),x<a.length&&(h===16?this._parseHex(a,x,g):(this._parseBase(a,h,x),g==="le"&&this._initArray(this.toArray(),h,g)))},i.prototype._initNumber=function(a,h,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),h,g)},i.prototype._initArray=function(a,h,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var y,v,A=0;if(g==="be")for(x=a.length-1,y=0;x>=0;x-=3)v=a[x]|a[x-1]<<8|a[x-2]<<16,this.words[y]|=v<<A&67108863,this.words[y+1]=v>>>26-A&67108863,A+=24,A>=26&&(A-=26,y++);else if(g==="le")for(x=0,y=0;x<a.length;x+=3)v=a[x]|a[x+1]<<8|a[x+2]<<16,this.words[y]|=v<<A&67108863,this.words[y+1]=v>>>26-A&67108863,A+=24,A>=26&&(A-=26,y++);return this._strip()};function c(E,a){var h=E.charCodeAt(a);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+E)}function d(E,a,h){var g=c(E,h);return h-1>=a&&(g|=c(E,h-1)<<4),g}i.prototype._parseHex=function(a,h,g){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var y=0,v=0,A;if(g==="be")for(x=a.length-1;x>=h;x-=2)A=d(a,h,x)<<y,this.words[v]|=A&67108863,y>=18?(y-=18,v+=1,this.words[v]|=A>>>26):y+=8;else{var m=a.length-h;for(x=m%2===0?h+1:h;x<a.length;x+=2)A=d(a,h,x)<<y,this.words[v]|=A&67108863,y>=18?(y-=18,v+=1,this.words[v]|=A>>>26):y+=8}this._strip()};function w(E,a,h,g){for(var x=0,y=0,v=Math.min(E.length,h),A=a;A<v;A++){var m=E.charCodeAt(A)-48;x*=g,m>=49?y=m-49+10:m>=17?y=m-17+10:y=m,r(m>=0&&y<g,"Invalid character"),x+=y}return x}i.prototype._parseBase=function(a,h,g){this.words=[0],this.length=1;for(var x=0,y=1;y<=67108863;y*=h)x++;x--,y=y/h|0;for(var v=a.length-g,A=v%x,m=Math.min(v,v-A)+g,f=0,_=g;_<m;_+=x)f=w(a,_,_+x,h),this.imuln(y),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(A!==0){var H=1;for(f=w(a,_,a.length,h),_=0;_<A;_++)H*=h;this.imuln(H),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red};function S(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(i.prototype._move=function(a){S(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=B}catch{i.prototype.inspect=B}else i.prototype.inspect=B;function B(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,h){a=a||10,h=h|0||1;var g;if(a===16||a==="hex"){g="";for(var x=0,y=0,v=0;v<this.length;v++){var A=this.words[v],m=((A<<x|y)&16777215).toString(16);y=A>>>24-x&16777215,x+=2,x>=26&&(x-=26,v--),y!==0||v!==this.length-1?g=F[6-m.length]+m+g:g=m+g}for(y!==0&&(g=y.toString(16)+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var f=L[a],_=M[a];g="";var H=this.clone();for(H.negative=0;!H.isZero();){var $=H.modrn(_).toString(a);H=H.idivn(_),H.isZero()?g=$+g:g=F[f-$.length]+$+g}for(this.isZero()&&(g="0"+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,h){return this.toArrayLike(o,a,h)}),i.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)};var I=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)};i.prototype.toArrayLike=function(a,h,g){this._strip();var x=this.byteLength(),y=g||Math.max(1,x);r(x<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var v=I(a,y),A=h==="le"?"LE":"BE";return this["_toArrayLike"+A](v,x),v},i.prototype._toArrayLikeLE=function(a,h){for(var g=0,x=0,y=0,v=0;y<this.length;y++){var A=this.words[y]<<v|x;a[g++]=A&255,g<a.length&&(a[g++]=A>>8&255),g<a.length&&(a[g++]=A>>16&255),v===6?(g<a.length&&(a[g++]=A>>24&255),x=0,v=0):(x=A>>>24,v+=2)}if(g<a.length)for(a[g++]=x;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,h){for(var g=a.length-1,x=0,y=0,v=0;y<this.length;y++){var A=this.words[y]<<v|x;a[g--]=A&255,g>=0&&(a[g--]=A>>8&255),g>=0&&(a[g--]=A>>16&255),v===6?(g>=0&&(a[g--]=A>>24&255),x=0,v=0):(x=A>>>24,v+=2)}if(g>=0)for(a[g--]=x;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var h=a,g=0;return h>=4096&&(g+=13,h>>>=13),h>=64&&(g+=7,h>>>=7),h>=8&&(g+=4,h>>>=4),h>=2&&(g+=2,h>>>=2),g+h},i.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,g=0;return h&8191||(g+=13,h>>>=13),h&127||(g+=7,h>>>=7),h&15||(g+=4,h>>>=4),h&3||(g+=2,h>>>=2),h&1||g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function k(E){for(var a=new Array(E.bitLength()),h=0;h<a.length;h++){var g=h/26|0,x=h%26;a[h]=E.words[g]>>>x&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var g=this._zeroBits(this.words[h]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=h.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var h,g;this.length>a.length?(h=this,g=a):(h=a,g=this);for(var x=0;x<g.length;x++)this.words[x]=h.words[x]^g.words[x];if(this!==h)for(;x<h.length;x++)this.words[x]=h.words[x];return this.length=h.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,g=a%26;this._expand(h),g>0&&h--;for(var x=0;x<h;x++)this.words[x]=~this.words[x]&67108863;return g>0&&(this.words[x]=~this.words[x]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,h){r(typeof a=="number"&&a>=0);var g=a/26|0,x=a%26;return this._expand(g+1),h?this.words[g]=this.words[g]|1<<x:this.words[g]=this.words[g]&~(1<<x),this._strip()},i.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var g,x;this.length>a.length?(g=this,x=a):(g=a,x=this);for(var y=0,v=0;v<x.length;v++)h=(g.words[v]|0)+(x.words[v]|0)+y,this.words[v]=h&67108863,y=h>>>26;for(;y!==0&&v<g.length;v++)h=(g.words[v]|0)+y,this.words[v]=h&67108863,y=h>>>26;if(this.length=g.length,y!==0)this.words[this.length]=y,this.length++;else if(g!==this)for(;v<g.length;v++)this.words[v]=g.words[v];return this},i.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,y;g>0?(x=this,y=a):(x=a,y=this);for(var v=0,A=0;A<y.length;A++)h=(x.words[A]|0)-(y.words[A]|0)+v,v=h>>26,this.words[A]=h&67108863;for(;v!==0&&A<x.length;A++)h=(x.words[A]|0)+v,v=h>>26,this.words[A]=h&67108863;if(v===0&&A<x.length&&x!==this)for(;A<x.length;A++)this.words[A]=x.words[A];return this.length=Math.max(this.length,A),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function O(E,a,h){h.negative=a.negative^E.negative;var g=E.length+a.length|0;h.length=g,g=g-1|0;var x=E.words[0]|0,y=a.words[0]|0,v=x*y,A=v&67108863,m=v/67108864|0;h.words[0]=A;for(var f=1;f<g;f++){for(var _=m>>>26,H=m&67108863,$=Math.min(f,a.length-1),W=Math.max(0,f-E.length+1);W<=$;W++){var st=f-W|0;x=E.words[st]|0,y=a.words[W]|0,v=x*y+H,_+=v/67108864|0,H=v&67108863}h.words[f]=H|0,m=_|0}return m!==0?h.words[f]=m|0:h.length--,h._strip()}var z=function(a,h,g){var x=a.words,y=h.words,v=g.words,A=0,m,f,_,H=x[0]|0,$=H&8191,W=H>>>13,st=x[1]|0,rt=st&8191,ot=st>>>13,Dt=x[2]|0,dt=Dt&8191,lt=Dt>>>13,Mt=x[3]|0,bt=Mt&8191,Et=Mt>>>13,Ke=x[4]|0,It=Ke&8191,Nt=Ke>>>13,Un=x[5]|0,Tt=Un&8191,kt=Un>>>13,ge=x[6]|0,Rt=ge&8191,Lt=ge>>>13,_e=x[7]|0,Ct=_e&8191,p=_e>>>13,u=x[8]|0,l=u&8191,b=u>>>13,R=x[9]|0,T=R&8191,N=R>>>13,pt=y[0]|0,ht=pt&8191,ft=pt>>>13,Ut=y[1]|0,ut=Ut&8191,Wt=Ut>>>13,Fs=y[2]|0,jt=Fs&8191,Vt=Fs>>>13,Ns=y[3]|0,Gt=Ns&8191,Zt=Ns>>>13,Os=y[4]|0,Yt=Os&8191,Jt=Os>>>13,Ps=y[5]|0,Xt=Ps&8191,Qt=Ps>>>13,qs=y[6]|0,te=qs&8191,ee=qs>>>13,Ds=y[7]|0,ne=Ds&8191,re=Ds>>>13,zs=y[8]|0,ie=zs&8191,se=zs>>>13,Ks=y[9]|0,oe=Ks&8191,ae=Ks>>>13;g.negative=a.negative^h.negative,g.length=19,m=Math.imul($,ht),f=Math.imul($,ft),f=f+Math.imul(W,ht)|0,_=Math.imul(W,ft);var ri=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(ri>>>26)|0,ri&=67108863,m=Math.imul(rt,ht),f=Math.imul(rt,ft),f=f+Math.imul(ot,ht)|0,_=Math.imul(ot,ft),m=m+Math.imul($,ut)|0,f=f+Math.imul($,Wt)|0,f=f+Math.imul(W,ut)|0,_=_+Math.imul(W,Wt)|0;var ii=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(ii>>>26)|0,ii&=67108863,m=Math.imul(dt,ht),f=Math.imul(dt,ft),f=f+Math.imul(lt,ht)|0,_=Math.imul(lt,ft),m=m+Math.imul(rt,ut)|0,f=f+Math.imul(rt,Wt)|0,f=f+Math.imul(ot,ut)|0,_=_+Math.imul(ot,Wt)|0,m=m+Math.imul($,jt)|0,f=f+Math.imul($,Vt)|0,f=f+Math.imul(W,jt)|0,_=_+Math.imul(W,Vt)|0;var si=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(si>>>26)|0,si&=67108863,m=Math.imul(bt,ht),f=Math.imul(bt,ft),f=f+Math.imul(Et,ht)|0,_=Math.imul(Et,ft),m=m+Math.imul(dt,ut)|0,f=f+Math.imul(dt,Wt)|0,f=f+Math.imul(lt,ut)|0,_=_+Math.imul(lt,Wt)|0,m=m+Math.imul(rt,jt)|0,f=f+Math.imul(rt,Vt)|0,f=f+Math.imul(ot,jt)|0,_=_+Math.imul(ot,Vt)|0,m=m+Math.imul($,Gt)|0,f=f+Math.imul($,Zt)|0,f=f+Math.imul(W,Gt)|0,_=_+Math.imul(W,Zt)|0;var oi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(oi>>>26)|0,oi&=67108863,m=Math.imul(It,ht),f=Math.imul(It,ft),f=f+Math.imul(Nt,ht)|0,_=Math.imul(Nt,ft),m=m+Math.imul(bt,ut)|0,f=f+Math.imul(bt,Wt)|0,f=f+Math.imul(Et,ut)|0,_=_+Math.imul(Et,Wt)|0,m=m+Math.imul(dt,jt)|0,f=f+Math.imul(dt,Vt)|0,f=f+Math.imul(lt,jt)|0,_=_+Math.imul(lt,Vt)|0,m=m+Math.imul(rt,Gt)|0,f=f+Math.imul(rt,Zt)|0,f=f+Math.imul(ot,Gt)|0,_=_+Math.imul(ot,Zt)|0,m=m+Math.imul($,Yt)|0,f=f+Math.imul($,Jt)|0,f=f+Math.imul(W,Yt)|0,_=_+Math.imul(W,Jt)|0;var ai=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(ai>>>26)|0,ai&=67108863,m=Math.imul(Tt,ht),f=Math.imul(Tt,ft),f=f+Math.imul(kt,ht)|0,_=Math.imul(kt,ft),m=m+Math.imul(It,ut)|0,f=f+Math.imul(It,Wt)|0,f=f+Math.imul(Nt,ut)|0,_=_+Math.imul(Nt,Wt)|0,m=m+Math.imul(bt,jt)|0,f=f+Math.imul(bt,Vt)|0,f=f+Math.imul(Et,jt)|0,_=_+Math.imul(Et,Vt)|0,m=m+Math.imul(dt,Gt)|0,f=f+Math.imul(dt,Zt)|0,f=f+Math.imul(lt,Gt)|0,_=_+Math.imul(lt,Zt)|0,m=m+Math.imul(rt,Yt)|0,f=f+Math.imul(rt,Jt)|0,f=f+Math.imul(ot,Yt)|0,_=_+Math.imul(ot,Jt)|0,m=m+Math.imul($,Xt)|0,f=f+Math.imul($,Qt)|0,f=f+Math.imul(W,Xt)|0,_=_+Math.imul(W,Qt)|0;var ci=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(ci>>>26)|0,ci&=67108863,m=Math.imul(Rt,ht),f=Math.imul(Rt,ft),f=f+Math.imul(Lt,ht)|0,_=Math.imul(Lt,ft),m=m+Math.imul(Tt,ut)|0,f=f+Math.imul(Tt,Wt)|0,f=f+Math.imul(kt,ut)|0,_=_+Math.imul(kt,Wt)|0,m=m+Math.imul(It,jt)|0,f=f+Math.imul(It,Vt)|0,f=f+Math.imul(Nt,jt)|0,_=_+Math.imul(Nt,Vt)|0,m=m+Math.imul(bt,Gt)|0,f=f+Math.imul(bt,Zt)|0,f=f+Math.imul(Et,Gt)|0,_=_+Math.imul(Et,Zt)|0,m=m+Math.imul(dt,Yt)|0,f=f+Math.imul(dt,Jt)|0,f=f+Math.imul(lt,Yt)|0,_=_+Math.imul(lt,Jt)|0,m=m+Math.imul(rt,Xt)|0,f=f+Math.imul(rt,Qt)|0,f=f+Math.imul(ot,Xt)|0,_=_+Math.imul(ot,Qt)|0,m=m+Math.imul($,te)|0,f=f+Math.imul($,ee)|0,f=f+Math.imul(W,te)|0,_=_+Math.imul(W,ee)|0;var ui=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(ui>>>26)|0,ui&=67108863,m=Math.imul(Ct,ht),f=Math.imul(Ct,ft),f=f+Math.imul(p,ht)|0,_=Math.imul(p,ft),m=m+Math.imul(Rt,ut)|0,f=f+Math.imul(Rt,Wt)|0,f=f+Math.imul(Lt,ut)|0,_=_+Math.imul(Lt,Wt)|0,m=m+Math.imul(Tt,jt)|0,f=f+Math.imul(Tt,Vt)|0,f=f+Math.imul(kt,jt)|0,_=_+Math.imul(kt,Vt)|0,m=m+Math.imul(It,Gt)|0,f=f+Math.imul(It,Zt)|0,f=f+Math.imul(Nt,Gt)|0,_=_+Math.imul(Nt,Zt)|0,m=m+Math.imul(bt,Yt)|0,f=f+Math.imul(bt,Jt)|0,f=f+Math.imul(Et,Yt)|0,_=_+Math.imul(Et,Jt)|0,m=m+Math.imul(dt,Xt)|0,f=f+Math.imul(dt,Qt)|0,f=f+Math.imul(lt,Xt)|0,_=_+Math.imul(lt,Qt)|0,m=m+Math.imul(rt,te)|0,f=f+Math.imul(rt,ee)|0,f=f+Math.imul(ot,te)|0,_=_+Math.imul(ot,ee)|0,m=m+Math.imul($,ne)|0,f=f+Math.imul($,re)|0,f=f+Math.imul(W,ne)|0,_=_+Math.imul(W,re)|0;var fi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(fi>>>26)|0,fi&=67108863,m=Math.imul(l,ht),f=Math.imul(l,ft),f=f+Math.imul(b,ht)|0,_=Math.imul(b,ft),m=m+Math.imul(Ct,ut)|0,f=f+Math.imul(Ct,Wt)|0,f=f+Math.imul(p,ut)|0,_=_+Math.imul(p,Wt)|0,m=m+Math.imul(Rt,jt)|0,f=f+Math.imul(Rt,Vt)|0,f=f+Math.imul(Lt,jt)|0,_=_+Math.imul(Lt,Vt)|0,m=m+Math.imul(Tt,Gt)|0,f=f+Math.imul(Tt,Zt)|0,f=f+Math.imul(kt,Gt)|0,_=_+Math.imul(kt,Zt)|0,m=m+Math.imul(It,Yt)|0,f=f+Math.imul(It,Jt)|0,f=f+Math.imul(Nt,Yt)|0,_=_+Math.imul(Nt,Jt)|0,m=m+Math.imul(bt,Xt)|0,f=f+Math.imul(bt,Qt)|0,f=f+Math.imul(Et,Xt)|0,_=_+Math.imul(Et,Qt)|0,m=m+Math.imul(dt,te)|0,f=f+Math.imul(dt,ee)|0,f=f+Math.imul(lt,te)|0,_=_+Math.imul(lt,ee)|0,m=m+Math.imul(rt,ne)|0,f=f+Math.imul(rt,re)|0,f=f+Math.imul(ot,ne)|0,_=_+Math.imul(ot,re)|0,m=m+Math.imul($,ie)|0,f=f+Math.imul($,se)|0,f=f+Math.imul(W,ie)|0,_=_+Math.imul(W,se)|0;var li=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(li>>>26)|0,li&=67108863,m=Math.imul(T,ht),f=Math.imul(T,ft),f=f+Math.imul(N,ht)|0,_=Math.imul(N,ft),m=m+Math.imul(l,ut)|0,f=f+Math.imul(l,Wt)|0,f=f+Math.imul(b,ut)|0,_=_+Math.imul(b,Wt)|0,m=m+Math.imul(Ct,jt)|0,f=f+Math.imul(Ct,Vt)|0,f=f+Math.imul(p,jt)|0,_=_+Math.imul(p,Vt)|0,m=m+Math.imul(Rt,Gt)|0,f=f+Math.imul(Rt,Zt)|0,f=f+Math.imul(Lt,Gt)|0,_=_+Math.imul(Lt,Zt)|0,m=m+Math.imul(Tt,Yt)|0,f=f+Math.imul(Tt,Jt)|0,f=f+Math.imul(kt,Yt)|0,_=_+Math.imul(kt,Jt)|0,m=m+Math.imul(It,Xt)|0,f=f+Math.imul(It,Qt)|0,f=f+Math.imul(Nt,Xt)|0,_=_+Math.imul(Nt,Qt)|0,m=m+Math.imul(bt,te)|0,f=f+Math.imul(bt,ee)|0,f=f+Math.imul(Et,te)|0,_=_+Math.imul(Et,ee)|0,m=m+Math.imul(dt,ne)|0,f=f+Math.imul(dt,re)|0,f=f+Math.imul(lt,ne)|0,_=_+Math.imul(lt,re)|0,m=m+Math.imul(rt,ie)|0,f=f+Math.imul(rt,se)|0,f=f+Math.imul(ot,ie)|0,_=_+Math.imul(ot,se)|0,m=m+Math.imul($,oe)|0,f=f+Math.imul($,ae)|0,f=f+Math.imul(W,oe)|0,_=_+Math.imul(W,ae)|0;var hi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(hi>>>26)|0,hi&=67108863,m=Math.imul(T,ut),f=Math.imul(T,Wt),f=f+Math.imul(N,ut)|0,_=Math.imul(N,Wt),m=m+Math.imul(l,jt)|0,f=f+Math.imul(l,Vt)|0,f=f+Math.imul(b,jt)|0,_=_+Math.imul(b,Vt)|0,m=m+Math.imul(Ct,Gt)|0,f=f+Math.imul(Ct,Zt)|0,f=f+Math.imul(p,Gt)|0,_=_+Math.imul(p,Zt)|0,m=m+Math.imul(Rt,Yt)|0,f=f+Math.imul(Rt,Jt)|0,f=f+Math.imul(Lt,Yt)|0,_=_+Math.imul(Lt,Jt)|0,m=m+Math.imul(Tt,Xt)|0,f=f+Math.imul(Tt,Qt)|0,f=f+Math.imul(kt,Xt)|0,_=_+Math.imul(kt,Qt)|0,m=m+Math.imul(It,te)|0,f=f+Math.imul(It,ee)|0,f=f+Math.imul(Nt,te)|0,_=_+Math.imul(Nt,ee)|0,m=m+Math.imul(bt,ne)|0,f=f+Math.imul(bt,re)|0,f=f+Math.imul(Et,ne)|0,_=_+Math.imul(Et,re)|0,m=m+Math.imul(dt,ie)|0,f=f+Math.imul(dt,se)|0,f=f+Math.imul(lt,ie)|0,_=_+Math.imul(lt,se)|0,m=m+Math.imul(rt,oe)|0,f=f+Math.imul(rt,ae)|0,f=f+Math.imul(ot,oe)|0,_=_+Math.imul(ot,ae)|0;var di=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(di>>>26)|0,di&=67108863,m=Math.imul(T,jt),f=Math.imul(T,Vt),f=f+Math.imul(N,jt)|0,_=Math.imul(N,Vt),m=m+Math.imul(l,Gt)|0,f=f+Math.imul(l,Zt)|0,f=f+Math.imul(b,Gt)|0,_=_+Math.imul(b,Zt)|0,m=m+Math.imul(Ct,Yt)|0,f=f+Math.imul(Ct,Jt)|0,f=f+Math.imul(p,Yt)|0,_=_+Math.imul(p,Jt)|0,m=m+Math.imul(Rt,Xt)|0,f=f+Math.imul(Rt,Qt)|0,f=f+Math.imul(Lt,Xt)|0,_=_+Math.imul(Lt,Qt)|0,m=m+Math.imul(Tt,te)|0,f=f+Math.imul(Tt,ee)|0,f=f+Math.imul(kt,te)|0,_=_+Math.imul(kt,ee)|0,m=m+Math.imul(It,ne)|0,f=f+Math.imul(It,re)|0,f=f+Math.imul(Nt,ne)|0,_=_+Math.imul(Nt,re)|0,m=m+Math.imul(bt,ie)|0,f=f+Math.imul(bt,se)|0,f=f+Math.imul(Et,ie)|0,_=_+Math.imul(Et,se)|0,m=m+Math.imul(dt,oe)|0,f=f+Math.imul(dt,ae)|0,f=f+Math.imul(lt,oe)|0,_=_+Math.imul(lt,ae)|0;var pi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(pi>>>26)|0,pi&=67108863,m=Math.imul(T,Gt),f=Math.imul(T,Zt),f=f+Math.imul(N,Gt)|0,_=Math.imul(N,Zt),m=m+Math.imul(l,Yt)|0,f=f+Math.imul(l,Jt)|0,f=f+Math.imul(b,Yt)|0,_=_+Math.imul(b,Jt)|0,m=m+Math.imul(Ct,Xt)|0,f=f+Math.imul(Ct,Qt)|0,f=f+Math.imul(p,Xt)|0,_=_+Math.imul(p,Qt)|0,m=m+Math.imul(Rt,te)|0,f=f+Math.imul(Rt,ee)|0,f=f+Math.imul(Lt,te)|0,_=_+Math.imul(Lt,ee)|0,m=m+Math.imul(Tt,ne)|0,f=f+Math.imul(Tt,re)|0,f=f+Math.imul(kt,ne)|0,_=_+Math.imul(kt,re)|0,m=m+Math.imul(It,ie)|0,f=f+Math.imul(It,se)|0,f=f+Math.imul(Nt,ie)|0,_=_+Math.imul(Nt,se)|0,m=m+Math.imul(bt,oe)|0,f=f+Math.imul(bt,ae)|0,f=f+Math.imul(Et,oe)|0,_=_+Math.imul(Et,ae)|0;var gi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(gi>>>26)|0,gi&=67108863,m=Math.imul(T,Yt),f=Math.imul(T,Jt),f=f+Math.imul(N,Yt)|0,_=Math.imul(N,Jt),m=m+Math.imul(l,Xt)|0,f=f+Math.imul(l,Qt)|0,f=f+Math.imul(b,Xt)|0,_=_+Math.imul(b,Qt)|0,m=m+Math.imul(Ct,te)|0,f=f+Math.imul(Ct,ee)|0,f=f+Math.imul(p,te)|0,_=_+Math.imul(p,ee)|0,m=m+Math.imul(Rt,ne)|0,f=f+Math.imul(Rt,re)|0,f=f+Math.imul(Lt,ne)|0,_=_+Math.imul(Lt,re)|0,m=m+Math.imul(Tt,ie)|0,f=f+Math.imul(Tt,se)|0,f=f+Math.imul(kt,ie)|0,_=_+Math.imul(kt,se)|0,m=m+Math.imul(It,oe)|0,f=f+Math.imul(It,ae)|0,f=f+Math.imul(Nt,oe)|0,_=_+Math.imul(Nt,ae)|0;var mi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(mi>>>26)|0,mi&=67108863,m=Math.imul(T,Xt),f=Math.imul(T,Qt),f=f+Math.imul(N,Xt)|0,_=Math.imul(N,Qt),m=m+Math.imul(l,te)|0,f=f+Math.imul(l,ee)|0,f=f+Math.imul(b,te)|0,_=_+Math.imul(b,ee)|0,m=m+Math.imul(Ct,ne)|0,f=f+Math.imul(Ct,re)|0,f=f+Math.imul(p,ne)|0,_=_+Math.imul(p,re)|0,m=m+Math.imul(Rt,ie)|0,f=f+Math.imul(Rt,se)|0,f=f+Math.imul(Lt,ie)|0,_=_+Math.imul(Lt,se)|0,m=m+Math.imul(Tt,oe)|0,f=f+Math.imul(Tt,ae)|0,f=f+Math.imul(kt,oe)|0,_=_+Math.imul(kt,ae)|0;var yi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(yi>>>26)|0,yi&=67108863,m=Math.imul(T,te),f=Math.imul(T,ee),f=f+Math.imul(N,te)|0,_=Math.imul(N,ee),m=m+Math.imul(l,ne)|0,f=f+Math.imul(l,re)|0,f=f+Math.imul(b,ne)|0,_=_+Math.imul(b,re)|0,m=m+Math.imul(Ct,ie)|0,f=f+Math.imul(Ct,se)|0,f=f+Math.imul(p,ie)|0,_=_+Math.imul(p,se)|0,m=m+Math.imul(Rt,oe)|0,f=f+Math.imul(Rt,ae)|0,f=f+Math.imul(Lt,oe)|0,_=_+Math.imul(Lt,ae)|0;var wi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(wi>>>26)|0,wi&=67108863,m=Math.imul(T,ne),f=Math.imul(T,re),f=f+Math.imul(N,ne)|0,_=Math.imul(N,re),m=m+Math.imul(l,ie)|0,f=f+Math.imul(l,se)|0,f=f+Math.imul(b,ie)|0,_=_+Math.imul(b,se)|0,m=m+Math.imul(Ct,oe)|0,f=f+Math.imul(Ct,ae)|0,f=f+Math.imul(p,oe)|0,_=_+Math.imul(p,ae)|0;var bi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(bi>>>26)|0,bi&=67108863,m=Math.imul(T,ie),f=Math.imul(T,se),f=f+Math.imul(N,ie)|0,_=Math.imul(N,se),m=m+Math.imul(l,oe)|0,f=f+Math.imul(l,ae)|0,f=f+Math.imul(b,oe)|0,_=_+Math.imul(b,ae)|0;var vi=(A+m|0)+((f&8191)<<13)|0;A=(_+(f>>>13)|0)+(vi>>>26)|0,vi&=67108863,m=Math.imul(T,oe),f=Math.imul(T,ae),f=f+Math.imul(N,oe)|0,_=Math.imul(N,ae);var xi=(A+m|0)+((f&8191)<<13)|0;return A=(_+(f>>>13)|0)+(xi>>>26)|0,xi&=67108863,v[0]=ri,v[1]=ii,v[2]=si,v[3]=oi,v[4]=ai,v[5]=ci,v[6]=ui,v[7]=fi,v[8]=li,v[9]=hi,v[10]=di,v[11]=pi,v[12]=gi,v[13]=mi,v[14]=yi,v[15]=wi,v[16]=bi,v[17]=vi,v[18]=xi,A!==0&&(v[19]=A,g.length++),g};Math.imul||(z=O);function P(E,a,h){h.negative=a.negative^E.negative,h.length=E.length+a.length;for(var g=0,x=0,y=0;y<h.length-1;y++){var v=x;x=0;for(var A=g&67108863,m=Math.min(y,a.length-1),f=Math.max(0,y-E.length+1);f<=m;f++){var _=y-f,H=E.words[_]|0,$=a.words[f]|0,W=H*$,st=W&67108863;v=v+(W/67108864|0)|0,st=st+A|0,A=st&67108863,v=v+(st>>>26)|0,x+=v>>>26,v&=67108863}h.words[y]=A,g=v,v=x}return g!==0?h.words[y]=g:h.length--,h._strip()}function Y(E,a,h){return P(E,a,h)}i.prototype.mulTo=function(a,h){var g,x=this.length+a.length;return this.length===10&&a.length===10?g=z(this,a,h):x<63?g=O(this,a,h):x<1024?g=P(this,a,h):g=Y(this,a,h),g},i.prototype.mul=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},i.prototype.mulf=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),Y(this,a,h)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var h=a<0;h&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var g=0,x=0;x<this.length;x++){var y=(this.words[x]|0)*a,v=(y&67108863)+(g&67108863);g>>=26,g+=y/67108864|0,g+=v>>>26,this.words[x]=v&67108863}return g!==0&&(this.words[x]=g,this.length++),h?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var h=k(a);if(h.length===0)return new i(1);for(var g=this,x=0;x<h.length&&h[x]===0;x++,g=g.sqr());if(++x<h.length)for(var y=g.sqr();x<h.length;x++,y=y.sqr())h[x]!==0&&(g=g.mul(y));return g},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var h=a%26,g=(a-h)/26,x=67108863>>>26-h<<26-h,y;if(h!==0){var v=0;for(y=0;y<this.length;y++){var A=this.words[y]&x,m=(this.words[y]|0)-A<<h;this.words[y]=m|v,v=A>>>26-h}v&&(this.words[y]=v,this.length++)}if(g!==0){for(y=this.length-1;y>=0;y--)this.words[y+g]=this.words[y];for(y=0;y<g;y++)this.words[y]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,h,g){r(typeof a=="number"&&a>=0);var x;h?x=(h-h%26)/26:x=0;var y=a%26,v=Math.min((a-y)/26,this.length),A=67108863^67108863>>>y<<y,m=g;if(x-=v,x=Math.max(0,x),m){for(var f=0;f<v;f++)m.words[f]=this.words[f];m.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var _=0;for(f=this.length-1;f>=0&&(_!==0||f>=x);f--){var H=this.words[f]|0;this.words[f]=_<<26-y|H>>>y,_=H&A}return m&&_!==0&&(m.words[m.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,h,g){return r(this.negative===0),this.iushrn(a,h,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,g=(a-h)/26,x=1<<h;if(this.length<=g)return!1;var y=this.words[g];return!!(y&x)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,g=(a-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(h!==0&&g++,this.length=Math.min(g,this.length),h!==0){var x=67108863^67108863>>>h<<h;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,h,g){var x=a.length+g,y;this._expand(x);var v,A=0;for(y=0;y<a.length;y++){v=(this.words[y+g]|0)+A;var m=(a.words[y]|0)*h;v-=m&67108863,A=(v>>26)-(m/67108864|0),this.words[y+g]=v&67108863}for(;y<this.length-g;y++)v=(this.words[y+g]|0)+A,A=v>>26,this.words[y+g]=v&67108863;if(A===0)return this._strip();for(r(A===-1),A=0,y=0;y<this.length;y++)v=-(this.words[y]|0)+A,A=v>>26,this.words[y]=v&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,h){var g=this.length-a.length,x=this.clone(),y=a,v=y.words[y.length-1]|0,A=this._countBits(v);g=26-A,g!==0&&(y=y.ushln(g),x.iushln(g),v=y.words[y.length-1]|0);var m=x.length-y.length,f;if(h!=="mod"){f=new i(null),f.length=m+1,f.words=new Array(f.length);for(var _=0;_<f.length;_++)f.words[_]=0}var H=x.clone()._ishlnsubmul(y,1,m);H.negative===0&&(x=H,f&&(f.words[m]=1));for(var $=m-1;$>=0;$--){var W=(x.words[y.length+$]|0)*67108864+(x.words[y.length+$-1]|0);for(W=Math.min(W/v|0,67108863),x._ishlnsubmul(y,W,$);x.negative!==0;)W--,x.negative=0,x._ishlnsubmul(y,1,$),x.isZero()||(x.negative^=1);f&&(f.words[$]=W)}return f&&f._strip(),x._strip(),h!=="div"&&g!==0&&x.iushrn(g),{div:f||null,mod:x}},i.prototype.divmod=function(a,h,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,y,v;return this.negative!==0&&a.negative===0?(v=this.neg().divmod(a,h),h!=="mod"&&(x=v.div.neg()),h!=="div"&&(y=v.mod.neg(),g&&y.negative!==0&&y.iadd(a)),{div:x,mod:y}):this.negative===0&&a.negative!==0?(v=this.divmod(a.neg(),h),h!=="mod"&&(x=v.div.neg()),{div:x,mod:v.mod}):this.negative&a.negative?(v=this.neg().divmod(a.neg(),h),h!=="div"&&(y=v.mod.neg(),g&&y.negative!==0&&y.isub(a)),{div:v.div,mod:y}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,h)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var g=h.div.negative!==0?h.mod.isub(a):h.mod,x=a.ushrn(1),y=a.andln(1),v=g.cmp(x);return v<0||y===1&&v===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var g=(1<<26)%a,x=0,y=this.length-1;y>=0;y--)x=(g*x+(this.words[y]|0))%a;return h?-x:x},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var g=0,x=this.length-1;x>=0;x--){var y=(this.words[x]|0)+g*67108864;this.words[x]=y/a|0,g=y%a}return this._strip(),h?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var h=this,g=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var x=new i(1),y=new i(0),v=new i(0),A=new i(1),m=0;h.isEven()&&g.isEven();)h.iushrn(1),g.iushrn(1),++m;for(var f=g.clone(),_=h.clone();!h.isZero();){for(var H=0,$=1;!(h.words[0]&$)&&H<26;++H,$<<=1);if(H>0)for(h.iushrn(H);H-- >0;)(x.isOdd()||y.isOdd())&&(x.iadd(f),y.isub(_)),x.iushrn(1),y.iushrn(1);for(var W=0,st=1;!(g.words[0]&st)&&W<26;++W,st<<=1);if(W>0)for(g.iushrn(W);W-- >0;)(v.isOdd()||A.isOdd())&&(v.iadd(f),A.isub(_)),v.iushrn(1),A.iushrn(1);h.cmp(g)>=0?(h.isub(g),x.isub(v),y.isub(A)):(g.isub(h),v.isub(x),A.isub(y))}return{a:v,b:A,gcd:g.iushln(m)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var h=this,g=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var x=new i(1),y=new i(0),v=g.clone();h.cmpn(1)>0&&g.cmpn(1)>0;){for(var A=0,m=1;!(h.words[0]&m)&&A<26;++A,m<<=1);if(A>0)for(h.iushrn(A);A-- >0;)x.isOdd()&&x.iadd(v),x.iushrn(1);for(var f=0,_=1;!(g.words[0]&_)&&f<26;++f,_<<=1);if(f>0)for(g.iushrn(f);f-- >0;)y.isOdd()&&y.iadd(v),y.iushrn(1);h.cmp(g)>=0?(h.isub(g),x.isub(y)):(g.isub(h),y.isub(x))}var H;return h.cmpn(1)===0?H=x:H=y,H.cmpn(0)<0&&H.iadd(a),H},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),g=a.clone();h.negative=0,g.negative=0;for(var x=0;h.isEven()&&g.isEven();x++)h.iushrn(1),g.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;g.isEven();)g.iushrn(1);var y=h.cmp(g);if(y<0){var v=h;h=g,g=v}else if(y===0||g.cmpn(1)===0)break;h.isub(g)}while(!0);return g.iushln(x)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var h=a%26,g=(a-h)/26,x=1<<h;if(this.length<=g)return this._expand(g+1),this.words[g]|=x,this;for(var y=x,v=g;y!==0&&v<this.length;v++){var A=this.words[v]|0;A+=y,y=A>>>26,A&=67108863,this.words[v]=A}return y!==0&&(this.words[v]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var g;if(this.length>1)g=1;else{h&&(a=-a),r(a<=67108863,"Number is too big");var x=this.words[0]|0;g=x===a?0:x<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,g=this.length-1;g>=0;g--){var x=this.words[g]|0,y=a.words[g]|0;if(x!==y){x<y?h=-1:x>y&&(h=1);break}}return h},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new X(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var D={k256:null,p224:null,p192:null,p25519:null};function K(E,a){this.name=E,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},K.prototype.ireduce=function(a){var h=a,g;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),g=h.bitLength();while(g>this.n);var x=g<this.n?-1:h.ucmp(this.p);return x===0?(h.words[0]=0,h.length=1):x>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},K.prototype.split=function(a,h){a.iushrn(this.n,0,h)},K.prototype.imulK=function(a){return a.imul(this.k)};function J(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(J,K),J.prototype.split=function(a,h){for(var g=4194303,x=Math.min(a.length,9),y=0;y<x;y++)h.words[y]=a.words[y];if(h.length=x,a.length<=9){a.words[0]=0,a.length=1;return}var v=a.words[9];for(h.words[h.length++]=v&g,y=10;y<a.length;y++){var A=a.words[y]|0;a.words[y-10]=(A&g)<<4|v>>>22,v=A}v>>>=22,a.words[y-10]=v,v===0&&a.length>10?a.length-=10:a.length-=9},J.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,g=0;g<a.length;g++){var x=a.words[g]|0;h+=x*977,a.words[g]=h&67108863,h=x*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function et(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(et,K);function _t(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(_t,K);function yt(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(yt,K),yt.prototype.imulK=function(a){for(var h=0,g=0;g<a.length;g++){var x=(a.words[g]|0)*19+h,y=x&67108863;x>>>=26,a.words[g]=y,h=x}return h!==0&&(a.words[a.length++]=h),a},i._prime=function(a){if(D[a])return D[a];var h;if(a==="k256")h=new J;else if(a==="p224")h=new et;else if(a==="p192")h=new _t;else if(a==="p25519")h=new yt;else throw new Error("Unknown prime "+a);return D[a]=h,h};function X(E){if(typeof E=="string"){var a=i._prime(E);this.m=a.p,this.prime=a}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}X.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},X.prototype._verify2=function(a,h){r((a.negative|h.negative)===0,"red works only with positives"),r(a.red&&a.red===h.red,"red works only with red numbers")},X.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(S(a,a.umod(this.m)._forceRed(this)),a)},X.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},X.prototype.add=function(a,h){this._verify2(a,h);var g=a.add(h);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},X.prototype.iadd=function(a,h){this._verify2(a,h);var g=a.iadd(h);return g.cmp(this.m)>=0&&g.isub(this.m),g},X.prototype.sub=function(a,h){this._verify2(a,h);var g=a.sub(h);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},X.prototype.isub=function(a,h){this._verify2(a,h);var g=a.isub(h);return g.cmpn(0)<0&&g.iadd(this.m),g},X.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},X.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},X.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},X.prototype.isqr=function(a){return this.imul(a,a.clone())},X.prototype.sqr=function(a){return this.mul(a,a)},X.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var x=this.m.subn(1),y=0;!x.isZero()&&x.andln(1)===0;)y++,x.iushrn(1);r(!x.isZero());var v=new i(1).toRed(this),A=v.redNeg(),m=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,m).cmp(A)!==0;)f.redIAdd(A);for(var _=this.pow(f,x),H=this.pow(a,x.addn(1).iushrn(1)),$=this.pow(a,x),W=y;$.cmp(v)!==0;){for(var st=$,rt=0;st.cmp(v)!==0;rt++)st=st.redSqr();r(rt<W);var ot=this.pow(_,new i(1).iushln(W-rt-1));H=H.redMul(ot),_=ot.redSqr(),$=$.redMul(_),W=rt}return H},X.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},X.prototype.pow=function(a,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var g=4,x=new Array(1<<g);x[0]=new i(1).toRed(this),x[1]=a;for(var y=2;y<x.length;y++)x[y]=this.mul(x[y-1],a);var v=x[0],A=0,m=0,f=h.bitLength()%26;for(f===0&&(f=26),y=h.length-1;y>=0;y--){for(var _=h.words[y],H=f-1;H>=0;H--){var $=_>>H&1;if(v!==x[0]&&(v=this.sqr(v)),$===0&&A===0){m=0;continue}A<<=1,A|=$,m++,!(m!==g&&(y!==0||H!==0))&&(v=this.mul(v,x[A]),m=0,A=0)}f=26}return v},X.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},X.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},i.mont=function(a){return new St(a)};function St(E){X.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(St,X),St.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},St.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},St.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(h),x=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=g.isub(x).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},St.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new i(0)._forceRed(this);var g=a.mul(h),x=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=g.isub(x).iushrn(this.shift),v=y;return y.cmp(this.m)>=0?v=y.isub(this.m):y.cmpn(0)<0&&(v=y.iadd(this.m)),v._forceRed(this)},St.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(n,De)})(ms);var ga=ms.exports;const so=qr(ga);var Wi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=tt,r=e.Buffer;function s(o,c){for(var d in o)c[d]=o[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,c,d){return r(o,c,d)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,c,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,d)},i.alloc=function(o,c,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var w=r(o);return c!==void 0?typeof d=="string"?w.fill(c,d):w.fill(c):w.fill(0),w},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Wi,Wi.exports);var Rf=Wi.exports,_r=Rf.Buffer;function Mf(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,c=n.charAt(0),d=Math.log(o)/Math.log(256),w=Math.log(256)/Math.log(o);function S(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=_r.from(L)),!_r.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var M=0,I=0,k=0,O=L.length;k!==O&&L[k]===0;)k++,M++;for(var z=(O-k)*w+1>>>0,P=new Uint8Array(z);k!==O;){for(var Y=L[k],D=0,K=z-1;(Y!==0||D<I)&&K!==-1;K--,D++)Y+=256*P[K]>>>0,P[K]=Y%o>>>0,Y=Y/o>>>0;if(Y!==0)throw new Error("Non-zero carry");I=D,k++}for(var J=z-I;J!==z&&P[J]===0;)J++;for(var et=c.repeat(M);J<z;++J)et+=n.charAt(P[J]);return et}function B(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return _r.alloc(0);for(var M=0,I=0,k=0;L[M]===c;)I++,M++;for(var O=(L.length-M)*d+1>>>0,z=new Uint8Array(O);L[M];){var P=t[L.charCodeAt(M)];if(P===255)return;for(var Y=0,D=O-1;(P!==0||Y<k)&&D!==-1;D--,Y++)P+=o*z[D]>>>0,z[D]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");k=Y,M++}for(var K=O-k;K!==O&&z[K]===0;)K++;var J=_r.allocUnsafe(I+(O-K));J.fill(0,0,I);for(var et=I;K!==O;)J[et++]=z[K++];return J}function F(L){var M=B(L);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:S,decodeUnsafe:B,decode:F}}var Lf=Mf,Tf=Lf,Cf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ma=Tf(Cf);const pe=qr(ma),Uf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),on=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),an=new Uint32Array(64);class Ff extends ra{constructor(){super(64,32,8,!1),this.A=on[0]|0,this.B=on[1]|0,this.C=on[2]|0,this.D=on[3]|0,this.E=on[4]|0,this.F=on[5]|0,this.G=on[6]|0,this.H=on[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:d}=this;return[t,e,r,s,i,o,c,d]}set(t,e,r,s,i,o,c,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,e){for(let B=0;B<16;B++,e+=4)an[B]=t.getUint32(e,!1);for(let B=16;B<64;B++){const F=an[B-15],L=an[B-2],M=He(F,7)^He(F,18)^F>>>3,I=He(L,17)^He(L,19)^L>>>10;an[B]=I+an[B-7]+M+an[B-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:d,G:w,H:S}=this;for(let B=0;B<64;B++){const F=He(c,6)^He(c,11)^He(c,25),L=S+F+vu(c,d,w)+Uf[B]+an[B]|0,I=(He(r,2)^He(r,13)^He(r,22))+xu(r,s,i)|0;S=w,w=d,d=c,c=o+L|0,o=i,i=s,s=r,r=L+I|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,w=w+this.G|0,S=S+this.H|0,this.set(r,s,i,o,c,d,w,S)}roundClean(){an.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ji=ea(()=>new Ff);var de={};function Ye(n,t,e){return t<=n&&n<=e}function Gr(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Nf(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,d=o&1023;s.push(65536+(c<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function Of(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Lr=-1;function ys(n){this.tokens=[].slice.call(n)}ys.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Lr},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Hn=-1;function ki(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Tr="utf-8";function Cr(n,t){if(!(this instanceof Cr))return new Cr(n,t);if(n=n!==void 0?String(n).toLowerCase():Tr,n!==Tr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Gr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Cr.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Gr(e),this._streaming||(this._decoder=new Pf({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ys(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Hn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Hn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Of(i)}};function Ur(n,t){if(!(this instanceof Ur))return new Ur(n,t);if(n=n!==void 0?String(n).toLowerCase():Tr,n!==Tr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Gr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ur.prototype={encode:function(t,e){t=t?String(t):"",e=Gr(e),this._streaming||(this._encoder=new qf(this._options)),this._streaming=!!e.stream;for(var r=[],s=new ys(Nf(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Hn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Hn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Pf(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(c,d){if(d===Lr&&s!==0)return s=0,ki(t);if(d===Lr)return Hn;if(s===0){if(Ye(d,0,127))return d;if(Ye(d,194,223))s=1,e=d-192;else if(Ye(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,e=d-224;else if(Ye(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,e=d-240;else return ki(t);return e=e<<6*s,null}if(!Ye(d,i,o))return e=s=r=0,i=128,o=191,c.prepend(d),ki(t);if(i=128,o=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var w=e;return e=s=r=0,w}}function qf(n){n.fatal,this.handler=function(t,e){if(e===Lr)return Hn;if(Ye(e,0,127))return e;var r,s;Ye(e,128,2047)?(r=1,s=192):Ye(e,2048,65535)?(r=2,s=224):Ye(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Df=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Cr,TextEncoder:Ur},Symbol.toStringTag,{value:"Module"})),zf=ts(Df);var Kf=De&&De.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Hf=De&&De.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),je=De&&De.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},$f=De&&De.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Kf(t,n,e);return Hf(t,n),t},ya=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(de,"__esModule",{value:!0});var wa=de.deserializeUnchecked=Ea=de.deserialize=Sa=de.serialize=de.BinaryReader=de.BinaryWriter=de.BorshError=de.baseDecode=de.baseEncode=void 0;const fn=ya(ga),ba=ya(ma),Wf=$f(zf),jf=typeof TextDecoder!="function"?Wf.TextDecoder:TextDecoder,Vf=new jf("utf-8",{fatal:!0});function Gf(n){return typeof n=="string"&&(n=tt.Buffer.from(n,"utf8")),ba.default.encode(tt.Buffer.from(n))}de.baseEncode=Gf;function Zf(n){return tt.Buffer.from(ba.default.decode(n))}de.baseDecode=Zf;const Ri=1024;class xe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}de.BorshError=xe;class va{constructor(){this.buf=tt.Buffer.alloc(Ri),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=tt.Buffer.concat([this.buf,tt.Buffer.alloc(Ri)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(tt.Buffer.from(new fn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(tt.Buffer.from(new fn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(tt.Buffer.from(new fn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(tt.Buffer.from(new fn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=tt.Buffer.concat([tt.Buffer.from(this.buf.subarray(0,this.length)),t,tt.Buffer.alloc(Ri)]),this.length+=t.length}writeString(t){this.maybeResize();const e=tt.Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(tt.Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}de.BinaryWriter=va;function Ve(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new xe("Reached the end of buffer when deserializing")}throw i}}}class Le{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new fn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new fn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new fn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new fn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new xe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Vf.decode(e)}catch(r){throw new xe(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}je([Ve],Le.prototype,"readU8",null);je([Ve],Le.prototype,"readU16",null);je([Ve],Le.prototype,"readU32",null);je([Ve],Le.prototype,"readU64",null);je([Ve],Le.prototype,"readU128",null);je([Ve],Le.prototype,"readU256",null);je([Ve],Le.prototype,"readU512",null);je([Ve],Le.prototype,"readString",null);je([Ve],Le.prototype,"readFixedArray",null);je([Ve],Le.prototype,"readArray",null);de.BinaryReader=Le;function xa(n){return n.charAt(0).toUpperCase()+n.slice(1)}function wn(n,t,e,r,s){try{if(typeof r=="string")s[`write${xa(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new xe(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new xe(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)wn(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{wn(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),wn(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{wn(n,t,o,r.key,s),wn(n,t,i,r.value,s)});break}default:throw new xe(`FieldType ${r} unrecognized`)}else _a(n,e,s)}catch(i){throw i instanceof xe&&i.addToFieldPath(t),i}}function _a(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new xe(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{wn(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[o,c]=r.values[i];if(o===s){e.writeU8(i),wn(n,o,t[o],c,e);break}}}else throw new xe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Yf(n,t,e=va){const r=new e;return _a(n,t,r),r.toArray()}var Sa=de.serialize=Yf;function bn(n,t,e,r){try{if(typeof e=="string")return r[`read${xa(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(bn(n,null,e[0],r));return s}else return r.readArray(()=>bn(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?bn(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const c=bn(n,t,e.key,r),d=bn(n,t,e.value,r);s.set(c,d)}return s}return ws(n,e,r)}catch(s){throw s instanceof xe&&s.addToFieldPath(t),s}}function ws(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new xe(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of n.get(t).fields)s[i]=bn(n,i,o,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new xe(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],c=bn(n,i,o,e);return new t({[i]:c})}throw new xe(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Jf(n,t,e,r=Le){const s=new r(e),i=ws(n,t,s);if(s.offset<e.length)throw new xe(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var Ea=de.deserialize=Jf;function Xf(n,t,e,r=Le){const s=new r(e);return ws(n,t,s)}wa=de.deserializeUnchecked=Xf;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=he=U.nu64=U.u48=U.u40=it=U.u32=U.u24=Ue=U.u16=xt=U.u8=En=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0;U.constant=U.utf8=U.cstr=Ft=U.blob=U.unionLayoutDiscriminator=U.union=ve=U.seq=U.bits=Q=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=Ie=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;const bs=tt;function Zn(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=Zn;function vt(n){return Zn(n),bs.Buffer.from(n.buffer,n.byteOffset,n.length)}U.uint8ArrayToBuffer=vt;class At{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}U.Layout=At;function vs(n,t){return t.property?n+"["+t.property+"]":n}U.nameWithProperty=vs;function Qf(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof At))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}U.bindConstructorLayout=Qf;class Se extends At{isCount(){throw new Error("ExternalLayout is abstract")}}U.ExternalLayout=Se;class Ba extends Se{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Zn(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}U.GreedyCount=Ba;class xs extends Se{constructor(t,e=0,r){if(!(t instanceof At))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ne||this.layout instanceof qe}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}U.OffsetLayout=xs;class Ne extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return vt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return vt(e).writeUIntLE(t,r,this.span),this.span}}U.UInt=Ne;class qe extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return vt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return vt(e).writeUIntBE(t,r,this.span),this.span}}U.UIntBE=qe;class Mn extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return vt(t).readIntLE(e,this.span)}encode(t,e,r=0){return vt(e).writeIntLE(t,r,this.span),this.span}}U.Int=Mn;class Yn extends At{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return vt(t).readIntBE(e,this.span)}encode(t,e,r=0){return vt(e).writeIntBE(t,r,this.span),this.span}}U.IntBE=Yn;const Vi=Math.pow(2,32);function Zr(n){const t=Math.floor(n/Vi),e=n-t*Vi;return{hi32:t,lo32:e}}function Yr(n,t){return n*Vi+t}class Aa extends At{constructor(t){super(8,t)}decode(t,e=0){const r=vt(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Yr(i,s)}encode(t,e,r=0){const s=Zr(t),i=vt(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}U.NearUInt64=Aa;class Ia extends At{constructor(t){super(8,t)}decode(t,e=0){const r=vt(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Yr(s,i)}encode(t,e,r=0){const s=Zr(t),i=vt(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}U.NearUInt64BE=Ia;class ka extends At{constructor(t){super(8,t)}decode(t,e=0){const r=vt(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Yr(i,s)}encode(t,e,r=0){const s=Zr(t),i=vt(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}U.NearInt64=ka;class Ra extends At{constructor(t){super(8,t)}decode(t,e=0){const r=vt(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Yr(s,i)}encode(t,e,r=0){const s=Zr(t),i=vt(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}U.NearInt64BE=Ra;class Ma extends At{constructor(t){super(4,t)}decode(t,e=0){return vt(t).readFloatLE(e)}encode(t,e,r=0){return vt(e).writeFloatLE(t,r),4}}U.Float=Ma;class La extends At{constructor(t){super(4,t)}decode(t,e=0){return vt(t).readFloatBE(e)}encode(t,e,r=0){return vt(e).writeFloatBE(t,r),4}}U.FloatBE=La;class Ta extends At{constructor(t){super(8,t)}decode(t,e=0){return vt(t).readDoubleLE(e)}encode(t,e,r=0){return vt(e).writeDoubleLE(t,r),8}}U.Double=Ta;class Ca extends At{constructor(t){super(8,t)}decode(t,e=0){return vt(t).readDoubleBE(e)}encode(t,e,r=0){return vt(e).writeDoubleBE(t,r),8}}U.DoubleBE=Ca;class Ua extends At{constructor(t,e,r){if(!(t instanceof At))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Se&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Se)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Se&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof Se&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,r+o),0);return this.count instanceof Se&&this.count.encode(t.length,e,r),i}}U.Sequence=Ua;class Fa extends At{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof At,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Zn(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,o=0;for(const c of this.fields){let d=c.span;if(o=0<d?d:0,c.property!==void 0){const w=t[c.property];w!==void 0&&(o=c.encode(w,e,r),0>d&&(d=c.getSpan(e,r)))}i=r,r+=d}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}U.Structure=Fa;class _s{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}U.UnionDiscriminator=_s;class Fr extends _s{constructor(t,e){if(!(t instanceof Se&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}U.UnionLayoutDiscriminator=Fr;class Ss extends At{constructor(t,e,r){let s;if(t instanceof Ne||t instanceof qe)s=new Fr(new xs(t));else if(t instanceof Se&&t.isCount())s=new Fr(t);else if(t instanceof _s)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof At))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Ne||t instanceof qe)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Ne||t instanceof qe,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[c.property]=c.decode(t,e+d)}else r=o.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+o.encode(t[o.property],e,r+c)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new Na(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}U.Union=Ss;class Na extends At{constructor(t,e,r,s){if(!(t instanceof Ss))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof At))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}U.VariantLayout=Na;function Nn(n){return 0>n&&(n+=4294967296),n}class Es extends At{constructor(t,e,r){if(!(t instanceof Ne||t instanceof qe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Nn(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Bs(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Oa(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}U.BitStructure=Es;class Bs{constructor(t,e,r){if(!(t instanceof Es))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=Nn(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Nn(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Nn(t&this.valueMask))throw new TypeError(vs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Nn(t<<this.start);this.container._packedSetValue(Nn(e&~this.wordMask)|r)}}U.BitField=Bs;let Oa=class extends Bs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};U.Boolean=Oa;class Pa extends At{constructor(t,e){if(!(t instanceof Se&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Se||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),vt(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof Se&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(vs("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=vt(t);return vt(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof Se&&this.length.encode(s,e,r),s}}U.Blob=Pa;class qa extends At{constructor(t){super(-1,t)}getSpan(t,e=0){Zn(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return vt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=bs.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=vt(e);return s.copy(o,r),o[r+i]=0,i+1}}U.CString=qa;class Da extends At{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Zn(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return vt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=bs.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(vt(e),r),i}}U.UTF8=Da;class za extends At{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}U.Constant=za;U.greedy=(n,t)=>new Ba(n,t);var En=U.offset=(n,t,e)=>new xs(n,t,e),xt=U.u8=n=>new Ne(1,n),Ue=U.u16=n=>new Ne(2,n);U.u24=n=>new Ne(3,n);var it=U.u32=n=>new Ne(4,n);U.u40=n=>new Ne(5,n);U.u48=n=>new Ne(6,n);var he=U.nu64=n=>new Aa(n);U.u16be=n=>new qe(2,n);U.u24be=n=>new qe(3,n);U.u32be=n=>new qe(4,n);U.u40be=n=>new qe(5,n);U.u48be=n=>new qe(6,n);U.nu64be=n=>new Ia(n);U.s8=n=>new Mn(1,n);U.s16=n=>new Mn(2,n);U.s24=n=>new Mn(3,n);U.s32=n=>new Mn(4,n);U.s40=n=>new Mn(5,n);U.s48=n=>new Mn(6,n);var Ie=U.ns64=n=>new ka(n);U.s16be=n=>new Yn(2,n);U.s24be=n=>new Yn(3,n);U.s32be=n=>new Yn(4,n);U.s40be=n=>new Yn(5,n);U.s48be=n=>new Yn(6,n);U.ns64be=n=>new Ra(n);U.f32=n=>new Ma(n);U.f32be=n=>new La(n);U.f64=n=>new Ta(n);U.f64be=n=>new Ca(n);var Q=U.struct=(n,t,e)=>new Fa(n,t,e);U.bits=(n,t,e)=>new Es(n,t,e);var ve=U.seq=(n,t,e)=>new Ua(n,t,e);U.union=(n,t,e)=>new Ss(n,t,e);U.unionLayoutDiscriminator=(n,t)=>new Fr(n,t);var Ft=U.blob=(n,t)=>new Pa(n,t);U.cstr=n=>new qa(n);U.utf8=(n,t)=>new Da(n,t);U.constant=(n,t)=>new za(n,t);var lr={};Object.defineProperty(lr,"__esModule",{value:!0});function tl(n){{const t=tt.Buffer.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var el=lr.toBigIntLE=tl;function nl(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}lr.toBigIntBE=nl;function rl(n,t){{const e=n.toString(16),r=tt.Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var il=lr.toBufferLE=rl;function sl(n,t){{const e=n.toString(16);return tt.Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}lr.toBufferBE=sl;class ol extends TypeError{constructor(t,e){let r;const{message:s,...i}=t,{path:o}=t,c=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(c),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[t,...e()]}}}function al(n){return pn(n)&&typeof n[Symbol.iterator]=="function"}function pn(n){return typeof n=="object"&&n!=null}function ze(n){return typeof n=="string"?JSON.stringify(n):""+n}function cl(n){const{done:t,value:e}=n.next();return t?void 0:e}function ul(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:d="Expected a value of type `"+o+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+ze(r)+"`"}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*oo(n,t,e,r){al(n)||(n=[n]);for(const s of n){const i=ul(s,t,e,r);i&&(yield i)}}function*As(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s};if(i&&(n=t.coercer(n,c),o&&t.type!=="type"&&pn(t.schema)&&pn(n)&&!Array.isArray(n)))for(const w in n)t.schema[w]===void 0&&delete n[w];let d=!0;for(const w of t.validator(n,c))d=!1,yield[w,void 0];for(let[w,S,B]of t.entries(n,c)){const F=As(S,B,{path:w===void 0?r:[...r,w],branch:w===void 0?s:[...s,S],coerce:i,mask:o});for(const L of F)L[0]?(d=!1,yield[L[0],void 0]):i&&(S=L[1],w===void 0?n=S:n instanceof Map?n.set(w,S):n instanceof Set?n.add(S):pn(n)&&(n[w]=S))}if(d)for(const w of t.refiner(n,c))d=!1,yield[w,void 0];d&&(yield[void 0,n])}let Ge=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(d,w)=>{const S=s(d,w);return oo(S,w,this,d)}:this.validator=()=>[],i?this.refiner=(d,w)=>{const S=i(d,w);return oo(S,w,this,d)}:this.refiner=()=>[]}assert(t){return fl(t,this)}create(t){return V(t,this)}is(t){return Ka(t,this)}mask(t){return ll(t,this)}validate(t,e={}){return hr(t,this,e)}};function fl(n,t){const e=hr(n,t);if(e[0])throw e[0]}function V(n,t){const e=hr(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function ll(n,t){const e=hr(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Ka(n,t){return!hr(n,t)[0]}function hr(n,t,e={}){const r=As(n,t,e),s=cl(r);return s[0]?[new ol(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Ln(n,t){return new Ge({type:n,schema:null,validator:t})}function hl(){return Ln("any",()=>!0)}function Z(n){return new Ge({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+ze(t)}})}function We(){return Ln("boolean",n=>typeof n=="boolean")}function Is(n){return Ln("instance",t=>t instanceof n||"Expected a `"+n.name+"` instance, but received: "+ze(t))}function zt(n){const t=ze(n),e=typeof n;return new Ge({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+t+"`, but received: "+ze(r)}})}function dl(){return Ln("never",()=>!1)}function G(n){return new Ge({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function C(){return Ln("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+ze(n))}function at(n){return new Ge({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ha(n,t){return new Ge({type:"record",schema:null,*entries(e){if(pn(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return pn(e)||"Expected an object, but received: "+ze(e)}})}function j(){return Ln("string",n=>typeof n=="string"||"Expected a string, but received: "+ze(n))}function ks(n){const t=dl();return new Ge({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+ze(e)}})}function q(n){const t=Object.keys(n);return new Ge({type:"type",schema:n,*entries(e){if(pn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return pn(e)||"Expected an object, but received: "+ze(e)}})}function Ee(n){const t=n.map(e=>e.type).join(" | ");return new Ge({type:"union",schema:null,validator(e,r){const s=[];for(const i of n){const[...o]=As(e,i,r),[c]=o;if(c[0])for(const[d]of o)d&&s.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+ze(e),...s]}})}function dr(){return Ln("unknown",()=>!0)}function pr(n,t,e){return new Ge({...n,coercer:(r,s)=>Ka(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Sr,pl=new Uint8Array(16);function $a(){if(!Sr&&(Sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sr(pl)}const gl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Jr(n){return typeof n=="string"&&gl.test(n)}var le=[];for(var Mi=0;Mi<256;++Mi)le.push((Mi+256).toString(16).substr(1));function Xr(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(le[n[t+0]]+le[n[t+1]]+le[n[t+2]]+le[n[t+3]]+"-"+le[n[t+4]]+le[n[t+5]]+"-"+le[n[t+6]]+le[n[t+7]]+"-"+le[n[t+8]]+le[n[t+9]]+"-"+le[n[t+10]]+le[n[t+11]]+le[n[t+12]]+le[n[t+13]]+le[n[t+14]]+le[n[t+15]]).toLowerCase();if(!Jr(e))throw TypeError("Stringified UUID is invalid");return e}var ao,Li,Ti=0,Ci=0;function ml(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||ao,o=n.clockseq!==void 0?n.clockseq:Li;if(i==null||o==null){var c=n.random||(n.rng||$a)();i==null&&(i=ao=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Li=(c[6]<<8|c[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),w=n.nsecs!==void 0?n.nsecs:Ci+1,S=d-Ti+(w-Ci)/1e4;if(S<0&&n.clockseq===void 0&&(o=o+1&16383),(S<0||d>Ti)&&n.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ti=d,Ci=w,Li=o,d+=122192928e5;var B=((d&268435455)*1e4+w)%4294967296;s[r++]=B>>>24&255,s[r++]=B>>>16&255,s[r++]=B>>>8&255,s[r++]=B&255;var F=d/4294967296*1e4&268435455;s[r++]=F>>>8&255,s[r++]=F&255,s[r++]=F>>>24&15|16,s[r++]=F>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var L=0;L<6;++L)s[r+L]=i[L];return t||Xr(s)}function Wa(n){if(!Jr(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function yl(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var wl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",bl="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ja(n,t,e){function r(s,i,o,c){if(typeof s=="string"&&(s=yl(s)),typeof i=="string"&&(i=Wa(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(var w=0;w<16;++w)o[c+w]=d[w];return o}return Xr(d)}try{r.name=n}catch{}return r.DNS=wl,r.URL=bl,r}function vl(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return xl(_l(Sl(n),n.length*8))}function xl(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Va(n){return(n+64>>>9<<4)+14+1}function _l(n,t){n[t>>5]|=128<<t%32,n[Va(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=e,d=r,w=s,S=i;e=me(e,r,s,i,n[o],7,-680876936),i=me(i,e,r,s,n[o+1],12,-389564586),s=me(s,i,e,r,n[o+2],17,606105819),r=me(r,s,i,e,n[o+3],22,-1044525330),e=me(e,r,s,i,n[o+4],7,-176418897),i=me(i,e,r,s,n[o+5],12,1200080426),s=me(s,i,e,r,n[o+6],17,-1473231341),r=me(r,s,i,e,n[o+7],22,-45705983),e=me(e,r,s,i,n[o+8],7,1770035416),i=me(i,e,r,s,n[o+9],12,-1958414417),s=me(s,i,e,r,n[o+10],17,-42063),r=me(r,s,i,e,n[o+11],22,-1990404162),e=me(e,r,s,i,n[o+12],7,1804603682),i=me(i,e,r,s,n[o+13],12,-40341101),s=me(s,i,e,r,n[o+14],17,-1502002290),r=me(r,s,i,e,n[o+15],22,1236535329),e=ye(e,r,s,i,n[o+1],5,-165796510),i=ye(i,e,r,s,n[o+6],9,-1069501632),s=ye(s,i,e,r,n[o+11],14,643717713),r=ye(r,s,i,e,n[o],20,-373897302),e=ye(e,r,s,i,n[o+5],5,-701558691),i=ye(i,e,r,s,n[o+10],9,38016083),s=ye(s,i,e,r,n[o+15],14,-660478335),r=ye(r,s,i,e,n[o+4],20,-405537848),e=ye(e,r,s,i,n[o+9],5,568446438),i=ye(i,e,r,s,n[o+14],9,-1019803690),s=ye(s,i,e,r,n[o+3],14,-187363961),r=ye(r,s,i,e,n[o+8],20,1163531501),e=ye(e,r,s,i,n[o+13],5,-1444681467),i=ye(i,e,r,s,n[o+2],9,-51403784),s=ye(s,i,e,r,n[o+7],14,1735328473),r=ye(r,s,i,e,n[o+12],20,-1926607734),e=we(e,r,s,i,n[o+5],4,-378558),i=we(i,e,r,s,n[o+8],11,-2022574463),s=we(s,i,e,r,n[o+11],16,1839030562),r=we(r,s,i,e,n[o+14],23,-35309556),e=we(e,r,s,i,n[o+1],4,-1530992060),i=we(i,e,r,s,n[o+4],11,1272893353),s=we(s,i,e,r,n[o+7],16,-155497632),r=we(r,s,i,e,n[o+10],23,-1094730640),e=we(e,r,s,i,n[o+13],4,681279174),i=we(i,e,r,s,n[o],11,-358537222),s=we(s,i,e,r,n[o+3],16,-722521979),r=we(r,s,i,e,n[o+6],23,76029189),e=we(e,r,s,i,n[o+9],4,-640364487),i=we(i,e,r,s,n[o+12],11,-421815835),s=we(s,i,e,r,n[o+15],16,530742520),r=we(r,s,i,e,n[o+2],23,-995338651),e=be(e,r,s,i,n[o],6,-198630844),i=be(i,e,r,s,n[o+7],10,1126891415),s=be(s,i,e,r,n[o+14],15,-1416354905),r=be(r,s,i,e,n[o+5],21,-57434055),e=be(e,r,s,i,n[o+12],6,1700485571),i=be(i,e,r,s,n[o+3],10,-1894986606),s=be(s,i,e,r,n[o+10],15,-1051523),r=be(r,s,i,e,n[o+1],21,-2054922799),e=be(e,r,s,i,n[o+8],6,1873313359),i=be(i,e,r,s,n[o+15],10,-30611744),s=be(s,i,e,r,n[o+6],15,-1560198380),r=be(r,s,i,e,n[o+13],21,1309151649),e=be(e,r,s,i,n[o+4],6,-145523070),i=be(i,e,r,s,n[o+11],10,-1120210379),s=be(s,i,e,r,n[o+2],15,718787259),r=be(r,s,i,e,n[o+9],21,-343485551),e=ln(e,c),r=ln(r,d),s=ln(s,w),i=ln(i,S)}return[e,r,s,i]}function Sl(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Va(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ln(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function El(n,t){return n<<t|n>>>32-t}function Qr(n,t,e,r,s,i){return ln(El(ln(ln(t,n),ln(r,i)),s),e)}function me(n,t,e,r,s,i,o){return Qr(t&e|~t&r,n,t,s,i,o)}function ye(n,t,e,r,s,i,o){return Qr(t&r|e&~r,n,t,s,i,o)}function we(n,t,e,r,s,i,o){return Qr(t^e^r,n,t,s,i,o)}function be(n,t,e,r,s,i,o){return Qr(e^(t|~r),n,t,s,i,o)}var Bl=ja("v3",48,vl);const Al=Bl;function Il(n,t,e){n=n||{};var r=n.random||(n.rng||$a)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Xr(r)}function kl(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Ui(n,t){return n<<t|n>>>32-t}function Rl(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),d=0;d<o;++d){for(var w=new Uint32Array(16),S=0;S<16;++S)w[S]=n[d*64+S*4]<<24|n[d*64+S*4+1]<<16|n[d*64+S*4+2]<<8|n[d*64+S*4+3];c[d]=w}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var B=0;B<o;++B){for(var F=new Uint32Array(80),L=0;L<16;++L)F[L]=c[B][L];for(var M=16;M<80;++M)F[M]=Ui(F[M-3]^F[M-8]^F[M-14]^F[M-16],1);for(var I=e[0],k=e[1],O=e[2],z=e[3],P=e[4],Y=0;Y<80;++Y){var D=Math.floor(Y/20),K=Ui(I,5)+kl(D,k,O,z)+P+t[D]+F[Y]>>>0;P=z,z=O,O=Ui(k,30)>>>0,k=I,I=K}e[0]=e[0]+I>>>0,e[1]=e[1]+k>>>0,e[2]=e[2]+O>>>0,e[3]=e[3]+z>>>0,e[4]=e[4]+P>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ml=ja("v5",80,Rl);const Ll=Ml,Tl="00000000-0000-0000-0000-000000000000";function Cl(n){if(!Jr(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Ul=Object.freeze(Object.defineProperty({__proto__:null,NIL:Tl,parse:Wa,stringify:Xr,v1:ml,v3:Al,v4:Il,v5:Ll,validate:Jr,version:Cl},Symbol.toStringTag,{value:"Module"})),Ga=ts(Ul),Fl=Ga.v4,Nl=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return Fl()};i.id=o(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Ol=Nl;const Pl=Ga.v4,ql=Ol,or=function(n,t){if(!(this instanceof or))return new or(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Pl()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var Dl=or;or.prototype.request=function(n,t,e,r){const s=this;let i=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const w=typeof r=="function";try{i=ql(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(w)return r(S);throw S}if(!w)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(w){return r(w)}return this.callServer(d,function(w,S){s._parseResponse(w,S,r)}),i};or.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const zl=qr(Dl);var Za={},$n={};Object.defineProperty($n,"__esModule",{value:!0});$n.createError=$n.DefaultDataPack=void 0;const Kl=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]);class Hl{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}}$n.DefaultDataPack=Hl;function $l(n,t){const e={code:n,message:Kl.get(n)||"Internal Server Error"};return t&&(e.data=t),e}$n.createError=$l;Object.defineProperty(Za,"__esModule",{value:!0});const Wl=es,jl=$n;class Vl extends Wl.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...c}={},d,w){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=d||(()=>++this.rpc_id),w?this.dataPack=w:this.dataPack=new jl.DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(d),s,w=>{if(w)return o(w);this.queue[c]={promise:[i,o]},r&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=tt.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}}var Gl=Za.default=Vl,Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});const Zl=es;class Yl extends Zl.EventEmitter{socket;constructor(t,e,r){super(),this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}}function Jl(n,t){return new Yl(n,t)}var Xl=Ya.default=Jl;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ql(n){const t=hs(n);Gn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:th,hexToBytes:eh}=ef,vn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=vn;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:th(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=vn,e=typeof n=="string"?eh(n):n;ur(e);let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=vn._parseInt(e.subarray(2)),{d:o,l:c}=vn._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const t=w=>Number.parseInt(w[0],16)&8?"00"+w:w,e=w=>{const S=w.toString(16);return S.length&1?`0${S}`:S},r=t(e(n.s)),s=t(e(n.r)),i=r.length/2,o=s.length/2,c=e(i),d=e(o);return`30${e(o+i+4)}02${d}${s}02${c}${r}`}},Je=BigInt(0),Ce=BigInt(1);BigInt(2);const co=BigInt(3);BigInt(4);function nh(n){const t=Ql(n),{Fp:e}=t,r=t.toBytes||((M,I,k)=>{const O=I.toAffine();return kn(Uint8Array.from([4]),e.toBytes(O.x),e.toBytes(O.y))}),s=t.fromBytes||(M=>{const I=M.subarray(1),k=e.fromBytes(I.subarray(0,e.BYTES)),O=e.fromBytes(I.subarray(e.BYTES,2*e.BYTES));return{x:k,y:O}});function i(M){const{a:I,b:k}=t,O=e.sqr(M),z=e.mul(O,M);return e.add(e.add(z,e.mul(M,I)),k)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(M){return typeof M=="bigint"&&Je<M&&M<t.n}function c(M){if(!o(M))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(M){const{allowedPrivateKeyLengths:I,nByteLength:k,wrapPrivateKey:O,n:z}=t;if(I&&typeof M!="bigint"){if(An(M)&&(M=In(M)),typeof M!="string"||!I.includes(M.length))throw new Error("Invalid key");M=M.padStart(k*2,"0")}let P;try{P=typeof M=="bigint"?M:Sn(ue("private key",M,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof M}`)}return O&&(P=qt(P,z)),c(P),P}const w=new Map;function S(M){if(!(M instanceof B))throw new Error("ProjectivePoint expected")}class B{constructor(I,k,O){if(this.px=I,this.py=k,this.pz=O,I==null||!e.isValid(I))throw new Error("x required");if(k==null||!e.isValid(k))throw new Error("y required");if(O==null||!e.isValid(O))throw new Error("z required")}static fromAffine(I){const{x:k,y:O}=I||{};if(!I||!e.isValid(k)||!e.isValid(O))throw new Error("invalid affine point");if(I instanceof B)throw new Error("projective point not allowed");const z=P=>e.eql(P,e.ZERO);return z(k)&&z(O)?B.ZERO:new B(k,O,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const k=e.invertBatch(I.map(O=>O.pz));return I.map((O,z)=>O.toAffine(k[z])).map(B.fromAffine)}static fromHex(I){const k=B.fromAffine(s(ue("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){return B.BASE.multiply(d(I))}_setWindowSize(I){this._WINDOW_SIZE=I,w.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=this.toAffine();if(!e.isValid(I)||!e.isValid(k))throw new Error("bad point: x or y not FE");const O=e.sqr(k),z=i(I);if(!e.eql(O,z))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:I}=this.toAffine();if(e.isOdd)return!e.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){S(I);const{px:k,py:O,pz:z}=this,{px:P,py:Y,pz:D}=I,K=e.eql(e.mul(k,D),e.mul(P,z)),J=e.eql(e.mul(O,D),e.mul(Y,z));return K&&J}negate(){return new B(this.px,e.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,O=e.mul(k,co),{px:z,py:P,pz:Y}=this;let D=e.ZERO,K=e.ZERO,J=e.ZERO,et=e.mul(z,z),_t=e.mul(P,P),yt=e.mul(Y,Y),X=e.mul(z,P);return X=e.add(X,X),J=e.mul(z,Y),J=e.add(J,J),D=e.mul(I,J),K=e.mul(O,yt),K=e.add(D,K),D=e.sub(_t,K),K=e.add(_t,K),K=e.mul(D,K),D=e.mul(X,D),J=e.mul(O,J),yt=e.mul(I,yt),X=e.sub(et,yt),X=e.mul(I,X),X=e.add(X,J),J=e.add(et,et),et=e.add(J,et),et=e.add(et,yt),et=e.mul(et,X),K=e.add(K,et),yt=e.mul(P,Y),yt=e.add(yt,yt),et=e.mul(yt,X),D=e.sub(D,et),J=e.mul(yt,_t),J=e.add(J,J),J=e.add(J,J),new B(D,K,J)}add(I){S(I);const{px:k,py:O,pz:z}=this,{px:P,py:Y,pz:D}=I;let K=e.ZERO,J=e.ZERO,et=e.ZERO;const _t=t.a,yt=e.mul(t.b,co);let X=e.mul(k,P),St=e.mul(O,Y),E=e.mul(z,D),a=e.add(k,O),h=e.add(P,Y);a=e.mul(a,h),h=e.add(X,St),a=e.sub(a,h),h=e.add(k,z);let g=e.add(P,D);return h=e.mul(h,g),g=e.add(X,E),h=e.sub(h,g),g=e.add(O,z),K=e.add(Y,D),g=e.mul(g,K),K=e.add(St,E),g=e.sub(g,K),et=e.mul(_t,h),K=e.mul(yt,E),et=e.add(K,et),K=e.sub(St,et),et=e.add(St,et),J=e.mul(K,et),St=e.add(X,X),St=e.add(St,X),E=e.mul(_t,E),h=e.mul(yt,h),St=e.add(St,E),E=e.sub(X,E),E=e.mul(_t,E),h=e.add(h,E),X=e.mul(St,h),J=e.add(J,X),X=e.mul(g,h),K=e.mul(a,K),K=e.sub(K,X),X=e.mul(a,St),et=e.mul(g,et),et=e.add(et,X),new B(K,J,et)}subtract(I){return this.add(I.negate())}is0(){return this.equals(B.ZERO)}wNAF(I){return L.wNAFCached(this,w,I,k=>{const O=e.invertBatch(k.map(z=>z.pz));return k.map((z,P)=>z.toAffine(O[P])).map(B.fromAffine)})}multiplyUnsafe(I){const k=B.ZERO;if(I===Je)return k;if(c(I),I===Ce)return this;const{endo:O}=t;if(!O)return L.unsafeLadder(this,I);let{k1neg:z,k1:P,k2neg:Y,k2:D}=O.splitScalar(I),K=k,J=k,et=this;for(;P>Je||D>Je;)P&Ce&&(K=K.add(et)),D&Ce&&(J=J.add(et)),et=et.double(),P>>=Ce,D>>=Ce;return z&&(K=K.negate()),Y&&(J=J.negate()),J=new B(e.mul(J.px,O.beta),J.py,J.pz),K.add(J)}multiply(I){c(I);let k=I,O,z;const{endo:P}=t;if(P){const{k1neg:Y,k1:D,k2neg:K,k2:J}=P.splitScalar(k);let{p:et,f:_t}=this.wNAF(D),{p:yt,f:X}=this.wNAF(J);et=L.constTimeNegate(Y,et),yt=L.constTimeNegate(K,yt),yt=new B(e.mul(yt.px,P.beta),yt.py,yt.pz),O=et.add(yt),z=_t.add(X)}else{const{p:Y,f:D}=this.wNAF(k);O=Y,z=D}return B.normalizeZ([O,z])[0]}multiplyAndAddUnsafe(I,k,O){const z=B.BASE,P=(D,K)=>K===Je||K===Ce||!D.equals(z)?D.multiplyUnsafe(K):D.multiply(K),Y=P(this,k).add(P(I,O));return Y.is0()?void 0:Y}toAffine(I){const{px:k,py:O,pz:z}=this,P=this.is0();I==null&&(I=P?e.ONE:e.inv(z));const Y=e.mul(k,I),D=e.mul(O,I),K=e.mul(z,I);if(P)return{x:e.ZERO,y:e.ZERO};if(!e.eql(K,e.ONE))throw new Error("invZ was invalid");return{x:Y,y:D}}isTorsionFree(){const{h:I,isTorsionFree:k}=t;if(I===Ce)return!0;if(k)return k(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:k}=t;return I===Ce?this:k?k(B,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return this.assertValidity(),r(B,this,I)}toHex(I=!0){return In(this.toRawBytes(I))}}B.BASE=new B(t.Gx,t.Gy,e.ONE),B.ZERO=new B(e.ZERO,e.ONE,e.ZERO);const F=t.nBitLength,L=da(B,t.endo?Math.ceil(F/2):F);return{CURVE:t,ProjectivePoint:B,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:o}}function rh(n){const t=hs(n);return Gn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ih(n){const t=rh(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(h){return Je<h&&h<e.ORDER}function c(h){return qt(h,r)}function d(h){return Hi(h,r)}const{ProjectivePoint:w,normPrivateKeyToScalar:S,weierstrassEquation:B,isWithinCurveOrder:F}=nh({...t,toBytes(h,g,x){const y=g.toAffine(),v=e.toBytes(y.x),A=kn;return x?A(Uint8Array.from([g.hasEvenY()?2:3]),v):A(Uint8Array.from([4]),v,e.toBytes(y.y))},fromBytes(h){const g=h.length,x=h[0],y=h.subarray(1);if(g===s&&(x===2||x===3)){const v=Sn(y);if(!o(v))throw new Error("Point is not on curve");const A=B(v);let m;try{m=e.sqrt(A)}catch(H){const $=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+$)}const f=(m&Ce)===Ce;return(x&1)===1!==f&&(m=e.neg(m)),{x:v,y:m}}else if(g===i&&x===4){const v=e.fromBytes(y.subarray(0,e.BYTES)),A=e.fromBytes(y.subarray(e.BYTES,2*e.BYTES));return{x:v,y:A}}else throw new Error(`Point of length ${g} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),L=h=>In(Kn(h,t.nByteLength));function M(h){const g=r>>Ce;return h>g}function I(h){return M(h)?c(-h):h}const k=(h,g,x)=>Sn(h.slice(g,x));class O{constructor(g,x,y){this.r=g,this.s=x,this.recovery=y,this.assertValidity()}static fromCompact(g){const x=t.nByteLength;return g=ue("compactSignature",g,x*2),new O(k(g,0,x),k(g,x,2*x))}static fromDER(g){const{r:x,s:y}=vn.toSig(ue("DER",g));return new O(x,y)}assertValidity(){if(!F(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!F(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(g){return new O(this.r,this.s,g)}recoverPublicKey(g){const{r:x,s:y,recovery:v}=this,A=J(ue("msgHash",g));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");const m=v===2||v===3?x+t.n:x;if(m>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=v&1?"03":"02",_=w.fromHex(f+L(m)),H=d(m),$=c(-A*H),W=c(y*H),st=w.BASE.multiplyAndAddUnsafe(_,$,W);if(!st)throw new Error("point at infinify");return st.assertValidity(),st}hasHighS(){return M(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return zn(this.toDERHex())}toDERHex(){return vn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zn(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}const z={isValidPrivateKey(h){try{return S(h),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const h=ha(t.n);return df(t.randomBytes(h),t.n)},precompute(h=8,g=w.BASE){return g._setWindowSize(h),g.multiply(BigInt(3)),g}};function P(h,g=!0){return w.fromPrivateKey(h).toRawBytes(g)}function Y(h){const g=An(h),x=typeof h=="string",y=(g||x)&&h.length;return g?y===s||y===i:x?y===2*s||y===2*i:h instanceof w}function D(h,g,x=!0){if(Y(h))throw new Error("first arg must be private key");if(!Y(g))throw new Error("second arg must be public key");return w.fromHex(g).multiply(S(h)).toRawBytes(x)}const K=t.bits2int||function(h){const g=Sn(h),x=h.length*8-t.nBitLength;return x>0?g>>BigInt(x):g},J=t.bits2int_modN||function(h){return c(K(h))},et=ls(t.nBitLength);function _t(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(Je<=h&&h<et))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Kn(h,t.nByteLength)}function yt(h,g,x=X){if(["recovered","canonical"].some(ot=>ot in x))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:v}=t;let{lowS:A,prehash:m,extraEntropy:f}=x;A==null&&(A=!0),h=ue("msgHash",h),m&&(h=ue("prehashed msgHash",y(h)));const _=J(h),H=S(g),$=[_t(H),_t(_)];if(f!=null&&f!==!1){const ot=f===!0?v(e.BYTES):f;$.push(ue("extraEntropy",ot))}const W=kn(...$),st=_;function rt(ot){const Dt=K(ot);if(!F(Dt))return;const dt=d(Dt),lt=w.BASE.multiply(Dt).toAffine(),Mt=c(lt.x);if(Mt===Je)return;const bt=c(dt*c(st+Mt*H));if(bt===Je)return;let Et=(lt.x===Mt?0:2)|Number(lt.y&Ce),Ke=bt;return A&&M(bt)&&(Ke=I(bt),Et^=1),new O(Mt,Ke,Et)}return{seed:W,k2sig:rt}}const X={lowS:t.lowS,prehash:!1},St={lowS:t.lowS,prehash:!1};function E(h,g,x=X){const{seed:y,k2sig:v}=yt(h,g,x),A=t;return ca(A.hash.outputLen,A.nByteLength,A.hmac)(y,v)}w.BASE._setWindowSize(8);function a(h,g,x,y=St){const v=h;if(g=ue("msgHash",g),x=ue("publicKey",x),"strict"in y)throw new Error("options.strict was renamed to lowS");const{lowS:A,prehash:m}=y;let f,_;try{if(typeof v=="string"||An(v))try{f=O.fromDER(v)}catch(lt){if(!(lt instanceof vn.Err))throw lt;f=O.fromCompact(v)}else if(typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint"){const{r:lt,s:Mt}=v;f=new O(lt,Mt)}else throw new Error("PARSE");_=w.fromHex(x)}catch(lt){if(lt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&f.hasHighS())return!1;m&&(g=t.hash(g));const{r:H,s:$}=f,W=J(g),st=d($),rt=c(W*st),ot=c(H*st),Dt=w.BASE.multiplyAndAddUnsafe(_,rt,ot)?.toAffine();return Dt?c(Dt.x)===H:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:D,sign:E,verify:a,ProjectivePoint:w,Signature:O,utils:z}}class Ja extends ta{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,yu(t);const r=us(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Mr(this),this.iHash.update(t),this}digestInto(t){Mr(this),jr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Xa=(n,t,e)=>new Ja(n,t).update(e).digest();Xa.create=(n,t)=>new Ja(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sh(n){return{hash:n,hmac:(t,...e)=>Xa(n,t,Qo(...e)),randomBytes:na}}function oh(n,t){const e=r=>ih({...n,...sh(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),uo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ah=BigInt(1),Gi=BigInt(2),fo=(n,t)=>(n+t/Gi)/t;function ch(n){const t=Qa,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),d=BigInt(88),w=n*n*n%t,S=w*w*n%t,B=Ht(S,e,t)*S%t,F=Ht(B,e,t)*S%t,L=Ht(F,Gi,t)*w%t,M=Ht(L,s,t)*L%t,I=Ht(M,i,t)*M%t,k=Ht(I,c,t)*I%t,O=Ht(k,d,t)*k%t,z=Ht(O,c,t)*I%t,P=Ht(z,e,t)*S%t,Y=Ht(P,o,t)*M%t,D=Ht(Y,r,t)*w%t,K=Ht(D,Gi,t);if(!Zi.eql(Zi.sqr(K),n))throw new Error("Cannot find square root");return K}const Zi=fa(Qa,void 0,void 0,{sqrt:ch}),Rs=oh({a:BigInt(0),b:BigInt(7),Fp:Zi,n:uo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=uo,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ah*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),c=fo(i*n,t),d=fo(-r*n,t);let w=qt(n-c*e-d*s,t),S=qt(-c*r-d*i,t);const B=w>o,F=S>o;if(B&&(w=t-w),F&&(S=t-S),w>o||S>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:B,k1:w,k2neg:F,k2:S}}}},ji);BigInt(0);Rs.ProjectivePoint;const lo=()=>{const n=fr.utils.randomPrivateKey(),t=Yi(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Yi=fr.getPublicKey;function ho(n){try{return fr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const tc=(n,t)=>fr.sign(n,t.slice(0,32)),uh=fr.verify,Wn=n=>tt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?tt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):tt.Buffer.from(n);class fh{constructor(t){Object.assign(this,t)}encode(){return tt.Buffer.from(Sa(Ar,this))}static decode(t){return Ea(Ar,this,t)}static decodeUnchecked(t){return wa(Ar,this,t)}}const Ar=new Map;var ec;const lh=32,gn=32;function hh(n){return n._bn!==void 0}let po=1;class ct extends fh{constructor(t){if(super({}),this._bn=void 0,hh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=pe.decode(t);if(e.length!=gn)throw new Error("Invalid public key input");this._bn=new so(e)}else this._bn=new so(t);if(this._bn.byteLength()>gn)throw new Error("Invalid public key input")}}static unique(){const t=new ct(po);return po+=1,new ct(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return pe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(tt.Buffer);if(t.length===gn)return t;const e=tt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=tt.Buffer.concat([t.toBuffer(),tt.Buffer.from(e),r.toBuffer()]),i=ji(s);return new ct(i)}static createProgramAddressSync(t,e){let r=tt.Buffer.alloc(0);t.forEach(function(i){if(i.length>lh)throw new TypeError("Max seed length exceeded");r=tt.Buffer.concat([r,Wn(i)])}),r=tt.Buffer.concat([r,e.toBuffer(),tt.Buffer.from("ProgramDerivedAddress")]);const s=ji(r);if(ho(s))throw new Error("Invalid seeds, address must fall off the curve");return new ct(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(tt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ct(t);return ho(e.toBytes())}}ec=ct;ct.default=new ec("11111111111111111111111111111111");Ar.set(ct,{kind:"struct",fields:[["_bn","u256"]]});new ct("BPFLoader1111111111111111111111111111111111");const Dn=1232,Ms=127,Nr=64;class nc extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(nc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class rc extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(rc.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Qn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Qn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Or{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const wt=(n="publicKey")=>Ft(32,n),dh=(n="signature")=>Ft(64,n),Pn=(n="string")=>{const t=Q([it("length"),it("lengthPadding"),Ft(En(it(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const d={chars:tt.Buffer.from(i,"utf8")};return r(d,o,c)},s.alloc=i=>it().span+it().span+tt.Buffer.from(i,"utf8").length,s},ph=(n="authorized")=>Q([wt("staker"),wt("withdrawer")],n),gh=(n="lockup")=>Q([Ie("unixTimestamp"),Ie("epoch"),wt("custodian")],n),mh=(n="voteInit")=>Q([wt("nodePubkey"),wt("authorizedVoter"),wt("authorizedWithdrawer"),xt("commission")],n),yh=(n="voteAuthorizeWithSeedArgs")=>Q([it("voteAuthorizationType"),wt("currentAuthorityDerivedKeyOwnerPubkey"),Pn("currentAuthorityDerivedKeySeed"),wt("newAuthorized")],n);function ke(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Re(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Pt(n,t){if(!n)throw new Error(t||"Assertion failed")}class ti{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const c=o.toBase58();let d=r.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const d=s(c.pubkey);d.isSigner||=c.isSigner,d.isWritable||=c.isWritable}}return new ti(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Pt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Pt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];Pt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new ct(d)),...r.map(([d])=>new ct(d)),...s.map(([d])=>new ct(d)),...i.map(([d])=>new ct(d))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new ct(i),d=t.findIndex(w=>w.equals(c));d>=0&&(Pt(d<256,"Max lookup table index exceeded"),r.push(d),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const ic="Reached end of buffer unexpectedly";function Xe(n){if(n.length===0)throw new Error(ic);return n.shift()}function Me(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(ic);return n.splice(...t)}class tn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ct(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:pe.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Or(this.staticAccountKeys)}static compile(t){const e=ti.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new Or(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:pe.encode(c.data)}));return new tn({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Re(e,t);const r=this.instructions.map(B=>{const{accounts:F,programIdIndex:L}=B,M=Array.from(pe.decode(B.data));let I=[];Re(I,F.length);let k=[];return Re(k,M.length),{programIdIndex:L,keyIndicesCount:tt.Buffer.from(I),keyIndices:F,dataLength:tt.Buffer.from(k),data:M}});let s=[];Re(s,r.length);let i=tt.Buffer.alloc(Dn);tt.Buffer.from(s).copy(i);let o=s.length;r.forEach(B=>{const L=Q([xt("programIdIndex"),Ft(B.keyIndicesCount.length,"keyIndicesCount"),ve(xt("keyIndex"),B.keyIndices.length,"keyIndices"),Ft(B.dataLength.length,"dataLength"),ve(xt("userdatum"),B.data.length,"data")]).encode(B,i,o);o+=L}),i=i.slice(0,o);const c=Q([Ft(1,"numRequiredSignatures"),Ft(1,"numReadonlySignedAccounts"),Ft(1,"numReadonlyUnsignedAccounts"),Ft(e.length,"keyCount"),ve(wt("key"),t,"keys"),wt("recentBlockhash")]),d={numRequiredSignatures:tt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:tt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:tt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:tt.Buffer.from(e),keys:this.accountKeys.map(B=>Wn(B.toBytes())),recentBlockhash:pe.decode(this.recentBlockhash)};let w=tt.Buffer.alloc(2048);const S=c.encode(d,w);return i.copy(w,S),w.slice(0,S+i.length)}static from(t){let e=[...t];const r=Xe(e);if(r!==(r&Ms))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Xe(e),i=Xe(e),o=ke(e);let c=[];for(let F=0;F<o;F++){const L=Me(e,0,gn);c.push(new ct(tt.Buffer.from(L)))}const d=Me(e,0,gn),w=ke(e);let S=[];for(let F=0;F<w;F++){const L=Xe(e),M=ke(e),I=Me(e,0,M),k=ke(e),O=Me(e,0,k),z=pe.encode(tt.Buffer.from(O));S.push({programIdIndex:L,accounts:I,data:z})}const B={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:pe.encode(tt.Buffer.from(d)),accountKeys:c,instructions:S};return new tn(B)}}class ar{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Or(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=ti.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const S of i){const B=e.extractTableLookup(S);if(B!==void 0){const[F,{writable:L,readonly:M}]=B;r.push(F),s.writable.push(...L),s.readonly.push(...M)}}const[o,c]=e.getMessageComponents(),w=new Or(c,s).compileInstructions(t.instructions);return new ar({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:w,addressTableLookups:r})}serialize(){const t=Array();Re(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Re(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Re(i,this.addressTableLookups.length);const o=Q([xt("prefix"),Q([xt("numRequiredSignatures"),xt("numReadonlySignedAccounts"),xt("numReadonlyUnsignedAccounts")],"header"),Ft(t.length,"staticAccountKeysLength"),ve(wt(),this.staticAccountKeys.length,"staticAccountKeys"),wt("recentBlockhash"),Ft(r.length,"instructionsLength"),Ft(e.length,"serializedInstructions"),Ft(i.length,"addressTableLookupsLength"),Ft(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Dn),w=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:pe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,w)}serializeInstructions(){let t=0;const e=new Uint8Array(Dn);for(const r of this.compiledInstructions){const s=Array();Re(s,r.accountKeyIndexes.length);const i=Array();Re(i,r.data.length);const o=Q([xt("programIdIndex"),Ft(s.length,"encodedAccountKeyIndexesLength"),ve(xt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ft(i.length,"encodedDataLength"),Ft(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Dn);for(const r of this.addressTableLookups){const s=Array();Re(s,r.writableIndexes.length);const i=Array();Re(i,r.readonlyIndexes.length);const o=Q([wt("accountKey"),Ft(s.length,"encodedWritableIndexesLength"),ve(xt(),r.writableIndexes.length,"writableIndexes"),Ft(i.length,"encodedReadonlyIndexesLength"),ve(xt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Xe(e),s=r&Ms;Pt(r!==s,"Expected versioned message but received legacy message");const i=s;Pt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Xe(e),numReadonlySignedAccounts:Xe(e),numReadonlyUnsignedAccounts:Xe(e)},c=[],d=ke(e);for(let M=0;M<d;M++)c.push(new ct(Me(e,0,gn)));const w=pe.encode(Me(e,0,gn)),S=ke(e),B=[];for(let M=0;M<S;M++){const I=Xe(e),k=ke(e),O=Me(e,0,k),z=ke(e),P=new Uint8Array(Me(e,0,z));B.push({programIdIndex:I,accountKeyIndexes:O,data:P})}const F=ke(e),L=[];for(let M=0;M<F;M++){const I=new ct(Me(e,0,gn)),k=ke(e),O=Me(e,0,k),z=ke(e),P=Me(e,0,z);L.push({accountKey:I,writableIndexes:O,readonlyIndexes:P})}return new ar({header:o,staticAccountKeys:c,recentBlockhash:w,compiledInstructions:B,addressTableLookups:L})}}const sc={deserializeMessageVersion(n){const t=n[0],e=t&Ms;return e===t?"legacy":e},deserialize:n=>{const t=sc.deserializeMessageVersion(n);if(t==="legacy")return tn.from(n);if(t===0)return ar.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let cn=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const wh=tt.Buffer.alloc(Nr).fill(0);class go{constructor(t){this.keys=void 0,this.programId=void 0,this.data=tt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class un{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new go(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];e.forEach(I=>{I.keys.forEach(O=>{i.push({...O})});const k=I.programId.toString();s.includes(k)||s.push(k)}),s.forEach(I=>{i.push({pubkey:new ct(I),isSigner:!1,isWritable:!1})});const o=[];i.forEach(I=>{const k=I.pubkey.toString(),O=o.findIndex(z=>z.pubkey.toString()===k);O>-1?(o[O].isWritable=o[O].isWritable||I.isWritable,o[O].isSigner=o[O].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,k){if(I.isSigner!==k.isSigner)return I.isSigner?-1:1;if(I.isWritable!==k.isWritable)return I.isWritable?-1:1;const O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(k.pubkey.toBase58(),"en",O)});const c=o.findIndex(I=>I.pubkey.equals(r));if(c>-1){const[I]=o.splice(c,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const I of this.signatures){const k=o.findIndex(O=>O.pubkey.equals(I.publicKey));if(k>-1)o[k].isSigner||(o[k].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let d=0,w=0,S=0;const B=[],F=[];o.forEach(({pubkey:I,isSigner:k,isWritable:O})=>{k?(B.push(I.toString()),d+=1,O||(w+=1)):(F.push(I.toString()),O||(S+=1))});const L=B.concat(F),M=e.map(I=>{const{data:k,programId:O}=I;return{programIdIndex:L.indexOf(O.toString()),accounts:I.keys.map(z=>L.indexOf(z.pubkey.toString())),data:pe.encode(k)}});return M.forEach(I=>{Pt(I.programIdIndex>=0),I.accounts.forEach(k=>Pt(k>=0))}),new tn({header:{numRequiredSignatures:d,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:S},accountKeys:L,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=tc(r,s.secretKey);this._addSignature(s.publicKey,Wn(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Pt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=tt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):uh(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Re(r,e.length);const s=r.length+e.length*64+t.length,i=tt.Buffer.alloc(s);return Pt(e.length<256),tt.Buffer.from(r).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(Pt(o.length===64,"signature has invalid length"),tt.Buffer.from(o).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),Pt(i.length<=Dn,`Transaction too large: ${i.length} > ${Dn}`),i}get keys(){return Pt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Pt(this.instructions.length===1),this.instructions[0].programId}get data(){return Pt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ke(e);let s=[];for(let i=0;i<r;i++){const o=Me(e,0,Nr);s.push(pe.encode(tt.Buffer.from(o)))}return un.populate(tn.from(e),s)}static populate(t,e=[]){const r=new un;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==pe.encode(wh)?null:pe.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new go({keys:i,programId:t.accountKeys[s.programIdIndex],data:pe.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class oc{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Pt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(Nr));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Re(e,this.signatures.length);const r=Q([Ft(e.length,"encodedSignaturesLength"),ve(dh(),this.signatures.length,"signatures"),Ft(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=ke(e);for(let o=0;o<s;o++)r.push(new Uint8Array(Me(e,0,Nr)));const i=sc.deserialize(new Uint8Array(e));return new oc(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));Pt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=tc(e,s.secretKey)}}addSignature(t,e){Pt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Pt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const bh=160,vh=64,xh=bh/vh,_h=1e3/xh;new ct("SysvarC1ock11111111111111111111111111111111");new ct("SysvarEpochSchedu1e111111111111111111111111");new ct("Sysvar1nstructions1111111111111111111111111");new ct("SysvarRecentB1ockHashes11111111111111111111");new ct("SysvarRent111111111111111111111111111111111");new ct("SysvarRewards111111111111111111111111111111");new ct("SysvarS1otHashes111111111111111111111111111");new ct("SysvarS1otHistory11111111111111111111111111");new ct("SysvarStakeHistory1111111111111111111111111");function On(n){return new Promise(t=>setTimeout(t,n))}const Sh=he("lamportsPerSignature"),ac=Q([it("version"),it("state"),wt("authorizedPubkey"),wt("nonce"),Q([Sh],"feeCalculator")]);ac.span;class Ls{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=ac.decode(Wn(t),0);return new Ls({authorizedPubkey:new ct(e.authorizedPubkey),nonce:new ct(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Eh=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},Bh=n=>t=>{const e=Ft(n,t),{encode:r,decode:s}=Eh(e),i=e;return i.decode=(o,c)=>{const d=s(o,c);return el(tt.Buffer.from(d))},i.encode=(o,c,d)=>{const w=il(o,n);return r(w,c,d)},i},jn=Bh(8);Object.freeze({Create:{index:0,layout:Q([it("instruction"),Ie("lamports"),Ie("space"),wt("programId")])},Assign:{index:1,layout:Q([it("instruction"),wt("programId")])},Transfer:{index:2,layout:Q([it("instruction"),jn("lamports")])},CreateWithSeed:{index:3,layout:Q([it("instruction"),wt("base"),Pn("seed"),Ie("lamports"),Ie("space"),wt("programId")])},AdvanceNonceAccount:{index:4,layout:Q([it("instruction")])},WithdrawNonceAccount:{index:5,layout:Q([it("instruction"),Ie("lamports")])},InitializeNonceAccount:{index:6,layout:Q([it("instruction"),wt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Q([it("instruction"),wt("authorized")])},Allocate:{index:8,layout:Q([it("instruction"),Ie("space")])},AllocateWithSeed:{index:9,layout:Q([it("instruction"),wt("base"),Pn("seed"),Ie("space"),wt("programId")])},AssignWithSeed:{index:10,layout:Q([it("instruction"),wt("base"),Pn("seed"),wt("programId")])},TransferWithSeed:{index:11,layout:Q([it("instruction"),jn("lamports"),Pn("seed"),wt("programId")])},UpgradeNonceAccount:{index:12,layout:Q([it("instruction")])}});new ct("11111111111111111111111111111111");new ct("BPFLoader2111111111111111111111111111111111");function Ah(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ih=Object.prototype.toString,kh=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};function tr(n,t){var e,r,s,i,o,c,d;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return tr(n.toJSON(),t);if(d=Ih.call(n),d==="[object Array]"){for(s="[",r=n.length-1,e=0;e<r;e++)s+=tr(n[e],!0)+",";return r>-1&&(s+=tr(n[e],!0)),s+"]"}else if(d==="[object Object]"){for(i=kh(n).sort(),r=i.length,s="",e=0;e<r;)o=i[e],c=tr(n[o],!1),c!==void 0&&(s&&(s+=","),s+=JSON.stringify(o)+":"+c),e++;return"{"+s+"}"}else return JSON.stringify(n);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var Rh=function(n){var t=tr(n,!1);if(t!==void 0)return""+t},mo=Ah(Rh);const Xn=32;function Fi(n){let t=0;for(;n>1;)n/=2,t++;return t}function Mh(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Lh{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Fi(Mh(t+Xn+1))-Fi(Xn)-1,r=this.getSlotsInEpoch(e),s=t-(r-Xn);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Xn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Fi(Xn)):this.slotsPerEpoch}}class yo extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class nt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Th=globalThis.fetch;class Ch extends Gl{constructor(t,e,r){const s=i=>{const o=Xl(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Uh(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const wo=56;class bo{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Uh(Fh,t),r=t.length-wo;Pt(r>=0,"lookup table is invalid"),Pt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=Q([ve(wt(),s,"addresses")]).decode(t.slice(wo));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ct(e.authority[0]):void 0,addresses:i.map(o=>new ct(o))}}}const Fh={index:1,layout:Q([it("typeIndex"),jn("deactivationSlot"),he("lastExtendedSlot"),xt("lastExtendedStartIndex"),xt(),ve(wt(),En(xt(),-1),"authority")])},Nh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Oh(n){const t=n.match(Nh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),d=c==null?"":`:${c+1}`;return`${o}//${r}${d}${i}`}const ce=pr(Is(ct),j(),n=>new ct(n)),cc=ks([j(),zt("base64")]),Ts=pr(Is(tt.Buffer),cc,n=>tt.Buffer.from(n[0],"base64")),Ph=30*1e3;function qh(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ot(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function uc(n){return Ee([q({jsonrpc:zt("2.0"),id:j(),result:n}),q({jsonrpc:zt("2.0"),id:j(),error:q({code:dr(),message:j(),data:at(hl())})})])}const Dh=uc(dr());function mt(n){return pr(uc(n),Dh,t=>"error"in t?t:{...t,result:V(t.result,n)})}function $t(n){return mt(q({context:q({slot:C()}),value:n}))}function ei(n){return q({context:q({slot:C()}),value:n})}function Ni(n,t){return n===0?new ar({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ct(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:pe.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new tn(t)}const zh=q({foundation:C(),foundationTerm:C(),initial:C(),taper:C(),terminal:C()}),Kh=mt(Z(G(q({epoch:C(),effectiveSlot:C(),amount:C(),postBalance:C(),commission:at(G(C()))})))),Hh=Z(q({slot:C(),prioritizationFee:C()})),$h=q({total:C(),validator:C(),foundation:C(),epoch:C()}),Wh=q({epoch:C(),slotIndex:C(),slotsInEpoch:C(),absoluteSlot:C(),blockHeight:at(C()),transactionCount:at(C())}),jh=q({slotsPerEpoch:C(),leaderScheduleSlotOffset:C(),warmup:We(),firstNormalEpoch:C(),firstNormalSlot:C()}),Vh=Ha(j(),Z(C())),Tn=G(Ee([q({}),j()])),Gh=q({err:Tn}),Zh=zt("receivedSignature"),Yh=q({"solana-core":j(),"feature-set":at(C())}),vo=$t(q({err:G(Ee([q({}),j()])),logs:G(Z(j())),accounts:at(G(Z(G(q({executable:We(),owner:j(),lamports:C(),data:Z(j()),rentEpoch:at(C())}))))),unitsConsumed:at(C()),returnData:at(G(q({programId:j(),data:ks([j(),zt("base64")])})))})),Jh=$t(q({byIdentity:Ha(j(),Z(C())),range:q({firstSlot:C(),lastSlot:C()})}));function Xh(n,t,e,r,s,i){const o=e||Th;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(S,B)=>{const F=await new Promise((L,M)=>{try{r(S,B,(I,k)=>L([I,k]))}catch(I){M(I)}});return await o(...F)}),new zl(async(S,B)=>{const F={method:"POST",body:S,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},Qd)};try{let L=5,M,I=500;for(;d?M=await d(n,F):M=await o(n,F),!(M.status!==429||s===!0||(L-=1,L===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${I}ms delay...`),await On(I),I*=2;const k=await M.text();M.ok?B(null,k):B(new Error(`${M.status} ${M.statusText}: ${k}`))}catch(L){L instanceof Error&&B(L)}},{})}function Qh(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function td(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const ed=mt(zh),nd=mt($h),rd=mt(Hh),id=mt(Wh),sd=mt(jh),od=mt(Vh),ad=mt(C()),cd=$t(q({total:C(),circulating:C(),nonCirculating:C(),nonCirculatingAccounts:Z(ce)})),Ji=q({amount:j(),uiAmount:G(C()),decimals:C(),uiAmountString:at(j())}),ud=$t(Z(q({address:ce,amount:j(),uiAmount:G(C()),decimals:C(),uiAmountString:at(j())}))),fd=$t(Z(q({pubkey:ce,account:q({executable:We(),owner:ce,lamports:C(),data:Ts,rentEpoch:C()})}))),Xi=q({program:j(),parsed:dr(),space:C()}),ld=$t(Z(q({pubkey:ce,account:q({executable:We(),owner:ce,lamports:C(),data:Xi,rentEpoch:C()})}))),hd=$t(Z(q({lamports:C(),address:ce}))),cr=q({executable:We(),owner:ce,lamports:C(),data:Ts,rentEpoch:C()}),dd=q({pubkey:ce,account:cr}),pd=pr(Ee([Is(tt.Buffer),Xi]),Ee([cc,Xi]),n=>Array.isArray(n)?V(n,Ts):n),Qi=q({executable:We(),owner:ce,lamports:C(),data:pd,rentEpoch:C()}),gd=q({pubkey:ce,account:Qi}),md=q({state:Ee([zt("active"),zt("inactive"),zt("activating"),zt("deactivating")]),active:C(),inactive:C()}),yd=mt(Z(q({signature:j(),slot:C(),err:Tn,memo:G(j()),blockTime:at(G(C()))}))),wd=mt(Z(q({signature:j(),slot:C(),err:Tn,memo:G(j()),blockTime:at(G(C()))}))),bd=q({subscription:C(),result:ei(cr)}),vd=q({pubkey:ce,account:cr}),xd=q({subscription:C(),result:ei(vd)}),_d=q({parent:C(),slot:C(),root:C()}),Sd=q({subscription:C(),result:_d}),Ed=Ee([q({type:Ee([zt("firstShredReceived"),zt("completed"),zt("optimisticConfirmation"),zt("root")]),slot:C(),timestamp:C()}),q({type:zt("createdBank"),parent:C(),slot:C(),timestamp:C()}),q({type:zt("frozen"),slot:C(),timestamp:C(),stats:q({numTransactionEntries:C(),numSuccessfulTransactions:C(),numFailedTransactions:C(),maxTransactionsPerEntry:C()})}),q({type:zt("dead"),slot:C(),timestamp:C(),err:j()})]),Bd=q({subscription:C(),result:Ed}),Ad=q({subscription:C(),result:ei(Ee([Gh,Zh]))}),Id=q({subscription:C(),result:C()}),kd=q({pubkey:j(),gossip:G(j()),tpu:G(j()),rpc:G(j()),version:G(j())}),xo=q({votePubkey:j(),nodePubkey:j(),activatedStake:C(),epochVoteAccount:We(),epochCredits:Z(ks([C(),C(),C()])),commission:C(),lastVote:C(),rootSlot:G(C())}),Rd=mt(q({current:Z(xo),delinquent:Z(xo)})),Md=Ee([zt("processed"),zt("confirmed"),zt("finalized")]),Ld=q({slot:C(),confirmations:G(C()),err:Tn,confirmationStatus:at(Md)}),Td=$t(Z(G(Ld))),Cd=mt(C()),fc=q({accountKey:ce,writableIndexes:Z(C()),readonlyIndexes:Z(C())}),Cs=q({signatures:Z(j()),message:q({accountKeys:Z(j()),header:q({numRequiredSignatures:C(),numReadonlySignedAccounts:C(),numReadonlyUnsignedAccounts:C()}),instructions:Z(q({accounts:Z(C()),data:j(),programIdIndex:C()})),recentBlockhash:j(),addressTableLookups:at(Z(fc))})}),lc=q({pubkey:ce,signer:We(),writable:We(),source:at(Ee([zt("transaction"),zt("lookupTable")]))}),hc=q({accountKeys:Z(lc),signatures:Z(j())}),dc=q({parsed:dr(),program:j(),programId:ce}),pc=q({accounts:Z(ce),data:j(),programId:ce}),Ud=Ee([pc,dc]),Fd=Ee([q({parsed:dr(),program:j(),programId:j()}),q({accounts:Z(j()),data:j(),programId:j()})]),gc=pr(Ud,Fd,n=>"accounts"in n?V(n,pc):V(n,dc)),mc=q({signatures:Z(j()),message:q({accountKeys:Z(lc),instructions:Z(gc),recentBlockhash:j(),addressTableLookups:at(G(Z(fc)))})}),Pr=q({accountIndex:C(),mint:j(),owner:at(j()),uiTokenAmount:Ji}),yc=q({writable:Z(ce),readonly:Z(ce)}),ni=q({err:Tn,fee:C(),innerInstructions:at(G(Z(q({index:C(),instructions:Z(q({accounts:Z(C()),data:j(),programIdIndex:C()}))})))),preBalances:Z(C()),postBalances:Z(C()),logMessages:at(G(Z(j()))),preTokenBalances:at(G(Z(Pr))),postTokenBalances:at(G(Z(Pr))),loadedAddresses:at(yc),computeUnitsConsumed:at(C())}),Us=q({err:Tn,fee:C(),innerInstructions:at(G(Z(q({index:C(),instructions:Z(gc)})))),preBalances:Z(C()),postBalances:Z(C()),logMessages:at(G(Z(j()))),preTokenBalances:at(G(Z(Pr))),postTokenBalances:at(G(Z(Pr))),loadedAddresses:at(yc),computeUnitsConsumed:at(C())}),Jn=Ee([zt(0),zt("legacy")]),Cn=q({pubkey:j(),lamports:C(),postBalance:G(C()),rewardType:G(j()),commission:at(G(C()))}),Nd=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:Z(q({transaction:Cs,meta:G(ni),version:at(Jn)})),rewards:at(Z(Cn)),blockTime:G(C()),blockHeight:G(C())}))),Od=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),rewards:at(Z(Cn)),blockTime:G(C()),blockHeight:G(C())}))),Pd=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:Z(q({transaction:hc,meta:G(ni),version:at(Jn)})),rewards:at(Z(Cn)),blockTime:G(C()),blockHeight:G(C())}))),qd=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:Z(q({transaction:mc,meta:G(Us),version:at(Jn)})),rewards:at(Z(Cn)),blockTime:G(C()),blockHeight:G(C())}))),Dd=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:Z(q({transaction:hc,meta:G(Us),version:at(Jn)})),rewards:at(Z(Cn)),blockTime:G(C()),blockHeight:G(C())}))),zd=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),rewards:at(Z(Cn)),blockTime:G(C()),blockHeight:G(C())}))),Kd=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),transactions:Z(q({transaction:Cs,meta:G(ni)})),rewards:at(Z(Cn)),blockTime:G(C())}))),_o=mt(G(q({blockhash:j(),previousBlockhash:j(),parentSlot:C(),signatures:Z(j()),blockTime:G(C())}))),Oi=mt(G(q({slot:C(),meta:G(ni),blockTime:at(G(C())),transaction:Cs,version:at(Jn)}))),Er=mt(G(q({slot:C(),transaction:mc,meta:G(Us),blockTime:at(G(C())),version:at(Jn)}))),Hd=$t(q({blockhash:j(),feeCalculator:q({lamportsPerSignature:C()})})),$d=$t(q({blockhash:j(),lastValidBlockHeight:C()})),Wd=$t(We()),jd=q({slot:C(),numTransactions:C(),numSlots:C(),samplePeriodSecs:C()}),Vd=mt(Z(jd)),Gd=$t(G(q({feeCalculator:q({lamportsPerSignature:C()})}))),Zd=mt(j()),Yd=mt(j()),Jd=q({err:Tn,logs:Z(j()),signature:j()}),Xd=q({result:ei(Jd),subscription:C()}),Qd={"solana-client":"js/0.0.0-development"};class P0{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const w={};return async S=>{const{commitment:B,config:F}=Ot(S),L=this._buildArgs([],B,void 0,F),M=mo(L);return w[M]=w[M]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",L),k=V(I,mt(C()));if("error"in k)throw new nt(k.error,"failed to get block height information");return k.result}finally{delete w[M]}})(),await w[M]}})();let r,s,i,o,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=qh(t),this._rpcWsEndpoint=r||Oh(t),this._rpcClient=Xh(t,s,i,o,c,d),this._rpcRequest=Qh(this._rpcClient),this._rpcBatchRequest=td(this._rpcClient),this._rpcWebSocket=new Ch(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=V(o,$t(C()));if("error"in c)throw new nt(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=V(e,mt(G(C())));if("error"in r)throw new nt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=V(t,mt(C()));if("error"in e)throw new nt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=V(t,ad);if("error"in e)throw new nt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=V(r,cd);if("error"in s)throw new nt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=V(s,$t(Ji));if("error"in i)throw new nt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=V(s,$t(Ji));if("error"in i)throw new nt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Ot(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),w=V(d,fd);if("error"in w)throw new nt(w.error,`failed to get token accounts owned by account ${t.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=V(o,ld);if("error"in c)throw new nt(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=V(s,hd);if("error"in i)throw new nt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=V(s,ud);if("error"in i)throw new nt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=V(o,$t(G(cr)));if("error"in c)throw new nt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=V(o,$t(G(Qi)));if("error"in c)throw new nt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Ot(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),d=V(c,$t(Z(G(Qi))));if("error"in d)throw new nt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Ot(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),d=V(c,$t(Z(G(cr))));if("error"in d)throw new nt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Ot(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),d=V(c,mt(md));if("error"in d)throw new nt(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Ot(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],r,i||"base64",o),d=await this._rpcRequest("getProgramAccounts",c),w=Z(dd),S=o.withContext===!0?V(d,$t(w)):V(d,mt(w));if("error"in S)throw new nt(S.error,`failed to get accounts owned by program ${t.toBase58()}`);return S.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=V(o,mt(Z(gd)));if("error"in c)throw new nt(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=pe.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Pt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((d,w)=>{try{r=this.onSignature(e,(B,F)=>{r=void 0;const L={context:F,value:B};d({__type:cn.PROCESSED,response:L})},t);const S=new Promise(B=>{r==null?B():s=this._onSubscriptionStateChange(r,F=>{F==="subscribed"&&B()})});(async()=>{if(await S,i)return;const B=await this.getSignatureStatus(e);if(i||B==null)return;const{context:F,value:L}=B;if(L!=null)if(L?.err)w(L.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(L.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(L.confirmationStatus==="processed"||L.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:cn.PROCESSED,response:{context:F,value:L}})}})()}catch(S){w(S)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(B=>{const F=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let L=await F();if(!i){for(;L<=r;)if(await On(1e3),i||(L=await F(),i))return;B({__type:cn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),w=this.getCancellationPromise(e);let S;try{const B=await Promise.race([w,d,o]);if(B.__type===cn.PROCESSED)S=B.response;else throw new nc(s)}finally{i=!0,c()}return S}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const d=new Promise(L=>{let M=i,I=null;const k=async()=>{try{const{context:O,value:z}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return I=O.slot,z?.nonce}catch{return M}};(async()=>{if(M=await k(),!c)for(;;){if(i!==M){L({__type:cn.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await On(2e3),c||(M=await k(),c))return}})()}),{abortConfirmation:w,confirmationPromise:S}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),B=this.getCancellationPromise(e);let F;try{const L=await Promise.race([B,S,d]);if(L.__type===cn.PROCESSED)F=L.response;else{let M;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(L.slotInWhichNonceDidAdvance??r)){await On(400);continue}M=I;break}if(M?.value){const I=t||"finalized",{confirmationStatus:k}=M.value;switch(I){case"processed":case"recent":if(k!=="processed"&&k!=="confirmed"&&k!=="finalized")throw new Qn(o);break;case"confirmed":case"single":case"singleGossip":if(k!=="confirmed"&&k!=="finalized")throw new Qn(o);break;case"finalized":case"max":case"root":if(k!=="finalized")throw new Qn(o);break;default:}F={context:M.context,value:{err:M.value.err}}}else throw new Qn(o)}}finally{c=!0,w()}return F}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(d=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:cn.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([o,s]);if(d.__type===cn.PROCESSED)c=d.response;else throw new rc(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=V(t,mt(Z(kd)));if("error"in e)throw new nt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=V(r,Rd);if("error"in s)throw new nt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Ot(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=V(i,mt(C()));if("error"in o)throw new nt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Ot(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=V(i,mt(j()));if("error"in o)throw new nt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=V(s,mt(Z(ce)));if("error"in i)throw new nt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);Pt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=V(s,Td);if("error"in i)throw new nt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Ot(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=V(i,mt(C()));if("error"in o)throw new nt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=V(r,ed);if("error"in s)throw new nt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Ot(r),o=this._buildArgs([t.map(w=>w.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),d=V(c,Kh);if("error"in d)throw new nt(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=V(t,nd);if("error"in e)throw new nt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Ot(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=V(i,id);if("error"in o)throw new nt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=V(t,sd);if("error"in e)throw new nt(e.error,"failed to get epoch schedule");const r=e.result;return new Lh(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=V(t,od);if("error"in e)throw new nt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=V(s,Cd);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),s=V(r,Hd);if("error"in s)throw new nt(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=V(e,Vd);if("error"in r)throw new nt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=V(s,Gd);if("error"in i)throw new nt(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=Wn(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=V(i,$t(G(C())));if("error"in o)throw new nt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=V(s,rd);if("error"in i)throw new nt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ot(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=V(i,$d);if("error"in o)throw new nt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=V(o,Wd);if("error"in c)throw new nt(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=V(t,mt(Yh));if("error"in e)throw new nt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=V(t,mt(j()));if("error"in e)throw new nt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=V(o,Pd);if("error"in c)throw c.error;return c.result}case"none":{const c=V(o,Od);if("error"in c)throw c.error;return c.result}default:{const c=V(o,Nd);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:w,meta:S,version:B})=>({meta:S,transaction:{...w,message:Ni(B,w.message)},version:B}))}:null}}}catch(c){throw new nt(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=V(o,Dd);if("error"in c)throw c.error;return c.result}case"none":{const c=V(o,zd);if("error"in c)throw c.error;return c.result}default:{const c=V(o,qd);if("error"in c)throw c.error;return c.result}}}catch(c){throw new nt(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...d}=t;r=c,e=d}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=V(i,Jh);if("error"in o)throw new nt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=V(o,Oi);if("error"in c)throw new nt(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:Ni(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Ot(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=V(o,Er);if("error"in c)throw new nt(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Ot(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const w=V(d,Er);if("error"in w)throw new nt(w.error,"failed to get transactions");return w.result})}async getTransactions(t,e){const{commitment:r,config:s}=Ot(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const w=V(d,Oi);if("error"in w)throw new nt(w.error,"failed to get transactions");const S=w.result;return S&&{...S,transaction:{...S.transaction,message:Ni(S.version,S.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedBlock",r),i=V(s,Kd);if("error"in i)throw new nt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:d,meta:w})=>{const S=new tn(d.message);return{meta:w,transaction:{...d,message:S}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:w})=>({meta:w,transaction:un.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=V(i,mt(Z(C())));if("error"in o)throw new nt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=V(s,_o);if("error"in i)throw new nt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",r),i=V(s,_o);if("error"in i)throw new nt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedTransaction",r),i=V(s,Oi);if("error"in i)throw new nt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new tn(o.transaction.message),d=o.transaction.signatures;return{...o,transaction:un.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",r),i=V(s,Er);if("error"in i)throw new nt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=V(o,Er);if("error"in c)throw new nt(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=V(i,yd);if("error"in o)throw new nt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=V(i,wd);if("error"in o)throw new nt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new bo({key:t,state:bo.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Ls.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=V(r,Zd);if("error"in s)throw new nt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await On(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Ph;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await On(_h/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ot(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=V(i,$t(C()));if("error"in o)throw new nt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const I=t.serialize(),k=tt.Buffer.from(I).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const O=e||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment);const z=[k,O],P=await this._rpcRequest("simulateTransaction",z),Y=V(P,vo);if("error"in Y)throw new Error("failed to simulate transaction: "+Y.error.message);return Y.result}let s;if(t instanceof un){let M=t;s=new un,s.feePayer=M.feePayer,s.instructions=t.instructions,s.nonceInfo=M.nonceInfo,s.signatures=M.signatures}else s=un.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let M=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(M);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const k=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(k)&&!this._blockhashInfo.transactionSignatures.includes(k)){this._blockhashInfo.simulatedSignatures.push(k);break}else M=!0}}const o=s._compile(),c=o.serialize(),w=s._serialize(c).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(r){const M=(Array.isArray(r)?r:o.nonProgramIds()).map(I=>I.toBase58());S.accounts={encoding:"base64",addresses:M}}i&&(S.sigVerify=!0);const B=[w,S],F=await this._rpcRequest("simulateTransaction",B),L=V(F,vo);if("error"in L){let M;if("data"in L.error&&(M=L.error.data.logs,M&&Array.isArray(M))){const I=`
    `,k=I+M.join(I);console.error(L.error.message,k)}throw new yo("failed to simulate transaction: "+L.error.message,M)}return L.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))o=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Wn(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),d=V(c,Yd);if("error"in d){let w;throw"data"in d.error&&(w=d.error.data.logs),new yo("failed to send transaction: "+d.error.message,w)}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(c instanceof Error&&console.error(`${o} error for argument`,i,c.message),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=V(t,bd);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=mo([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Pt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const s=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=V(t,xd);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",s?{filters:s}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=V(t,Xd);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=V(t,Sd);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=V(t,Bd);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=V(t,Ad);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(d,w)=>{e(d,w);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=V(t,Id);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Ir{constructor(t){this._keypair=void 0,this._keypair=t??lo()}static generate(){return new Ir(lo())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Yi(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Ir({publicKey:r,secretKey:t})}static fromSeed(t){const e=Yi(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Ir({publicKey:e,secretKey:r})}get publicKey(){return new ct(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:Q([it("instruction"),jn("recentSlot"),xt("bumpSeed")])},FreezeLookupTable:{index:1,layout:Q([it("instruction")])},ExtendLookupTable:{index:2,layout:Q([it("instruction"),jn(),ve(wt(),En(it(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Q([it("instruction")])},CloseLookupTable:{index:4,layout:Q([it("instruction")])}});new ct("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Q([xt("instruction"),it("units"),it("additionalFee")])},RequestHeapFrame:{index:1,layout:Q([xt("instruction"),it("bytes")])},SetComputeUnitLimit:{index:2,layout:Q([xt("instruction"),it("units")])},SetComputeUnitPrice:{index:3,layout:Q([xt("instruction"),jn("microLamports")])}});new ct("ComputeBudget111111111111111111111111111111");Q([xt("numSignatures"),xt("padding"),Ue("signatureOffset"),Ue("signatureInstructionIndex"),Ue("publicKeyOffset"),Ue("publicKeyInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),Ue("messageInstructionIndex")]);new ct("Ed25519SigVerify111111111111111111111111111");Rs.utils.isValidPrivateKey;Rs.getPublicKey;Q([xt("numSignatures"),Ue("signatureOffset"),xt("signatureInstructionIndex"),Ue("ethAddressOffset"),xt("ethAddressInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),xt("messageInstructionIndex"),Ft(20,"ethAddress"),Ft(64,"signature"),xt("recoveryId")]);new ct("KeccakSecp256k11111111111111111111111111111");var wc;new ct("StakeConfig11111111111111111111111111111111");class bc{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}wc=bc;bc.default=new wc(0,0,ct.default);Object.freeze({Initialize:{index:0,layout:Q([it("instruction"),ph(),gh()])},Authorize:{index:1,layout:Q([it("instruction"),wt("newAuthorized"),it("stakeAuthorizationType")])},Delegate:{index:2,layout:Q([it("instruction")])},Split:{index:3,layout:Q([it("instruction"),Ie("lamports")])},Withdraw:{index:4,layout:Q([it("instruction"),Ie("lamports")])},Deactivate:{index:5,layout:Q([it("instruction")])},Merge:{index:7,layout:Q([it("instruction")])},AuthorizeWithSeed:{index:8,layout:Q([it("instruction"),wt("newAuthorized"),it("stakeAuthorizationType"),Pn("authoritySeed"),wt("authorityOwner")])}});new ct("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Q([it("instruction"),mh()])},Authorize:{index:1,layout:Q([it("instruction"),wt("newAuthorized"),it("voteAuthorizationType")])},Withdraw:{index:3,layout:Q([it("instruction"),Ie("lamports")])},UpdateValidatorIdentity:{index:4,layout:Q([it("instruction")])},AuthorizeWithSeed:{index:10,layout:Q([it("instruction"),yh()])}});new ct("Vote111111111111111111111111111111111111111");new ct("Va1idator1nfo111111111111111111111111111111");q({name:j(),website:at(j()),details:at(j()),keybaseUsername:at(j())});new ct("Vote111111111111111111111111111111111111111");Q([wt("nodePubkey"),wt("authorizedWithdrawer"),xt("commission"),he(),ve(Q([he("slot"),it("confirmationCount")]),En(it(),-8),"votes"),xt("rootSlotValid"),he("rootSlot"),he(),ve(Q([he("epoch"),wt("authorizedVoter")]),En(it(),-8),"authorizedVoters"),Q([ve(Q([wt("authorizedPubkey"),he("epochOfLastAuthorizedSwitch"),he("targetEpoch")]),32,"buf"),he("idx"),xt("isEmpty")],"priorVoters"),he(),ve(Q([he("epoch"),he("credits"),he("prevCredits")]),En(it(),-8),"epochCredits"),Q([he("slot"),he("timestamp")],"lastTimestamp")]);const So={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function q0(n,t){const e="https";if(!n)return So[e].devnet;const r=So[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}export{B0 as $,Vo as A,n0 as B,P0 as C,y0 as D,e0 as E,T0 as F,u0 as G,Lo as H,To as I,Vn as J,Ir as K,c0 as L,_c as M,vc as N,er as O,Ec as P,f0 as Q,Nc as R,p0 as S,Uc as T,g0 as U,d0 as V,l0 as W,h0 as X,kr as Y,Oe as Z,i0 as _,$o as a,dn as a0,kc as a1,A0 as a2,o0 as a3,Ic as a4,b0 as a5,v0 as a6,iu as a7,Wo as a8,ct as a9,oc as aa,un as ab,w0 as ac,sc as ad,Nr as ae,Rf as af,kf as ag,ga as ah,tt as b,jo as c,Bt as d,_0 as e,C0 as f,S0 as g,q0 as h,mn as i,nr as j,a0 as k,Bn as l,k0 as m,Ao as n,E0 as o,Fe as p,en as q,M0 as r,L0 as s,x0 as t,r0 as u,Io as v,I0 as w,s0 as x,R0 as y,m0 as z};
