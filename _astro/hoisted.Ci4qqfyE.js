import{c as g,T as _}from"./CountDown.astro_astro_type_script_index_0_lang.80VzQjOl.js";import"./NavBar.astro_astro_type_script_index_0_lang.CNq-JdqT.js";import"https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js";import{T as m}from"./PopupWindow.astro_astro_type_script_index_0_lang.24cxTJvV.js";import"./events.B-FFxznp.js";import"./_commonjsHelpers.BosuxZz1.js";let a=!1;function u(i){let e=window.scrollY,t=Math.ceil(e/window.innerHeight);window.scrollTo(0,window.innerHeight*(t+i)),a=!0,setTimeout(()=>{a=!1},600)}window.addEventListener("wheel",i=>{if(!a){let e=0;i.deltaY<0?e=-1:i.deltaY>0&&(e=1),u(e)}i.stopImmediatePropagation()});let d,f;window.addEventListener("touchstart",i=>{d=i.touches[0],f=Date.now()});const c=i=>{d=null};window.addEventListener("touchcancel",c);window.addEventListener("touchend",c);window.addEventListener("touchmove",i=>{if(Date.now()-f>400)return;let e;if(d){for(let t of i.touches)if(t.identifier===d.identifier){e=t;break}}if(e){let t=e.pageY-d.pageY;t>100?(u(-1),c()):t<-100&&(u(1),c())}});g(i=>{let e=document.querySelector(".mine-countdown"),t=document.querySelector(".cover-page");i?(e.style.display="none",t.style.display="block"):(e.style.display="block",t.style.display="none")});class n{static _percent=.5;static set percent(e){this._percent!==e&&(this._percent=e,n.updateAll())}static get percent(){return this._percent}static _tween;static animatePercent(e){this._tween?.stop(),this._tween=new m(this).to({percent:e},900).start()}static views=[];element;left;right;constructor(e){this.element=e;let t=e.children;for(let o of t)o.nodeName.toLowerCase()==="div"&&(this.left?this.right||(this.right=o):this.left=o);this.right.style.flexGrow="1",n.views.push(this),this._update()}_update(){let e=this.element.getBoundingClientRect();this.left.style.width=`${e.width*n.percent}px`,this.right.style.maxWidth=`${e.width*(1-n.percent)}px`}static updateAll(){for(let e of n.views)e._update()}}window.addEventListener("resize",()=>{n.updateAll()});let h=[],p=()=>{let i,e,t=null;for(let o=0,l=h.length;o<l;++o){let s=h[o];s.onscroll();let r=Math.abs(s.offset);(t===null||t>r)&&(t=r,i=s,s.offset>0&&o>=0?e=h[o-1]:s.offset<0?e=h[o+1]:e=null)}if(i){let o=Math.max(1-Math.abs(i.offset)/window.innerHeight,.01),l=i.percent;e&&(l=l*o+e.percent*(1-o)),n.animatePercent(l)}};document.addEventListener("scroll",p);class v{element;inner;_oldTime=0;_rect;_isShow=!1;percent=.5;offset;constructor(e){this.element=e,this.percent=parseFloat(e.dataset.percent),this.inner=e.querySelector(".fade-in-inner"),h.push(this),this.onscroll()}set isShow(e){this._isShow!==e&&(this._isShow=e,e?this.element.classList.add("display"):this.element.classList.remove("display"))}get isShow(){return this._isShow}onscroll(){this._testUpdate();let e=(this._rect.top+this._rect.bottom)/2;this.offset=window.innerHeight/2-e,this.inner.style.transform=`translate(0, ${-this.offset/4}px)`,this.element.style.opacity=`${Math.min(1,(1-Math.abs(this.offset/window.innerHeight))*1.4)}`}_testUpdate(){let e=Date.now(),t=this.element.getBoundingClientRect();this._rect=t,this._oldTime=e}}window.addEventListener("load",p);let y=document.querySelectorAll(".fade-in-item");for(let i of y)new v(i);class L{element;canvas;details;dots;transition;indexElement;constructor(e){let t=e.parentElement;this.canvas=t.querySelector(".transition"),this.element=e,this.indexElement=e.querySelector(".control-index > div"),this.transition=new _(this.canvas,["/imgs/arts/pic_web_01.jpg","/imgs/arts/pic_web_02.jpg","/imgs/arts/pic_web_03.jpg"],"/imgs/summary/dis.jpg",{duration:1200}),this.details=[];for(let s of e.querySelectorAll(".summary-details"))this.details.push(s);this.dots=[];for(let s of t.querySelectorAll(".dots .dot"))this.dots.push(s);for(let s=0,r=this.dots.length;s<r;++s)this.dots[s].onclick=()=>{this.selected=s};e.querySelector(".control-arrow .left").addEventListener("click",()=>{let s=this.selected-1;s<0&&(s+=this.length),this.selected=s}),e.querySelector(".control-arrow .right").addEventListener("click",()=>{this.selected=(this.selected+1)%this.length}),this.selected=0}get length(){return this.details.length}_tween;_selected;set selected(e){if(this._selected!==e){typeof this._selected=="number"&&(this.dots[this._selected].classList.remove("selected"),this.details[this._selected].classList.remove("selected"));let t=this._selected||0;this.indexElement.innerText=`${e+1}/${this.length}`,this._selected=e,this.dots[e].classList.add("selected"),this.details[e].classList.add("selected"),this.setTimeout(),this.transition.setImage(t,e),this.transition.progress=0,this.transition.draw(),this._tween?.stop(),this._tween=new m(this.transition).to({progress:1},900).onUpdate(()=>{this.transition.draw()}).start()}}get selected(){return this._selected}_timeout;setTimeout(){clearTimeout(this._timeout)}}for(let i of document.querySelectorAll(".summary"))new L(i);class S{element;milestones;constructor(e){this.element=e,e.addEventListener("mousedown",this.touchstart.bind(this)),e.addEventListener("touchstart",this.touchstart.bind(this)),e.addEventListener("mousemove",this.touchmove.bind(this)),e.addEventListener("touchmove",this.touchmove.bind(this)),window.addEventListener("mouseup",this.touchend.bind(this)),e.addEventListener("touchend",this.touchend.bind(this)),e.addEventListener("touchcancel",this.touchend.bind(this)),this.milestones=[];let t=!0,o=0;for(let l of this.element.querySelectorAll(".milestone")){let s=l;this.milestones.push(s),t&&s.classList.add("done"),s.classList.contains("selected")&&(t=!1,o=s.offsetLeft+s.clientWidth/2-this.element.clientWidth/2,this.element.scrollTo({left:o}))}}_dragging=!1;_pointer={x:0,y:0};_oldX;makePointer(e){e instanceof MouseEvent?this._pointer={x:e.screenX,y:e.screenY}:e instanceof TouchEvent&&(this._pointer={x:e.touches[0].screenX,y:e.touches[0].screenY})}touchstart(e){this._dragging||(this._dragging=!0,this.makePointer(e),this._oldX=this.element.scrollLeft)}touchmove(e){if(this._dragging){let t=this._pointer.x;this.makePointer(e);let o=t-this._pointer.x;if(o>0){let l=this.element.scrollWidth-this.element.clientWidth;this._oldX<l&&(this._oldX+=o),this._oldX>l&&(this._oldX=l),console.log(this._oldX),this.element.scrollTo({left:this._oldX})}else o<0&&(this._oldX>0&&(this._oldX+=o),this._oldX<0&&(this._oldX=0),this.element.scrollTo({left:this._oldX}))}}touchend(e){this._dragging&&(this._dragging=!1)}}for(let i of document.querySelectorAll(".road-map > .map"))new S(i);let E=document.querySelectorAll(".split-view");for(let i of E)new n(i);class b{element;volumeIcon;mute;video;muteIcon;volumeUpIcon;_firstPlay=!1;constructor(e){this.element=e,this.volumeIcon=e.querySelector(".volume-icon"),this.mute=localStorage.getItem("video-mute")==="1",this.video=e.querySelector(".video video"),this.muteIcon=e.querySelector(".mute"),this.volumeUpIcon=e.querySelector(".volume-up"),this.volumeIcon.onclick=()=>{this.mute=!this.mute,localStorage.setItem("video-mute",`${this.mute?1:0}`),this._updateVolumeIcon()},this._updateVolumeIcon(),this.playVideo(),window.addEventListener("mousedown",()=>{this.playVideo()});let t=()=>{let o=e.getBoundingClientRect(),l=(o.top+o.bottom)/2,s=window.innerHeight,r=Math.min(s/2-Math.abs(s/2-l),0),w=Math.max(1+r/2048,0);this.video.volume=w};window.addEventListener("scroll",t),t()}_updateVolumeIcon(){this.mute?(this.video.muted=!0,this.muteIcon.style.display="block",this.volumeUpIcon.style.display="none"):(this.video.muted=!1,this.muteIcon.style.display="none",this.volumeUpIcon.style.display="block")}async playVideo(){var e=this.video.getBoundingClientRect();if(e.width<=0||e.height<=0){this.video.autoplay=!1;return}else this.video.autoplay=!0;if(!this._firstPlay)try{await this.video.play(),this._firstPlay=!0}catch{}}}for(let i of document.querySelectorAll(".cover-gap"))new b(i);
