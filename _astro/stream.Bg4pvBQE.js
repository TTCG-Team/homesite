import{a8 as p,K as q,b as Q,C as Z,h as $}from"./index.browser.esm.-7-YfEcu.js";import{u as J,O as j,B as Y,U as c,F as B}from"./binary-layout.B-VkPcB9.js";import{_ as F,S as C,d as V,p as X,a as ee,o as K,m as te,f as ne,b as O,c as R,e as G,i as T,g as D,t as E,h as H,s as I,j as A,r as re,k as ie}from"./throttleTime.B_M5ddZq.js";import{q as ae,u as oe}from"./solana-wallets-vue.C44L5Qv6.js";var L=function(e){F(r,e);function r(n){var t=e.call(this)||this;return t._value=n,t}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(n){var t=e.prototype._subscribe.call(this,n);return!t.closed&&n.next(this._value),t},r.prototype.getValue=function(){var n=this,t=n.hasError,a=n.thrownError,i=n._value;if(t)throw a;return this._throwIfClosed(),i},r.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},r}(C),ue=function(e){F(r,e);function r(n,t,a){n===void 0&&(n=1/0),t===void 0&&(t=1/0),a===void 0&&(a=V);var i=e.call(this)||this;return i._bufferSize=n,i._windowTime=t,i._timestampProvider=a,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=t===1/0,i._bufferSize=Math.max(1,n),i._windowTime=Math.max(1,t),i}return r.prototype.next=function(n){var t=this,a=t.isStopped,i=t._buffer,s=t._infiniteTimeWindow,o=t._timestampProvider,u=t._windowTime;a||(i.push(n),!s&&i.push(o.now()+u)),this._trimBuffer(),e.prototype.next.call(this,n)},r.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(n),a=this,i=a._infiniteTimeWindow,s=a._buffer,o=s.slice(),u=0;u<o.length&&!n.closed;u+=i?1:2)n.next(o[u]);return this._checkFinalizedStatuses(n),t},r.prototype._trimBuffer=function(){var n=this,t=n._bufferSize,a=n._timestampProvider,i=n._buffer,s=n._infiniteTimeWindow,o=(s?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!s){for(var u=a.now(),d=0,f=1;f<i.length&&i[f]<=u;f+=2)d=f;d&&i.splice(0,d+1)}},r}(C),se=Array.isArray;function fe(e){return e.length===1&&se(e[0])?e[0]:e}function ce(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=X(e),t=ee(e,1/0);return e=fe(e),K(function(a,i){te(t)(ne(O([a],R(e)),n)).subscribe(i)})}function le(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ce.apply(void 0,O([],R(e)))}function de(e){e===void 0&&(e={});var r=e.connector,n=r===void 0?function(){return new C}:r,t=e.resetOnError,a=t===void 0?!0:t,i=e.resetOnComplete,s=i===void 0?!0:i,o=e.resetOnRefCountZero,u=o===void 0?!0:o;return function(d){var f,l,m,v=0,w=!1,h=!1,b=function(){l?.unsubscribe(),l=void 0},x=function(){b(),f=m=void 0,w=h=!1},M=function(){var _=f;x(),_?.unsubscribe()};return K(function(_,z){v++,!h&&!w&&b();var y=m=m??n();z.add(function(){v--,v===0&&!h&&!w&&(l=k(M,u))}),y.subscribe(z),!f&&v>0&&(f=new G({next:function(g){return y.next(g)},error:function(g){h=!0,b(),l=k(x,a,g),y.error(g)},complete:function(){w=!0,b(),l=k(x,s),y.complete()}}),T(_).subscribe(f))})(d)}}function k(e,r){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];if(r===!0){e();return}if(r!==!1){var a=new G({next:function(){a.unsubscribe(),e()}});return T(r.apply(void 0,O([],R(n)))).subscribe(a)}}function P(e,r,n){var t,a=!1;return t=e,de({connector:function(){return new ue(t,r,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function W(e,r){return K(function(n,t){var a=null,i=0,s=!1,o=function(){return s&&!a&&t.complete()};n.subscribe(D(t,function(u){a?.unsubscribe();var d=0,f=i++;T(e(u,f)).subscribe(a=D(t,function(l){return t.next(r?r(u,l,f,d++):l)},function(){a=null,o()}))},function(){s=!0,o()}))})}new p("TTCGkEskz8Coj1U1UHuNnquQxtm9Cj4hzKvbF5HS6Hm");const N=q.fromSecretKey(new Uint8Array([237,116,217,235,225,65,118,184,61,252,84,54,210,225,183,101,192,20,197,53,53,64,51,238,234,185,46,54,245,179,181,213,6,133,230,225,205,54,26,36,122,135,26,171,24,141,131,209,52,89,140,19,143,232,99,209,31,120,224,50,221,165,161,227]));new p("526SHGkpwYC5GK3NKMv4QSpAwCrFKjHbbnHs2kkHLus1");new p("HUPFcCmKZFLSyDzrYpJapDDbC5DCwkZkGevbozaEAJf5");new p("3WWrNLibTZsQqnGKNkn4NfKooSsGQGmPRtx5Wdj6BpA2");new p("99qQVnRs9juNhwmr7hcAuGRyYAf1HR6fNiUkFReJaGFD");new p("CCrd6FPk1zu5641ksm4SdXLDiHd2TRd6gSnZCXVrKrMr");new p("CShrvPhcbeLDgSteGgXwJPKDzLNQHbE4WykzSMdQGhYM");const pe=new j([new c("expiring_time"),new c("max_sol_of_one_order"),new c("token_to_sell_amount"),new c("token_selled_amount"),new c("target_value_in_sol")],"seller"),me=new j([new B(32,"last_nonce"),new c("start_time"),new c("expiring_time"),new c("last_reward_time"),new c("reward_per_second"),new c("pending_reward"),new c("count"),new B(16,"mine_diff_ema")],"mine"),_e=new j([new Y("is_initialized"),pe,me]);function U(e){return J(Q.Buffer.from(e.data),_e)}async function We(e){let r=await e.getAccountInfo(N.publicKey);return U(r)}function ve(e,r,n,t,a){const i=6e4*a;return e.pipe(E(1e3),W(()=>H(i).pipe(I(0),le(r.pipe(E(5*1e3))),W(()=>(console.log(">> query mine state"),n.next(!0),e.value.getAccountInfo(N.publicKey))),A(o=>(n.next(!1),t.next(Date.now()/1e3|0),o?U(o):null)),re({delay:.1*i}))))}function we(e){return e.pipe(W(n=>{let{start_time:t,last_reward_time:a,pending_reward:i,reward_per_second:s}=n.mine,o=Date.now()/1e3;return o<t?ie(0):H(1e3).pipe(A(u=>u+1),I(0),A(u=>{let d=o+u-a;return(i+d*s)/1e9|0}))}))}let S=window.connectionData;if(!S){let e=new L(new Z($("devnet")));ae({}),S={connection:e,wallet:oe()}}const he=S.connection,je=S.wallet,be=new C,ye=new L(0),ge=new L(!1),Se=ve(he,be,ge,ye,5).pipe(P(1));we(Se).pipe(P(1));export{je as $,We as g};
