/* empty css                                   */import{d as w,i as f,o as m,j as v,w as p,a as u,c as I,F as h,k as V,m as D,T as F,l as W,S as A,b as c,t as d,u as P,r as R,f as B}from"./solana-wallets-vue.Bg2Mj8Cu.js";import{x as O,w as N,g as M,b as K,C as j,c as L,B as U}from"./index.6m-d3fl8.js";import{u as G}from"./index.DXBJq5Wd.js";import{_ as E,I as H,c as q,s as z,a as J,b as Q,C as S,d as x}from"./_plugin-vue_export-helper.CwbohRMf.js";import{$ as X,c as Y}from"./stream.BpS3-xGt.js";import{b as Z}from"./index.pj2VwCcK.js";import{g as T,c as C,T as $,u as ee}from"./use-toast._Bhg7uU9.js";const te=w({__name:"Slider",props:{name:{},defaultValue:{},modelValue:{},disabled:{type:Boolean},orientation:{},dir:{},inverted:{type:Boolean},min:{},max:{},step:{},minStepsBetweenThumbs:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","valueCommit"],setup(a,{expose:o,emit:i}){o();const e=a,s=i,n=f(()=>{const{class:_,...b}=e;return b}),t=O(n,s),r={props:e,emits:s,delegatedProps:n,forwarded:t,get SliderRange(){return N},get SliderRoot(){return M},get SliderThumb(){return K},get SliderTrack(){return j},get cn(){return L}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function ae(a,o,i,e,s,n){return m(),v(e.SliderRoot,D({class:e.cn("relative flex w-full touch-none select-none items-center",e.props.class)},e.forwarded),{default:p(()=>[u(e.SliderTrack,{class:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary"},{default:p(()=>[u(e.SliderRange,{class:"absolute h-full bg-primary"})]),_:1}),(m(!0),I(h,null,V(i.modelValue,(t,r)=>(m(),v(e.SliderThumb,{key:r,class:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}))),128))]),_:1},16,["class"])}const ne=E(te,[["render",ae]]);async function re(a,o,i){const e=T(x,a),s=T(S,a);let n=Z.Buffer.alloc(17),t=0;t=n.writeUint8(H.Buy,t),t=n.writeBigInt64LE(BigInt(o),t),t=n.writeBigInt64LE(BigInt(i),t);const r=new F;return r.feePayer=a,r.add(C(a,e,a,x),C(a,s,a,S),new W({programId:q,keys:[{pubkey:z.publicKey,isWritable:!0,isSigner:!1},{pubkey:J,isWritable:!0,isSigner:!1},{pubkey:Q,isWritable:!0,isSigner:!1},{pubkey:a,isWritable:!0,isSigner:!0},{pubkey:e,isWritable:!0,isSigner:!1},{pubkey:S,isWritable:!0,isSigner:!1},{pubkey:s,isWritable:!0,isSigner:!1},{pubkey:$,isWritable:!1,isSigner:!1},{pubkey:A.programId,isWritable:!1,isSigner:!1}],data:n})),r}const oe=w({__name:"BuyToken",setup(a,{expose:o}){o();const{toast:i}=ee(),e=P(),s=G(X),n=f(()=>{if(s.value){const l=s.value.seller,g=l.target_value_in_sol,y=l.token_to_sell_amount-l.token_selled_amount;return g/y}else return 0}),t=R([1]),r=f(()=>{let l=t.value[0];return Math.max(.01,l)}),_=f(()=>n.value>0?r.value/n.value:0);async function b(){const l=e.publicKey.value;if(l||(await e.connect(),console.log("没有选择钱包")),l){const g=_.value*1e9*.95|0,y=await re(e.publicKey.value,r.value*1e9,g);await e.sendTransaction(y,Y.value)}}const k={toast:i,wallet:e,state:s,price:n,inputSolSliderValue:t,inputSol:r,to_get_token_amount:_,buy_token:b,get Button(){return U},get Slider(){return ne}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),se={class:"w-60"};function ie(a,o,i,e,s,n){return m(),I(h,null,[c("div",null,d((1/e.price.valueOf()).toFixed(3))+" cc for 1 sol",1),c("div",se,[u(e.Slider,{"default-value":[1],max:1,step:.01,modelValue:e.inputSolSliderValue,"onUpdate:modelValue":o[0]||(o[0]=t=>e.inputSolSliderValue=t)},null,8,["modelValue"])]),c("div",null,"你将花费 "+d(e.inputSol)+" sol 以获取 "+d(e.to_get_token_amount.toFixed(3))+" token",1),c("div",null,"因为滑点导致的最少token不少于 "+d((e.to_get_token_amount.valueOf()*.95).toFixed(3)),1),u(e.Button,{onClick:e.buy_token},{default:p(()=>[B("购买")]),_:1}),u(e.Button,{variant:"outline",onClick:o[1]||(o[1]=()=>{e.toast({title:"Scheduled: Catch up",description:"Friday, February 10, 2023 at 5:57 PM"})})},{default:p(()=>[B(" Add to calendar ")]),_:1})],64)}const be=E(oe,[["render",ie]]);export{be as default};
